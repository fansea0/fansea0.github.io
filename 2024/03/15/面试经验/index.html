<!DOCTYPE html><html lang="zh-CN" data-theme="light"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no"><title>面试经验 | FANSEA</title><meta name="robots" content="noindex"><meta name="keywords" content="面试"><meta name="author" content="FANSEA"><meta name="copyright" content="FANSEA"><meta name="format-detection" content="telephone=no"><meta name="theme-color" content="#f7f9fe"><meta name="mobile-web-app-capable" content="yes"><meta name="apple-touch-fullscreen" content="yes"><meta name="apple-mobile-web-app-title" content="面试经验"><meta name="application-name" content="面试经验"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-status-bar-style" content="#f7f9fe"><meta property="og:type" content="article"><meta property="og:title" content="面试经验"><meta property="og:url" content="https://fansea0.github.io/2024/03/15/%E9%9D%A2%E8%AF%95%E7%BB%8F%E9%AA%8C/index.html"><meta property="og:site_name" content="FANSEA"><meta property="og:description" content="面试经验非技术问题问答自我介绍【面带笑容、自信介绍】 123456789面试官你好，我是湖南科技大学25届达钦海，将从实习经历、校园经历以及个人优势三个方面来介绍一下我自己。在去年这个时候，我有幸在浙江大学湖州研究院和上海衍因科技公司实习。在浙大实习期间我负责了浙大淋巴医疗检测项目的研发工作，从架构"><meta property="og:locale" content="zh-CN"><meta property="og:image" content="https://fansea0.github.io/fansea.png"><meta property="article:author" content="FANSEA"><meta property="article:tag"><meta name="twitter:card" content="summary"><meta name="twitter:image" content="https://fansea0.github.io/fansea.png"><meta name="description" content="面试经验非技术问题问答自我介绍【面带笑容、自信介绍】 123456789面试官你好，我是湖南科技大学25届达钦海，将从实习经历、校园经历以及个人优势三个方面来介绍一下我自己。在去年这个时候，我有幸在浙江大学湖州研究院和上海衍因科技公司实习。在浙大实习期间我负责了浙大淋巴医疗检测项目的研发工作，从架构"><link rel="shortcut icon" href="/favicon.ico"><link rel="canonical" href="https://fansea0.github.io/2024/03/15/%E9%9D%A2%E8%AF%95%E7%BB%8F%E9%AA%8C/"><link rel="preconnect" href="//cdn.cbd.int"/><meta name="google-site-verification" content="xxx"/><meta name="baidu-site-verification" content="code-xxx"/><meta name="msvalidate.01" content="xxx"/><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.css" media="print" onload="this.media='all'"><link rel="stylesheet" href="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.css" media="print" onload="this.media='all'"><script>const GLOBAL_CONFIG = {
  linkPageTop: undefined,
  peoplecanvas: {"enable":true,"img":"https://upload-bbs.miyoushe.com/upload/2023/09/03/125766904/ee23df8517f3c3e3efc4145658269c06_5714860933110284659.png"},
  postHeadAiDescription: {"enable":true,"gptName":"AnZhiYu","mode":"local","switchBtn":false,"btnLink":"https://afdian.net/item/886a79d4db6711eda42a52540025c377","randomNum":3,"basicWordCount":1000,"key":"xxxx","Referer":"https://xx.xx/"},
  diytitle: {"enable":true,"leaveTitle":"w(ﾟДﾟ)w 不要走！再看看嘛！","backTitle":"♪(^∇^*)欢迎肥来！"},
  LA51: undefined,
  greetingBox: undefined,
  twikooEnvId: '',
  commentBarrageConfig:undefined,
  root: '/',
  preloader: {"source":3},
  friends_vue_info: undefined,
  navMusic: true,
  mainTone: undefined,
  authorStatus: undefined,
  algolia: undefined,
  localSearch: undefined,
  translate: {"defaultEncoding":2,"translateDelay":0,"msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简","rightMenuMsgToTraditionalChinese":"转为繁体","rightMenuMsgToSimplifiedChinese":"转为简体"},
  noticeOutdate: undefined,
  highlight: {"plugin":"highlight.js","highlightCopy":true,"highlightLang":true,"highlightHeightLimit":330},
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  relativeDate: {
    homepage: false,
    simplehomepage: true,
    post: false
  },
  runtime: '天',
  date_suffix: {
    just: '刚刚',
    min: '分钟前',
    hour: '小时前',
    day: '天前',
    month: '个月前'
  },
  copyright: {"copy":true,"copyrightEbable":false,"limitCount":50,"languages":{"author":"作者: FANSEA","link":"链接: ","source":"来源: FANSEA","info":"著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。","copySuccess":"复制成功，复制和转载请标注本文地址"}},
  lightbox: 'fancybox',
  Snackbar: {"chs_to_cht":"你已切换为繁体","cht_to_chs":"你已切换为简体","day_to_night":"你已切换为深色模式","night_to_day":"你已切换为浅色模式","bgLight":"#425AEF","bgDark":"#1f1f1f","position":"top-center"},
  source: {
    justifiedGallery: {
      js: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.min.js',
      css: 'https://cdn.cbd.int/flickr-justified-gallery@2.1.2/dist/fjGallery.css'
    }
  },
  isPhotoFigcaption: false,
  islazyload: true,
  isAnchor: false,
  shortcutKey: undefined,
  autoDarkmode: true
}</script><script id="config-diff">var GLOBAL_CONFIG_SITE = {
  configTitle: 'FANSEA',
  title: '面试经验',
  postAI: '',
  pageFillDescription: '面试经验, 非技术问题问答, 自我介绍, 阐述项目中问题, 软技能提问, 亮点x2F解决问题, 压力, 经验x2F教训, 团队, 个人角色, 协作经验, 常问问题, 项目技术栈复习, 为什么用MySQL而不是其他数据库保存截面数据, 工厂+策略模式, 为什么使用WebSocket而不是SSE, Caffeine, 问题背景 WHY, 如何解决 HOW, 代码实现, 问题思考 WHAT, LRU, 问题背景, 如何解决, 问题思考, JNA, 问题背景, 如何解决, 代码实现, 问题思考, PostgresSQL, 问题背景, 如何解决, 代码实现, 问题思考, 基于微服务的分层架构, 分层架构概述, 设计的好处, , 架构选型, 双架构策略, 标准SaaS架构（决策）, 租户订阅, 组件设计, 数据库设计, 数据隔离, 租户隔离模型, 具体实现, 网关层, 租户订阅, 租户隔离, 兑换码功能设计, RocketMQ, 问题背景, 如何解决, 代码实现, 问题思考, ZLMediaKit, 问题背景, 如何解决, 代码实现, 问题思考, Lua 和 Redisson, Liquibase, JSerialComm, 经典提问方式, 谈一谈XXX的理解, XXX的原理, XXX和YYY的区别, 为什么要XXX, XXX的发生原因, AI面试题, 江西南昌：面试, 亚信科技：面试, 亚信科技：笔试, 哔哩哔哩：笔试, 杭州合思：面试, 北京慧策：笔试, 上海衍因：面试, 北京京东：笔试, 招商银行：笔试, 中海达：面试, 美团：面试, 1. 数据库设计, 表结构, 3. 后端逻辑, 5. 性能优化, Redis优化, 1. 存储关注关系, 2. 缓存热点数据, 3. 实现实时更新, 5. 数据一致性, 6. 数据持久化, 注意事项, 车三百：笔试, 米健康：笔试, 腾讯云智：笔试, 腾讯云智：面试, 安克创新：面试, 一面, HR面试, HR面核心问题分类, 1. 高频行为题（跨岗位通用）, 2. 个人背景与稳定性, 微派网络, 项目, 计网, 数据库, 消息队列, AI, 场景题, 算法面试经验非技术问题问答自我介绍面带笑容自信介绍面试官你好我是湖南科技大学届达钦海将从实习经历校园经历以及个人优势三个方面来介绍一下我自己在去年这个时候我有幸在浙江大学湖州研究院和上海衍因科技公司实习在浙大实习期间我负责了浙大淋巴医疗检测项目的研发工作从架构设计数据库设计到核心功能实现完成了项目的到的搭建运行项目中遇难克难的历程中我收获了很多增进了对程序设计的理解随后在上海衍因科技公司参与到公司专业的团队开发流程学习了系统设计的主流方案以及自上而下的微服务分层架构在功能开发方面我主要完成了项目文件回收站兑换码功能的设计与研发在校期间我担任了学习委员电子俱乐部外联部干事并在湖南科技大学网络信息中心实习担任负责人负责团队管理我们团队是负责湖南科技大学信息化建设的团队在任职期间完成了校内信息化项目资安学工的研发团队取得了三项软件著作权并有多名成员进入国内外知名企业这些经历使我提升了个人专业技能积累了丰富的团队协作经验提升了组织管理表达和人际交往能力我认为我的个人优势在于具备丰富的实习项目团队协作经验具备两大的价值观第一性原理求极致第一性看问题从问题的本质出发把大问题拆分为不可再分的原子问题更快定位原因从更客观的角度看问题通信速率慢如何解决求极致不局限于把事情完成而更想把事情做好浙大实习期间负责的项目我主动对接甲方需求我是一个有想法真正热爱创新的开发者喜欢接触尝试新的东西在校期间自主搭建了湖科大宠物身份证平台学习感想你的聆听我的自我介绍完毕面试官你好我是湖南科技大学届达钦海将从实习经历校园经历以及个人优势三个方面来介绍一下我自己在去年这个时候我有幸在浙江大学湖州研究院和上海衍因科技公司实习在浙大实习期间我负责了浙大淋巴医疗检测项目的研发工作从架构设计数据库设计到核心功能实现完成了项目的到的搭建运行项目中遇难克难的历程中我收获了很多增进了对程序设计的理解随后在上海衍因科技公司参与到公司专业的团队开发流程学习了系统设计的主流方案以及自上而下的微服务开发的架构实现新功能短周期快速迭代并负责管理模块的重构项目文件回收站兑换码功能租户订阅系统设计与研发在校期间我担任了学习委员电子俱乐部外联部干事并在湖南科技大学网络信息中心实习担任负责人负责团队管理我们团队是负责湖南科技大学信息化建设的团队在任职期间完成了校内信息化项目资安学工的研发团队取得了三项软件著作权并有多名成员进入国内外知名企业这些经历使我提升了个人专业技能积累了丰富的团队协作经验提升了组织管理表达和人际交往能力阐述项目中问题背景根本原因影响方案软技能提问亮点解决问题第一性原理解决问题不同角度看事情创新压力经验教训核心功能关注扩展性健壮性非核心功能关注可用性团队个人角色贝尔宾团队角色思考型社交型行动型点子很多有想法热爱社交打通和成员的关系协作经验团队协作问题多源于成员之间信息不对等我认为协作中沟通至关重要发现问题要主动及时沟通莫因面子或不好意思让问题搁置否则阻碍项目进展影响上下游提问要有针对性与技巧别一有问题就问先自行尝试解决但别死磕把问题收集起来再问避免打扰他人工作提问时交代问题背景已做尝试及结果让同事更好理解也能加快问题解决发现问题及时沟通减少因为信息差导致的返工先自主探索避免死磕及时止损提问三大要素背景尝试结果帮助对方快速定位问题避免重复尝试无效方法常问问题你为什么想加入我们公司在我很小的时候受家庭影响立志要闯出自己的一番事业这对于我个人的一个择业规划就很注重企业平台和发展性然后我了解到安克是一个赋能创造者平台并且我通过在安克实习的同学了解到安克同时是一家机会多伙伴好氛围好的高效率运转的企业借助这个平台能学到自我提升方法论的同时可以在奋斗创新中实现我的个人价值和人生目标了解过安克创新吗考你对是否用心了解公司借此可以谈谈自己对公司业务需要的人才品质价值观来回答好这个问题第一次关注到安克是因为特朗普的一次直播中看到他用了咱安克的充电宝妥妥总统臻选啊后面我就感兴趣去深入了解了一下咱安克发现安克是一家消费电子出海的独角兽企业宏观上安克敏锐洞察市内缺口聚焦海外市场微观上从第一性原理出发抛开表面事实找到问题突破的关键不断优化产品就是在这样的一个与行业风向的竞赛中安克年营收高达百亿这样的耀眼的成绩我觉得还有一部分原因在于安克的自我使命极致创新激发可能这个是和第一性原理紧耦合的第一性原理是发现一个不同于大众的赛道而求极致是在这一条陌生的赛道笃志前行你的未来职业规划希望通过询问职业规划来评估你的职业目标是否与公司的发展方向一致以及你是否具备足够的潜力和稳定性长期为公司贡献职业规划概括为以下三点夯实技术基础担任重要角色保持长期主义年内快速积累个人的专业知识和业务技能成为开发的行业专家年我想从螺丝钉成长为独当一面的架构师在公司产品线担任重要角色这样的责任感会激励我把追求极致的精神运用在这份事业中实现人生理想的同时给咱安克交出一份满意的答卷先夸下公司和职位展示自己未来的发展路线和这个职位很匹配比如可以说贵公司规模很大或者贵公司在这个行业的项目很有吸引力或者说这个职位和我未来的发展规划很匹配然后可以说我在未来的到年内打算在领域进一步发展着重积累方面的经验和技术上文提到的领域和技术都需要和这个职位想匹配其实面试官自己都知道哪怕是大公司能留住求职者年就已经很不错了小公司的话估计年就跳槽但话得这样说证明自己愿意干长久然后说下自己的技术或经验的进阶路线比如可以说如果有幸得到这个工作机会我打算进一步学习技术让自己更加资深同时我将进一步学习和实践和这个职位有关的技术总之让自己更加适合这个工作再进一步说明自己和这个职位的匹配程度相比于其他人你的优势在哪里具备丰富的实习项目团队协作经验认可且具备的价值观第一性原理求极致第一性看问题从问题的本质出发把大问题拆分为不可再分的原子问题更快定位原因从更客观的角度看问题通信速率慢如何解决求极致不局限于把事情完成而更想把事情做好浙大实习期间负责的项目我主动对接甲方需求我是一个有想法真正热爱创新的开发者喜欢接触尝试新的东西在校期间自主搭建了湖科大宠物身份证平台学习你是如何学习新知识的项目中是否和其他同学有意见不一然后如何解决的一些问题尊重他人的意见积极沟通用数据和事实说话在之前的项目中确实遇到过和其他同学意见不一的情况有一次我们在做一个校园活动策划项目对于活动的宣传方式我主张利用线上社交媒体进行广泛传播制作有趣的短视频和互动话题来吸引同学们的关注而另一位同学则认为应该以线下张贴海报和发放传单为主他觉得这样能直接触达目标群体当发现我们的意见不一致时我首先做的是冷静下来避免情绪化的争论然后我主动找了个时间和他坐下来好好沟通我先让他详细阐述他选择线下方式的理由他也提到了线下宣传的直接性和覆盖面广等优点接着我也阐述了我对于线上宣传的想法包括线上宣传的可扩展性成本效益以及能够精准定位目标受众等优势之后我们一起收集了之前类似活动的宣传数据发现线上宣传在吸引年轻群体方面确实有很好的效果但线下宣传在提高活动知名度方面也有不可替代的作用于是我们决定将两种方式结合起来重新规划了宣传预算和资源分配让线上和线下宣传相互补充在这个过程中我觉得尊重他人的意见积极沟通用数据和事实说话是很重要的这样才能有效地解决意见不一的问题达成团队共识然后问了情况具说情况表达安克的好我本人已有个如果能拿到安克的机会我将会给他们都释放掉这个时候去讨论安克的一个优点在我很小的时候受家庭影响立志要闯出自己的一番事业这对于我个人的择业规划就很注重企业平台和发展性我了解到安克是一个赋能创造者平台的企业并且我通过在安克实习的同学了解到安克同时是一家机会多伙伴好氛围好的高效率运转的企业借助这个平台能学到自我提升方法论的同时可以在奋斗创新中实现我的个人价值和人生目标而且我很希望来深圳这个城市我父母也在这边期望薪资多少我了解到该岗位在深圳的薪资范围是结合我的实习经历和技能储备还有目前的薪资水平希望能争取到当然我也很看重贵司的发展平台和学习机会项目技术栈复习为什么用而不是其他数据库保存截面数据通过记录来建立索引快速搜索其实项目中数据采集频率快数据量大对时序性要求高很适合用这样的时序数据库因为不管使用什么数据库其保存的数据都是一样的我在项目中定义了一个策略模式行为接口实现了用进行数据的保存方法未来可以直接在此基础上定义新的策略实现已经定义好的策略接口更方便去实现的扩展工厂策略模式获取光栅数据有两种方案上报轮询他们分别都有优缺点适应不同的场景医生通过选项来指定对应的模式来执行最终的扫描操作上报数据处理快但是无法保障数据的完整性精度较高适用于更加精细的使用场景描轮询数据处理慢但能自主设定轮询频率精度相对就底适用于简单的形体扫使用该模式的好处工厂模式将策略封装在工厂通过工厂获取减少业务对策略的直接依赖减耦合并且方便了扩展策略模式可以避免优化代码结构用于对应两种数据获取方案定义策略策略的两个实现轮询策略上报策略将设备注册监听类策略工厂类用于生成策略根据设备类型选择适配器设备类型错误实际使用适配器模式优化为什么使用而不是更适用于高频更新的数据推送加密传输基于而基于有较多的头部开销所以传输效率更高基于框架高效管理设备在线状态注册监听器自动释放过期设备的串口资源提升系统资源利用率问题背景串口通信资源的创建操作都是基于对象的并且一个串口对应一个这就要求后端需要单例存储这个全局的对象设计方案的同时需要考虑到对资源的超时释放对象回收导致的资源无法正常释放的情况如何解决全局的对象资源保存框架底层基于可以保存对象资源所有对串口对象获取从获取并且一个串口对应一个实现全局对象超时释放注册移除监听器当串口长时间未进行操作移除会缓存对象此时监听器会在移除时执行串口资源关闭操作保证资源正常释放避免回收与对象资源建立的是强引用关系在使用时其串口资源是不会被回收的在未使用时会在监听器实现超时释放进一步保障了资源安全释放问题代码实现配置的注册监听器保证缓存过期的时候能将串口资源安全释放并记录串口退出的原因设置在线设备缓存配置监听器在缓存过期时关闭串口的值表示显式地调用删除操作直接将某个数据删除表示某个数据被更新表示因为生命周期结束过期时间到了而被清除表示因为缓存空间大小受限总权重受限而被清除用于我们的垃圾收集器也就是我们上面减少的软引用弱引用在读写操作之后刷新时间保证再使用时不会中断正常串口关闭串口已下线原因通过去存储使用关闭串口资源存储判断端口是否被占用该串口已被占用请更换串口将设备注册到中存入到中并设置过期时间使用获取用户用户未连接设备关闭问题思考技术对比无超时过期功能过期仅仅只能移除对象而不能在移除对象时显性调用资源关闭的方法序列化和反序列化监听器实现消耗高同时满足过期续期资源正常关闭的场景采用动态缓存加载指令并融合算法显著提升缓存命中率有效减少至时延与内存占用问题背景项目中指令计算校验码底层是通过调用了实现的这个方法耗时长而有部分指令经常需要被使用并且鉴于某一个指令如果被加载使用过下次被使用的概率会很大为了减少他的持续加载决定采用算法进行指令缓存如何解决新建缓存集合继承重写定义逻辑当保存的指令数量大于设定的最大空间淘汰最久未使用的指令设置访问顺序为问题思考什么是是最近最少使用的缩写它是一种常用的缓存淘汰策略当缓存满载需要腾出空间时算法会选择最近最久未被使用的数据项进行淘汰是最少使用频率在这种算法中存储系统会记录每条记录被访问的次数即使用频率当需要腾出空间时它会选择那些被访问次数最少的数据项进行淘汰这意味着即使是近期访问过的数据如果其总的访问次数少也可能被优先淘汰通过在应用中调用语言生成的动态链接实现高效率的串口通信数据传输时延低至问题背景调用串口资源进行串口通信速率达不到业务要求如何解决通过调用动态链接调用本地方法优化执行速率并且基于协议的串口通信指令常包括无符号值而并不支持这种数据类型还需要做进一步转换代码实现定义加载实现开启打印关闭打印开启打印关闭打印打开串口打开串口设置读写缓存大小设定读写超时设置串口状态属性封装为一个方法供调用打开串口对数据进行处理关闭串口问题思考调用串口资源比快的原因可以从以下几个方面来解释是静态类型语言编译后生成的代码通常是直接与硬件交互的机器码由于它是编译型语言程序在运行前就已经完成了所有的类型检查和优化工作因此运行时可以直接执行高效的机器指令并且串口通信底层硬件驱动和库都是用或写的所以直接用调用这些库通常会更快是一种解释型语言代码先解释为字节码再转化为机器码与的区别都是调用本地方法的方式但是调用本地方法操作更加便捷设计实现项目文件的回收站并结合快照版本控制方案快速恢复至所需状态有效减少了数据丢失的风险问题背景查看文件内容的历史修改如何解决提供一个快照表保存文件在中保存文件内容这样就可以通过文件和区查看到不同版本的内容定义文件快照表快照表代码实现因为同时要记录修改人老版本文件内容新版本文件内容问题思考基于微服务的分层架构你提到的这种从左至右依赖的服务架构设计即通常指的是这样的分层结构通常与现代微服务架构或者企业级应用架构设计相关这样的架构模式可以被称为分层架构或更具体地称为基于微服务的分层架构分层架构概述作为系统的入口点它负责客户端请求的接收和路由到相应的后端服务此外它还可能提供诸如身份验证限流缓存等服务这一层包含具体的业务逻辑和服务实现每个应用程序服务通常专注于解决特定的业务问题或功能提供共享的服务和功能这些功能对于多个应用程序来说是通用的例如消息队列数据库访问层等基础层提供整个系统运行的基础技术设施如操作系统网络配置存储解决方案等设计的好处复用性模块化灵活性模块化和解耦每一层都有明确的责任这有助于降低各组件间的耦合度使得系统更加模块化易于维护和扩展可重用性通过在平台层提供共享的服务可以在不同的应用程序中重用这些服务减少重复开发的工作量灵活性和伸缩性这种架构允许单独扩展各个层次的能力比如可以根据需求对特定的应用层服务进行水平扩展而不影响其他部分简化开发流程清晰的层次划分可以帮助团队成员更容易理解系统的整体架构简化开发过程中的沟通成本安全性增强作为一个单一入口点可以集中管理安全策略如认证授权等从而保护内部服务免受外部直接攻击综上所述这种分层架构设计能够带来更好的组织性可维护性和扩展性同时也为快速响应业务变化提供了支持租户系统设计设计思路确定产品服务产品价值服务人群确定租户类型企业个人将产品按客户人群功能细分例个人免费版个人专业版企业版大功能权限控制创建租户时生成功能关联表该表记录功能的次数开关类型细分功能权限控制设定角色权限精确控制一些读写操作架构选型双架构策略定义为个人版和企业版分别制作两套完全不同的架构特点这种方法允许每个版本专注于特定用户群体的需求但可能增加维护和开发的复杂性标准架构决策个人与企业功能需求并没有存在明显差异统一架构更适合当前公司的规模降低长期技术负债风险深入分析上述背景和考虑以下关键因素得出决策用户需求的一致性我们没有发现明显的证据表明不同用户群体个人用户与企业用户之间的功能需求存在显著差异这意味着一个统一的架构能够有效地满足所有用户的基本需求当前产品发展阶段和资源考量考虑到我们产品目前所处的发展阶段以及公司的规模和人力资源状况采用一个统一的架构将更加合适这将有助于我们集中资源提高开发效率后续维护和扩展性从长远来看一个标准化的架构将更容易维护和扩展这种架构的选择有助于未来的功能迭代和技术升级同时也降低了长期的技术债务风险决策使用标准化模式标准化模式定义所有版本包括个人版和企业版统一使用一套标准的架构不区分个人用户和企业用户特点这种方法强调了架构的统一性和简洁性有利于减少开发和维护成本同时提高系统的可扩展性和可维护性租户订阅决策为了高效地管理系统功能我们计划在租户管理中引入三个关键层级的控制机制模块开关功能开关以及功能限额此外面向系统内各种订阅版本例如个人版企业版等我们将设计一系列可编辑的版本模板这些模板将在租户初始化时进行配置以此确保各版本在功能可用性和资源使用上均符合其特定的服务协议和用户需求组件设计不同租户订阅需求不一样个人企业涉及多席位租户版本之间的转换服务组件设计服务作为系统的核心支撑组件担负着以下关键功能租户管理实现租户模型层提供租户数据结构和逻辑承担租户管理职责层处理租户的创建更新和删除负责租户的过程层确保租户初始化和配置提供运行时租户隔离的库层支持上层服务在运行时实现租户隔离模块与功能管理维护模块与功能管理模型层定义模块和功能的数据结构提供运行时模块开关的库层用于控制模块的激活与禁用提供运行时功能开关的库层用于管理功能级别的访问控制提供运行时功能限制的库层用于实施功能的使用限额订阅管理构建订阅模型层用于管理订阅计划的数据结构实施订阅管理功能层包括订阅计划的创建和更新管理租户的订阅变更层处理订阅升级降级和变更服务组件服务利用提供的库负责管理租户的上下文信息服务组件服务同样使用提供的库以确保在应用层面上正确管理租户上下文服务组件服务使用提供的负责以下任务管理租户上下文控制模块开关上下文确保正确的模块可用性管理功能开关上下文实施功能级别的访问控制实施功能限制上下文确保功能使用符合预定限额数据库设计用于定义订阅类型的功能包属于静态配置相当于定义了订阅类型的规范用于管理租户的实际功能启用状态属于动态数据每新建一个租户将基于定义的规范生成租户自己的数据隔离租户隔离模型在我们的系统中租户是实现数据隔离的基本单位这种模型确保了即使在底层数据存储中没有物理上的隔离用户也能体验到数据上的完全隔离对用户来说不同租户的数据在逻辑上是完全隔绝的从而在保障数据安全和隐私的同时提供了一个清晰高效的数据管理环境逻辑隔离隔离数据库内部的单元房独立数据库隔离具体实现网关层获取租户将租户用于做用户操作租户隔离加载请求头判断租户是否可以使用该功能如果不包含数据放行如果包含数据同时满足次数限制功能类型功能开关才放行判断用户角色是否拥有接口权限转发请求到对应服务租户订阅字段有使用次数限制功能类型功能开关只保存需要限制的功能用于网关层做拦截租户功能功能类型功能开关功能限制创建时间更新时间逻辑删除标志创建人更新人学术认证席位管理文献提问物料管理设备管理查看剩余席位租户隔离租户之间的数据是不可见的可以是物理上的隔离也可以是逻辑上的隔离本项目中采用的是支持的逻辑隔离方案对租户所有操作加上租户自己的实现步骤配置租户隔离拦截器重写的方法实现以租户为隔离单位的逻辑隔离重写方法过滤部分不依赖租户查询的数据网关层转发时携带兑换码功能设计如何避免层直接层项目的架构自上而下分为网关过程中项目文件回收站的新接口应该定义在哪个层让我很疑惑后面我学习到维护的是的操作是所有文件的父类而实现的是由衍生出的等实际文件文件回收站的逻辑应当是这些实际文件都有方法所以应新增在层中这有点像设计有点像的设计保存的是的属性指向而才是真正的对象基于实现了异步删除避免了底层服务向上依赖高级服务加深了对自上而下的项目架构的理解问题背景是所有文件的父类表由这张表可以引申出等实际的文件类型架构设计中层偏底层用于提供对的公共接口开放给层使用所以对于具体文件类型的操作都是依赖于的姑且称呼为高级服务高级服务可以依赖于底层服务但是底层服务不能依赖于高级服务现在需要在设计一个文件回收站而文件回收站是对的回收所以他一定在层而对各种文件的彻底删除逻辑原本在是已经实现了的所以在执行彻底删除操作时需要自下而上去调用如何解决通过实现自下而上的消息通信而避免依赖耦合代码实现发送消息让层彻底删除文件同步写入问题思考基于流服务器以及哔哩哔哩开源技术实现网页视频实时播放时延低至直播标准问题背景所谓远程实验平台其解决问题的核心就是用摄像头监控单片机在我们执行操作时候的反应用户可以通过电脑在宿舍操作的方式完成电子实验根据要求我们需要实现浏览器解析出流媒体视频对实验设备状态的高效监控现有一个方案是采取海康原生的进行开发但是这样需要去花时间成本去学习他自己定义的而且如果需要更换其他品牌的摄像头就无法使用了还有个问题是前端选型了的技术只能接收格式的视频流他是基于的而海康摄像头传输的是内容需要做转换如何解决基于高性能流服务器代理流服务器可以实现对格式流媒体文件向基于的流媒体文件转化基于流服务器代理视频流可以屏蔽摄像头平台的差异适配不同格式的视频流部署流服务器集群采用最小连接算法每个流媒体服务代理一定量的连接保障视频流稳定的同时也合理利用率服务器资源代码实现前端实现将摄像头注册在流服务器将摄像头注册在流服务器输出视频流获取本身的连接信息生成唯一标识符将失败的信息放进提示用户注册流代理失败请查看流服务器中错误信息检查摄像头及帐号密码是否正确将删掉输出视频流输出视频流全局变量存储定时器输出视频流具体操作每隔分钟重新获取一次视频流这样可以确保在视频播放过程中视频播放器始终处于活跃状态从而避免因视频播放器故障而导致的视频播放中断而无法再启动清理旧的定时器创建新的定时器停止播放重新播放后端注册流的代理流程注册成功会获得一个流媒体地址前端利用这个地址来解析出我们所看到的直播画面注册流代理为注册流代理流代理密钥流代理请求参数判断缓存中是否有该的缓存中有该的缓存中没有该的开始注册流代理获取轮询算法得到的获取视频流服务器端口失败请检测配置文件中流服务器端口是否启用注册流代理的将和拼接到中发送请求注册流代理失败请检查参数配置中的是否正确注册流代理失败请检查参数配置中的是否正确根据返回的中的判断是否注册成功注册流代理失败请查看流服务器中错误信息检查摄像头及帐号密码是否正确注册流代理失败请查看流服务器中错误信息检查摄像头及帐号密码是否正确解析获取将拼接成将和写入缓存注册流代理成功注册流代理失败请检查参数配置中的是否正确注册流代理失败请检查参数配置中的是否正确问题思考与的区别更加注重对流媒体的控制而则更加专注于实时性和低延迟的数据传输和缓存热点数据优化未用性能保障同一时间只有一个线程可以访问特定资源用于布隆过滤器来避免缓存击穿保障查库存判断库存是否足够减库存是同时操作双重保障分布式锁提供了第一层的并发控制确保在同一时间只有一个线程可以访问特定资源脚本则提供了第二层的原子性保障确保在获取锁后读取库存判断库存是否足够减少库存这三个步骤是原子的不会被其他操作打断避免三个操作被阻塞打断阻塞就比如我一开始查询出来库存是足够的在减少库存的时候发生了阻塞这个时候库存可能被修改了这会导致扣除失误的操作每个命令都需要一次网络往返保障只需要一个命令吞吐量大减少锁的竞争一个命令中完成多个操作减少了锁的竞争提高了系统的吞吐量可靠性网络中断或客户端异常退出脚本也能保证操作的完整性因为它是作为一个整体在服务器上执行的经典提问方式谈一谈的理解谈一谈对设计模式的理解解释是什么为了解决什么问题根据问题不同选择不同的回答联想核心知识点如果就是一个技术栈只需要回答原理应用场景如果是一个多概念的统述展开具体分类和应用场景归纳优缺点缺点可以对比论述的原理实现事务隔离机制的原理简述是什么为了解决什么问题原理分点论述和的区别和的区别简述和的分别是什么有什么共同点区别原理特性对比优缺点适用场景一句话对比推崇函数式编程和单向数据流而采用渐进式设计允许选项式和组合式并存加分回答这种差异导致更适合大型应用的状态管理而能快速适配小型项目为什么要为什么要自定义为什么要拆分和原来的痛点如何解决的发生原因收到数据包不一致的原因面试题谈谈引擎中的锁说一说的扩容机制协议的特点有哪些无连接一对多不阻塞不可靠协议非对称加密的过程请求服务端指定版本和加密组件返回证书公钥用机构公钥认证返回的证书上的签名是否正确生成一个密钥用公钥对密钥加密发送给用服务器的私钥解密获取密钥后续通信都是采用密钥进行加密江西南昌面试接口幂等性前端防抖说一下的生命周期实例化属性赋值自动管理依赖关系初始化初始化操作销毁的原理根据价格查询数据查询数据总数做过的人生规划亚信科技面试如何理解的面向对象三大特性继承封装多态继承子类继承父类可以对方法进行复用扩展封装属性和方法封装在一起相当于一个工具箱一样外部不需要关心实现只关心使用多态一个类所延伸的多种形态下有哪些常见的包区别删除的关键字区别关键字一点印象都没有关于删除操作的实际应用这里想问的是删除数据时要对数据进行备份日志方面在项目中的实际应用持久化混合模式文件过大怎么办重写是否关注一些开源项目公司使用等一些大数据方面的框架是否有了解是否愿意做相关方面的事情对了还问到了的的底层数据结构以及如何通过命令获取所有的元素没答上来说的是平时通过操作亚信科技笔试协程它被视为一种用户态的轻量级线程拥有自己的寄存器上下文和栈协程的切换与保存状态发生在其他地方而不是的栈里这使其在切换时能保留上一次调用时的状态面向连接的协议面向连接的协议是一种网络协议它依赖于发送方和接收器之间的显式通信和阻塞来管理双方的数据传输这种协议要求在网络系统中的两台计算机之间发送数据之前必须先建立一条连接面向连接的网络类似于电话系统在开始通信前必须先进行一次呼叫和应答传输控制协议安全套接层传输层安全性协议配置上下文自动注入的注解包含的注解这个注解用于指示一个类是一个配置类它定义了一个或多个方法用于创建和配置应用程序上下文中的这个注解用于启用的自动配置机制会根据添加的依赖自动配置你的应用例如如果你在下有会自动配置嵌入式容器如并配置这个注解的作用是将主配置类标注的类所在包以及子包里面的所有组件扫描并加载到的容器中这就是为什么在利用进行开发时无论是还是的路径都是与主配置类同级或者次级的原因分区与集群与事务隔离与并发控制模糊查询的方式使用与通配符进行模糊查询表示任意个或多个字符它可以匹配任意类型和长度的字符在某些情况下如果查询的是中文可能需要使用两个百分号来表示例如三会返回所有字段中包含三的记录表示任意单个字符它用于匹配单个任意字符表示括号内所列字符中的一个你可以指定一个字符字符串或范围要求所匹配的对象为它们中的任一个表示不在括号所列之内的单个字符它的取值和相同但它要求所匹配对象为指定字符以外的任一个字符泛型在编译时期泛型在编译时期主要起到类型检查和类型推断的作用编译器会利用泛型类型信息来保证类型安全并在生成字节码之前清除这些类型信息这种实现技术称为擦除具体来说在编译时所有的泛型类型都会被擦除成原始类型例如一个类型的变量在编译时会被擦除成类型这样做的好处是可以使泛型代码与旧的非泛型代码兼容然而擦除机制也带来了一些问题比如无法在运行时获取泛型参数的具体类型为了解决这个问题采用了泛型补偿机制编译器会自动插入一些类型转换代码通常称为桥方法以保证程序的正确性和用于删除表和数据库用于删除字段行数据用于快速删除表中的所有行而不记录每行的删除操作与不同是一个不可回滚的操作一旦执行删除的行就无法恢复基础重载和重写与在中和都是实现了接口的类它们都可以用来存储动态数组的元素尽管它们在许多方面非常相似但它们在性能同步和迭代方面存在一些重要的差异以下是关于和的一些主要区别同步性是非同步的这意味着在多线程环境中如果没有适当的同步它可能会导致并发修改异常是同步的它的每个方法都是同步的这意味着它对于多线程环境是安全的然而这种同步性也带来了性能开销性能由于的每个方法都是同步的因此在单线程环境中通常比具有更好的性能如果在多线程环境中使用则需要额外的同步措施这可能会降低性能增长因子当需要增长时它通常会增加到原来的倍大小有一个可配置的增长因子默认是增加一倍的大小可以通过的构造函数设置这个增长因子同步方法装箱拆箱基本数据类型和其对应的包装类之间进行自动转换哔哩哔哩笔试分区表问很深二叉树遍历数据库是按一定结构组织并长期存储在计算机内的可共享的大量数据的有机集合其实就是存放数据的仓库只不过这些数据存在一定的关联并按一定的格式存放在计算机上例如把一个学校的学生课程学生成绩等数据有序的组织并存放在计算机内就可以构成一个数据库数据库管理系统是管理和维护数据库的系统软件常用的有等数据库管理员管理操作数据库人员数据库系统是实现有组织的动态地存储大量关联数据方便多用户访问的计算机软件硬件和数据资源组成的系统简化为计算机系统硬件软件平台人希尔排序数据存储装置中用来表示数据所在位置的信息最常用于对硬盘的数据位置表示可以指代某个数据区块的地址可以理解为我们使用的快递地址省市区路号数据存储装置中用来表示数据实际存放的物理地址可以类似理解为物理地址的经纬度调优杭州合思面试自我介绍没有太大问题此次面试最主要的是自己底子不够牢靠记过的想不起来了而且讲的时候突出不了重点对于这次面试我提出对以下几点未来需要注意的地方不要好高骛远目前的实力离大厂真的还有很长的一段距离基础知识不牢靠无算法经验而且表达还突出不了重点不善组织语言总结一下每个项目的项目亮点和所遇到的困难再记录一下是怎么解决的并用话说出来提高表达能力说话戳重点用心准备八股到月号再开始投目前只准备准备东软的笔试面试就可以了主要还是要花时间提升自己的硬实力自我介绍说一下自己所有项目中做的最好的并说出项目难点亮点优化经验某个字段查询次数多可以使用覆盖索引减少回表操作只为那些经常出现在子句条件或子句中的列创建索引避免一些索引失效的情况用到什么锁如何评价自己如何确保资源关闭资源资源资源使用确保资源正确关闭的深入探讨使用确保资源被正确关闭博客只要资源实现了或接口就可以使用此语句它确保在语句结束时自动调用方法无论是正常完成还是异常终止以后只要实现了或的接口资源在语句中会自动关闭有没有自己部署过项目知道吗数据库表中隐私信息加密解密如何在中进行数据的加密和解密存储数据库加密和解密存储博客注册时加密保存密码登录时把输入的密码加密比对数据库里面的加密的密码是否相同默认加密器中的方法采用随机盐密钥对密码进行加密系列是算法不是加密算法使用加密算法意味着可以解密这个与编码解码一样但是采用处理其过程是不可逆的加密注册用户时使用随机盐密钥把用户输入的密码进行处理得到密码的值然后将其存入数据库中密码匹配用户登录时密码匹配阶段并没有进行密码解密因为密码经过处理是不可逆的而是使用相同的算法把用户输入的密码进行处理得到密码的值然后将其与从数据库中查询到的密码值进行比较如果两者相同说明用户输入的密码正确解释策略模式在项目中的使用团队协作经验注解的原理注解的基本原理博客园元注解是用于修饰注解的注解中有以下几个元注解注解的作用目标注解的生命周期注解是否应当被包含在文档中是否允许子类继承该注解处理编译时扫描处理如果为类型则用保存在虚拟机中反射处理实际上会生成一个代理类继承注解接口并重写所有方法所有注解的方法都是基于这个代理类做调用的泛型原理分类异常主要分类异常的捕获与抛出自定义异常获取异常类型博客的新特性新特性菜鸟教程表达式流处理方法类表达式允许把函数作为一个方法的参数函数作为参数传递到方法中方法引用方法引用提供了非常有用的语法可以直接引用已有类或对象实例的方法或构造器与联合使用方法引用可以使语言的构造更紧凑简洁减少冗余代码通常配合使用当指定方法时有参数会自动注入进去默认方法默认方法就是一个在接口里面有了一个实现的方法方法新工具新的编译工具如引擎类依赖分析器新添加的把真正的函数式编程风格引入到中日期时间加强对日期与时间的处理类类已经成为类库的一部分用来解决空指针异常类菜鸟教程类是一个容器简化了判断的操作方便避免了空指针异常引擎提供了一个新的引擎它允许我们在上运行特定的应用北京慧策笔试算法最长回文字符串最长回文子串力扣中心扩展算法字符串数组公共前缀八股文双桥委派机制好处为什么打破数组扩容为什么选择倍的扩容因子在空间利用率和性能之间找到了一个平衡点握手环节上海衍因面试优化的理解单通道和双通道的概念自我介绍项目未来规划以及网络模型如何得出一个二叉树的层数使用场景分布式地理坐标缓存穿透如何保证和的数据一致性和的不同点工厂适配器模式的使用与理解二面的区别不可变其他均可变线程安全线程不安全创建对象的方式反射构造器工厂模式字符串克隆计算两个节点的公共父节点反射是否调用了构造方法可以调用根据构造方法参数列表提供对应的参数哪些集合是线程安全的线程安全集合同步只要是关键性的操作方法前面都加了关键字来保证线程的安全性使用了关键字所以相较于是线程安全的栈也是线程安全的继承于锁分段使用锁分段技术确保线性安全是一种高效但是线程安全的集合北京京东笔试选择题数据结构与算法平衡二叉树小根堆图有向无环图完全二叉树判断时间空间复杂度平衡二叉树一种二叉搜索树在任何节点处左子树的高度与右子树的高度最多相差常见的实现有树和红黑树小根堆一种特殊的完全二叉树其中每个节点的值都小于或等于其子节点的值图有向无环图表示对象及其关系的数据结构如果是一个有向无环图则意味着图中没有任何路径可以形成一个循环完全二叉树是由满二叉树而引出来的若设二叉树的深度为除第层外其它各层的结点数都达到最大个数即层为一个满二叉树第层所有的结点都连续集中在最左边这就是完全二叉树进程的状态切换基础底层原理程序设计模板方法备忘录模式数据库关系型数据库概念计算机网络状态码状态码状态码表示请求资源未修改客户端可以继续使用缓存版本算法题动态规划字符串类型招商银行笔试桥接模式状态模式类什么时候被卸载计算地址所有的排序算法中海达面试自我介绍要你自己从校园经历两段实习经历去讲解项目索引优化数据库三大范式在项目中的使用的理解以及替代品具体的使用流程最小连接算法在项目中的实现负载均衡的理解怎么了解到我们公司的最近在看的什么书籍吗反问对我们应届生有什么建议回答考研每个流媒体服务器最多能承受多少连接服务部署了多少个集群部署的服务器配置是咋样的每个流媒体服务器所能支持的并发连接数取决于硬件性能数百个到千个都可以部署了个以上集群服务器配置代处理器美团面试指令监控资源如何设计一个用户的关注和被关注的系统设计一个用户关注和被关注的系统通常涉及到数据库的设计以及前端和后端的应用逻辑下面是一个简化版的设计思路数据库设计表结构为了实现用户之间的关注关系可以创建一个专门的表来存储这种关系这种表通常被称为关联表或链接表因为它连接了两个实体这里是两个用户表用户用户名其他字段如密码邮箱等表关注者的用户参考被关注者的用户参考创建时间这种设计允许一个用户可以关注多个其他用户并且每个用户也可以被多个用户关注后端逻辑后端主要负责处理来自前端的请求并与数据库交互关注操作当用户点击关注按钮时后端应该验证用户身份并检查用户是否已经关注了该用户如果没有则在表中插入一条记录包含当前用户和要关注的用户更新相关用户的关注者数量或被关注者数量统计取消关注操作当用户点击取消关注按钮时后端应该删除表中相应的记录更新相关用户的关注者数量或被关注者数量统计性能优化随着系统的增长简单的操作可能不足以支持大量的并发请求这时可以考虑以下一些性能优化措施使用索引对于经常查询的字段例如和应该建立索引缓存对于频繁访问的数据例如用户的关注列表可以使用缓存技术来减少数据库的压力分页当用户关注列表非常长时可以采用分页技术来减少单次查询的数据量以上就是设计一个基本的用户关注和被关注系统的概览实际开发中还需要根据项目需求和团队的技术栈来调整具体的实现细节优化通过缓存用户关注者粉丝提高性能使用优势在于可以通过时间戳排序并且两个之间可以求交集可以方便的计算两个用户之间的共同关注存储关注关系在中可以使用或数据类型来存储关注关系如果不需要排序可以简单地使用来存储一个用户关注的其他用户列表存储所关注的所有用户存储关注的所有用户如果需要按照时间戳或者其他条件排序可以使用存储关注的所有用户及其时间戳存储关注的所有用户及其时间戳缓存热点数据对于热点数据例如拥有大量关注者的用户频繁的数据库读写操作可能会成为瓶颈可以通过将这部分数据缓存起来从而减少对数据库的访问关注列表对于拥有大量粉丝的用户可以将他们的关注列表缓存到中粉丝列表对于被很多人关注的用户可以将粉丝列表缓存到中实现实时更新支持发布订阅模式可以实现实时更新关注状态当用户关注或取消关注某个用户时可以通过的发布功能将事件通知给所有监听该频道的客户端客户端监听特定频道的消息然后根据收到的消息更新本地的或者进行其他处理数据一致性虽然主要用于提高性能但是在某些情况下仍然需要保证数据的一致性可以通过以下方法来解决数据一致性问题双写在中写入数据的同时在数据库中也进行同样的写操作确保数据最终一致异步同步定期或者通过触发器将中的数据同步回数据库保证最终一致性数据持久化默认是将数据存储在内存中的为了防止数据丢失可以配置或进行持久化每个写命令都会被记录到文件中重启后可以通过重放文件来恢复数据定期创建数据快照重启后可以从最新的快照恢复数据注意事项虽然可以极大地提高系统的性能但在使用时也需要考虑以下几点内存消耗存储在内存中需要合理规划内存大小避免因内存不足导致的服务不可用数据迁移在数据量很大的情况下需要考虑如何高效地将数据从数据库迁移到中故障转移设置主从复制和哨兵机制确保在故障时能够快速切换到备用实例通过上述方法可以有效地利用提升关注系统的性能和用户体验车三百笔试不同组组奥迪奥迪款奥迪奥迪进口款奥迪进口大众途昂款四驱豪华版大众途昂款途昂四驱豪华版大众途昂款两驱舒适版大众途昂款途昂两驱舒适版宝马宝马系插电混动款宝马宝马系新能源进口款宝马系新能源进口宝马宝马款手动宝马宝马进口款宝马进口宝马宝马款宝马宝马进口款宝马进口组进口组在款之后重复款式名称组匹配完年限相同的之后再匹配近似年限的逐步保存每一节匹配的结果如果后面的不相似在对比前面的相似度米健康笔试操作系统进程调度算法寻找对端路径算法出栈方式问题协议组包括哪些协议负责数据包的路由选择提供可靠的端到端的数据传输提供无连接的数据报服务用于发送错误消息和相关信息用于文件传输用于电子邮件的传输将域名转换为地址虚拟存储器虚拟存储器是一种计算机存储管理技术它允许程序访问比实际物理内存更大的地址空间虚拟存储器通过将内存和磁盘空间结合起来使用使得操作系统能够管理比实际更多的数据当程序尝试访问不在物理内存中的数据时操作系统会自动将所需的数据从磁盘加载到内存中并可能将其他较少使用的数据移回磁盘这个过程称为页面交换前序遍历推出可能的后序遍历腾讯云智笔试垃圾回收的使用自适应前序遍历核心态数据交换计算是什么计算某个文件单词个数的指令插入排序在进程中的概念算法最大异或值分苹果每相邻俩人苹果个数不超过保障第个人的苹果最多找出连续的字符串个数包括但是不包括腾讯云智面试数据结构与算法在有向图中判断是否有环操作系统内核态和用户态虚拟内存计网拥塞控制微服务原理如何理解微服务注册中心如何工作原理与区别间隙锁和记录锁总结各个日志线程安全问题安克创新面试一面和的区别的理解工具包同步器原子类线程池并发集合英语是否重要和协议的区别为什么要自定义和的区别面试面核心问题分类三面考察了对行业的认知对个人未来计划的规划以及对公司文化的认知大约分钟主要问了项目校园经历比赛之类的经历以及团队合作相关的问题高频行为题跨岗位通用项目经历项目中的意见分歧及解决方式团队协作中的挫折成就经历与甲方对接的经验自我认知性格优缺点身边人对你的评价最感激的三件事个人背景与稳定性家庭情况如居住地父母态度职业规划与岗位匹配度是否了解公司及行业知识正常的面要准备的话就去了解一下公司就行可能会问你对公司的了解安克创新科技股份有限公司成立于年是国内营收规模最大的全球化消费电子品牌企业之一专注于智能配件和智能硬件的设计研发和销售企业业务从线上起步主要销售渠道为天猫京东等海内外线上平台在亚马逊等境外大型电商平台上占据领先的行业市场份额拥有很高的知名度和美誉度同时在北美欧洲日本和中东等发达国家和地区通过与沃尔玛百思买以及贸易商合作线下收入增长快速了解公司的业务看中的品质第一性求极致消费电子出海独角兽充电宝耳机清洁安防第一性看问题从问题的本质出发把大问题拆分为不可再分的原子问题更快定位问题从更客观的角度看问题通信速率慢如何解决求极致不局限于把事情完成而更想把事情做好浙大实习期间负责的项目用心负责主动个人优势认可且具备的价值观第一性原理求极致我是一个真正热爱创新的开发者喜欢接触尝试新的东西在校期间自主搭建了湖科大宠物身份证平台学习我是一个积极上进的人我具备较丰富的项目实习经验具备较好的团队协作经验我本是电子信息类专业分支安克也是一家消费电子企业熟悉开发的同时有电子信息专业基础你为什么想加入我们公司在我很小的时候受家庭影响立志要闯出自己的一番事业这对于我个人的一个择业规划就很注重企业平台和发展性然后我了解到安克是一个赋能创造者平台的企业并且我通过在安克实习的同学了解到安克同时是一家机会多伙伴好氛围好的高效率运转的企业借助这个平台能学到自我提升方法论的同时可以在奋斗创新中实现我的个人价值和人生目标了解过安克创新吗考你对是否用心了解公司借此可以谈谈自己对公司业务需要的人才品质价值观来回答好这个问题第一次关注到安克是因为特朗普的一次直播中看到他用了咱安克的充电宝妥妥总统臻选啊后面我就感兴趣去深入了解了一下咱安克发现安克是一家消费电子出海的独角兽企业宏观上安克敏锐洞察市内缺口聚焦海外市场微观上从第一性原理出发抛开表面事实找到问题突破的关键不断优化产品在这样的一个与行业风向的竞赛中安克年营收高达百亿这样的耀眼的成绩我觉得还有一部分原因在于安克的自我使命极致创新激发可能这个是和第一性原理紧耦合的第一性原理是发现一个不同于大众的赛道而求极致是在这一条陌生的赛道笃志前行你的未来职业规划希望通过询问职业规划来评估你的职业目标是否与公司的发展方向一致以及你是否具备足够的潜力和稳定性长期为公司贡献先夸公司首先安克是一家追逐时代风向的领头羊再说匹配未来安克将聚焦于行业热门技术像多模态感知和决策家用智能的边缘计算系统这些都是我个人很感兴趣的方向并且我也在持续关注和学习目前行业新技术进阶路线年内快速积累个人的专业知识和业务技能成为开发的行业专家年我想从螺丝钉成长为独当一面的架构师在公司产品线担任重要角色这样的责任感会激励我把我求极致的精神运用在这份事业中实现个人的人生理想的同时给咱安克交出一份满意的答卷先夸下公司和职位展示自己未来的发展路线和这个职位很匹配比如可以说贵公司规模很大或者贵公司在这个行业的项目很有吸引力或者说这个职位和我未来的发展规划很匹配然后可以说我在未来的到年内打算在领域进一步发展着重积累方面的经验和技术上文提到的领域和技术都需要和这个职位想匹配其实面试官自己都知道哪怕是大公司能留住求职者年就已经很不错了小公司的话估计年就跳槽但话得这样说证明自己愿意干长久然后说下自己的技术或经验的进阶路线比如可以说如果有幸得到这个工作机会我打算进一步学习技术让自己更加资深同时我将进一步学习和实践和这个职位有关的技术总之让自己更加适合这个工作再进一步说明自己和这个职位的匹配程度相比于其他人你的优势在哪里具备丰富的实习项目团队协作经验认可且具备的价值观第一性原理求极致第一性看问题从问题的本质出发把大问题拆分为不可再分的原子问题更快定位原因从更客观的角度看问题通信速率慢如何解决求极致不局限于把事情完成而更想把事情做好浙大实习期间负责的项目我主动对接甲方需求我是一个有想法真正热爱创新的开发者喜欢接触尝试新的东西在校期间自主搭建了湖科大宠物身份证平台学习你是如何学习新知识的项目中是否和其他同学有意见不一然后如何解决的一些问题尊重他人的意见积极沟通用数据和事实说话在之前的项目中确实遇到过和其他同学意见不一的情况有一次我们在做一个校园活动策划项目对于活动的宣传方式我主张利用线上社交媒体进行广泛传播制作有趣的短视频和互动话题来吸引同学们的关注而另一位同学则认为应该以线下张贴海报和发放传单为主他觉得这样能直接触达目标群体当发现我们的意见不一致时我首先做的是冷静下来避免情绪化的争论然后我主动找了个时间和他坐下来好好沟通我先让他详细阐述他选择线下方式的理由他也提到了线下宣传的直接性和覆盖面广等优点接着我也阐述了我对于线上宣传的想法包括线上宣传的可扩展性成本效益以及能够精准定位目标受众等优势之后我们一起收集了之前类似活动的宣传数据发现线上宣传在吸引年轻群体方面确实有很好的效果但线下宣传在提高活动知名度方面也有不可替代的作用于是我们决定将两种方式结合起来重新规划了宣传预算和资源分配让线上和线下宣传相互补充在这个过程中我觉得尊重他人的意见积极沟通用数据和事实说话是很重要的这样才能有效地解决意见不一的问题达成团队共识然后问了情况具说情况表达安克的好我本人已有个如果能拿到安克的机会我将会给他们都拒掉这个时候去讨论安克的一个优点在我很小的时候受家庭影响立志要闯出自己的一番事业这对于我个人的择业规划就很注重企业平台和发展性我了解到安克是一个赋能创造者平台的企业并且我通过在安克实习的同学了解到安克同时是一家机会多伙伴好氛围好的高效率运转的企业借助这个平台能学到自我提升方法论的同时可以在奋斗创新中实现我的个人价值和人生目标而且我很希望来深圳这个城市我父母也在这边期望薪资多少我了解到该岗位在深圳的薪资范围是结合我的实习经历和技能储备还有目前的薪资水平希望能争取到当然我也很看重贵司的发展平台和学习机会微派网络项目遇到的难点印象最深的线上事故如何解决难点浙大淋巴医疗检查系统平台基于实现可是无法满足项目中高性能串口通信的要求这是从技术底层的否定平台计网五层模型作用应用层传输层网络层数据链路层物理层数据库三大范式事务如何实现三大范式原子性唯一性非主键字段必须完全依赖主键独立性消除传递依赖消息队列的存储实现消息如何保障可靠性相似度计算公式余弦相似度结果区间取值越趋近为向量方向越相似的缺陷和优化策略场景题设计一个微信好友系统从流程触发每个点去思考算法数据结构算法数据结构的区别返回指定数组倒数第大的数手撕个一组反转链表',
  isPost: true,
  isHome: false,
  isHighlightShrink: false,
  isToc: true,
  postUpdate: '2025-07-27 23:11:23',
  postMainColor: '',
}</script><noscript><style type="text/css">
  #nav {
    opacity: 1
  }
  .justified-gallery img {
    opacity: 1
  }

  #recent-posts time,
  #post-meta time {
    display: inline !important
  }
</style></noscript><script>(win=>{
      win.saveToLocal = {
        set: (key, value, ttl) => {
          if (ttl === 0) return
          const now = Date.now()
          const expiry = now + ttl * 86400000
          const item = {
            value,
            expiry
          }
          localStorage.setItem(key, JSON.stringify(item))
        },
      
        get: key => {
          const itemStr = localStorage.getItem(key)
      
          if (!itemStr) {
            return undefined
          }
          const item = JSON.parse(itemStr)
          const now = Date.now()
      
          if (now > item.expiry) {
            localStorage.removeItem(key)
            return undefined
          }
          return item.value
        }
      }
    
      win.getScript = (url, attr = {}) => new Promise((resolve, reject) => {
        const script = document.createElement('script')
        script.src = url
        script.async = true
        script.onerror = reject
        script.onload = script.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          script.onload = script.onreadystatechange = null
          resolve()
        }

        Object.keys(attr).forEach(key => {
          script.setAttribute(key, attr[key])
        })

        document.head.appendChild(script)
      })
    
      win.getCSS = (url, id = false) => new Promise((resolve, reject) => {
        const link = document.createElement('link')
        link.rel = 'stylesheet'
        link.href = url
        if (id) link.id = id
        link.onerror = reject
        link.onload = link.onreadystatechange = function() {
          const loadState = this.readyState
          if (loadState && loadState !== 'loaded' && loadState !== 'complete') return
          link.onload = link.onreadystatechange = null
          resolve()
        }
        document.head.appendChild(link)
      })
    
      win.activateDarkMode = () => {
        document.documentElement.setAttribute('data-theme', 'dark')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#18171d')
        }
      }
      win.activateLightMode = () => {
        document.documentElement.setAttribute('data-theme', 'light')
        if (document.querySelector('meta[name="theme-color"]') !== null) {
          document.querySelector('meta[name="theme-color"]').setAttribute('content', '#f7f9fe')
        }
      }
      const t = saveToLocal.get('theme')
    
          const isDarkMode = window.matchMedia('(prefers-color-scheme: dark)').matches
          const isLightMode = window.matchMedia('(prefers-color-scheme: light)').matches
          const isNotSpecified = window.matchMedia('(prefers-color-scheme: no-preference)').matches
          const hasNoSupport = !isDarkMode && !isLightMode && !isNotSpecified

          if (t === undefined) {
            if (isLightMode) activateLightMode()
            else if (isDarkMode) activateDarkMode()
            else if (isNotSpecified || hasNoSupport) {
              const now = new Date()
              const hour = now.getHours()
              const isNight = hour <= 6 || hour >= 18
              isNight ? activateDarkMode() : activateLightMode()
            }
            window.matchMedia('(prefers-color-scheme: dark)').addListener(e => {
              if (saveToLocal.get('theme') === undefined) {
                e.matches ? activateDarkMode() : activateLightMode()
              }
            })
          } else if (t === 'light') activateLightMode()
          else activateDarkMode()
        
      const asideStatus = saveToLocal.get('aside-status')
      if (asideStatus !== undefined) {
        if (asideStatus === 'hide') {
          document.documentElement.classList.add('hide-aside')
        } else {
          document.documentElement.classList.remove('hide-aside')
        }
      }
    
      const detectApple = () => {
        if(/iPad|iPhone|iPod|Macintosh/.test(navigator.userAgent)){
          document.documentElement.classList.add('apple')
        }
      }
      detectApple()
    })(window)</script><meta name="generator" content="Hexo 7.3.0"></head><body data-type="anzhiyu"><div id="web_bg"></div><div id="an_music_bg"></div><div id="loading-box" onclick="document.getElementById(&quot;loading-box&quot;).classList.add(&quot;loaded&quot;)"><div class="loading-bg"><img class="loading-img nolazyload" alt="加载头像" src="https://npm.elemecdn.com/anzhiyu-blog-static@1.0.4/img/avatar.jpg"/><div class="loading-image-dot"></div></div></div><script>const preloader = {
  endLoading: () => {
    document.getElementById('loading-box').classList.add("loaded");
  },
  initLoading: () => {
    document.getElementById('loading-box').classList.remove("loaded")
  }
}
window.addEventListener('load',()=> { preloader.endLoading() })
setTimeout(function(){preloader.endLoading();},10000)

if (true) {
  document.addEventListener('pjax:send', () => { preloader.initLoading() })
  document.addEventListener('pjax:complete', () => { preloader.endLoading() })
}</script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.10/progress_bar/progress_bar.css"/><script async="async" src="https://cdn.cbd.int/pace-js@1.2.4/pace.min.js" data-pace-options="{ &quot;restartOnRequestAfter&quot;:false,&quot;eventLag&quot;:false}"></script><div class="post" id="body-wrap"><header class="post-bg" id="page-header"><nav id="nav"><div id="nav-group"><span id="blog_name"><a id="site-name" href="/" accesskey="h"><div class="title">FANSEA</div><i class="anzhiyufont anzhiyu-icon-house-chimney"></i></a></span><div class="mask-name-container"><div id="name-container"><a id="page-name" href="javascript:anzhiyu.scrollToDest(0, 500)">PAGE_NAME</a></div></div><div id="menus"><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/fcircle/"><i class="anzhiyufont anzhiyu-icon-artstation faa-tada" style="font-size: 0.9em;"></i><span> 朋友圈</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div></div></div><div id="nav-right"><div class="nav-button" id="randomPost_button"><a class="site-page" onclick="toRandomPost()" title="随机前往一个文章" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-dice"></i></a></div><input id="center-console" type="checkbox"/><label class="widget" for="center-console" title="中控台" onclick="anzhiyu.switchConsole();"><i class="left"></i><i class="widget center"></i><i class="widget right"></i></label><div id="console"><div class="console-card-group-reward"><ul class="reward-all console-card"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" alt="微信" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" alt="支付宝" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png"/></a><div class="post-qr-code-desc">支付宝</div></li></ul></div><div class="console-card-group"><div class="console-card-group-left"><div class="console-card" id="card-newest-comments"><div class="card-content"><div class="author-content-item-tips">互动</div><span class="author-content-item-title"> 最新评论</span></div><div class="aside-list"><span>正在加载中...</span></div></div></div><div class="console-card-group-right"><div class="console-card tags"><div class="card-content"><div class="author-content-item-tips">兴趣点</div><span class="author-content-item-title">寻找你感兴趣的领域</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/AI/" style="font-size: 1.05rem;">AI<sup>1</sup></a><a href="/tags/MQ/" style="font-size: 1.05rem;">MQ<sup>1</sup></a><a href="/tags/NoSQL/" style="font-size: 1.05rem;">NoSQL<sup>2</sup></a><a href="/tags/ROS/" style="font-size: 1.05rem;">ROS<sup>1</sup></a><a href="/tags/cursor-%E5%89%8D%E7%AB%AF/" style="font-size: 1.05rem;">cursor 前端<sup>1</sup></a><a href="/tags/docker-%E5%BE%AE%E6%9C%8D%E5%8A%A1/" style="font-size: 1.05rem;">docker 微服务<sup>1</sup></a><a href="/tags/java/" style="font-size: 1.05rem;">java<sup>8</sup></a><a href="/tags/rag-%E6%99%BA%E8%83%BD%E5%AE%A2%E6%9C%8D-SpringAI-%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/" style="font-size: 1.05rem;">rag 智能客服 SpringAI 毕业设计<sup>1</sup></a><a href="/tags/vue/" style="font-size: 1.05rem;">vue<sup>1</sup></a><a href="/tags/%E5%88%9B%E4%B8%9A/" style="font-size: 1.05rem;">创业<sup>1</sup></a><a href="/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/" style="font-size: 1.05rem;">微服务<sup>4</sup></a><a href="/tags/%E6%80%9D%E8%80%83/" style="font-size: 1.05rem;">思考<sup>10</sup></a><a href="/tags/%E6%8A%80%E6%9C%AF/" style="font-size: 1.05rem;">技术<sup>1</sup></a><a href="/tags/%E6%8A%80%E6%9C%AF%E6%BC%AB%E8%B0%88/" style="font-size: 1.05rem;">技术漫谈<sup>21</sup></a><a href="/tags/%E6%91%84%E5%BD%B1/" style="font-size: 1.05rem;">摄影<sup>1</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" style="font-size: 1.05rem;">数据库<sup>6</sup></a><a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 1.05rem;">算法<sup>7</sup></a><a href="/tags/%E7%BC%96%E7%A8%8B%E5%B7%A5%E5%85%B7-JMeter/" style="font-size: 1.05rem;">编程工具 JMeter<sup>1</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/" style="font-size: 1.05rem;">计算机基础<sup>4</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%8E%A7%E5%88%B6/" style="font-size: 1.05rem;">计算机控制<sup>1</sup></a><a href="/tags/%E8%BD%A6%E8%BD%A6/" style="font-size: 1.05rem;">车车<sup>1</sup></a><a href="/tags/%E9%87%91%E8%9E%8D/" style="font-size: 1.05rem;">金融<sup>2</sup></a><a href="/tags/%E9%A1%B9%E7%9B%AE/" style="font-size: 1.05rem;">项目<sup>11</sup></a></div></div><hr/></div></div><div class="console-card history"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-box-archiv"></i><span>文章</span></div><div class="card-archives"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-archive"></i><span>归档</span><a class="card-more-btn" href="/archives/" title="查看更多">
    <i class="anzhiyufont anzhiyu-icon-angle-right"></i></a></div><ul class="card-archive-list"><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/05/"><span class="card-archive-list-date">五月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/04/"><span class="card-archive-list-date">四月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">3</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/03/"><span class="card-archive-list-date">三月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2025/02/"><span class="card-archive-list-date">二月 2025</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/12/"><span class="card-archive-list-date">十二月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">2</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/11/"><span class="card-archive-list-date">十一月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">1</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/09/"><span class="card-archive-list-date">九月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">5</span><span>篇</span></div></a></li><li class="card-archive-list-item"><a class="card-archive-list-link" href="/archives/2024/08/"><span class="card-archive-list-date">八月 2024</span><div class="card-archive-list-count-group"><span class="card-archive-list-count">7</span><span>篇</span></div></a></li></ul></div><hr/></div></div></div><div class="button-group"><div class="console-btn-item"><a class="darkmode_switchbutton" title="显示模式切换" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-moon"></i></a></div><div class="console-btn-item" id="consoleHideAside" onclick="anzhiyu.hideAsideBtn()" title="边栏显示控制"><a class="asideSwitch"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></a></div><div class="console-btn-item" id="consoleMusic" onclick="anzhiyu.musicToggle()" title="音乐开关"><a class="music-switch"><i class="anzhiyufont anzhiyu-icon-music"></i></a></div></div><div class="console-mask" onclick="anzhiyu.hideConsole()" href="javascript:void(0);"></div></div><div class="nav-button" id="nav-totop"><a class="totopbtn" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i><span id="percent" onclick="anzhiyu.scrollToDest(0,500)">0</span></a></div><div id="toggle-menu"><a class="site-page" href="javascript:void(0);" title="切换"><i class="anzhiyufont anzhiyu-icon-bars"></i></a></div></div></div></nav><div id="post-info"><div id="post-firstinfo"><div class="meta-firstline"><a class="post-meta-original">原创</a><span class="article-meta tags"><a class="article-meta__tags" href="/tags/%E9%9D%A2%E8%AF%95/" tabindex="-1" itemprop="url"> <span> <i class="anzhiyufont anzhiyu-icon-hashtag"></i>面试</span></a></span></div></div><h1 class="post-title" itemprop="name headline">面试经验</h1><div id="post-meta"><div class="meta-firstline"><span class="post-meta-date"><i class="anzhiyufont anzhiyu-icon-calendar-days post-meta-icon"></i><span class="post-meta-label">发表于</span><time class="post-meta-date-created" itemprop="dateCreated datePublished" datetime="2024-03-15T11:45:08.000Z" title="发表于 2024-03-15 19:45:08">2024-03-15</time><span class="post-meta-separator"></span><i class="anzhiyufont anzhiyu-icon-history post-meta-icon"></i><span class="post-meta-label">更新于</span><time class="post-meta-date-updated" itemprop="dateCreated datePublished" datetime="2025-07-27T15:11:23.182Z" title="更新于 2025-07-27 23:11:23">2025-07-27</time></span></div><div class="meta-secondline"><span class="post-meta-separator">       </span><span class="post-meta-position" title="作者IP属地为湘潭"><i class="anzhiyufont anzhiyu-icon-location-dot"></i>湘潭</span></div></div></div><section class="main-hero-waves-area waves-area"><svg class="waves-svg" xmlns="http://www.w3.org/2000/svg" xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M -160 44 c 30 0 58 -18 88 -18 s 58 18 88 18 s 58 -18 88 -18 s 58 18 88 18 v 44 h -352 Z"></path></defs><g class="parallax"><use href="#gentle-wave" x="48" y="0"></use><use href="#gentle-wave" x="48" y="3"></use><use href="#gentle-wave" x="48" y="5"></use><use href="#gentle-wave" x="48" y="7"></use></g></svg></section><div id="post-top-cover"><img class="nolazyload" id="post-top-bg" src=""></div></header><main id="blog-container"><div class="layout" id="content-inner"><div id="post"><article class="post-content" id="article-container" itemscope itemtype="https://fansea0.github.io/2024/03/15/%E9%9D%A2%E8%AF%95%E7%BB%8F%E9%AA%8C/"><header><a href="/tags/%E9%9D%A2%E8%AF%95/" tabindex="-1" itemprop="url">面试</a><h1 id="CrawlerTitle" itemprop="name headline">面试经验</h1><span itemprop="author" itemscope itemtype="http://schema.org/Person">FANSEA</span><time itemprop="dateCreated datePublished" datetime="2024-03-15T11:45:08.000Z" title="发表于 2024-03-15 19:45:08">2024-03-15</time><time itemprop="dateCreated datePublished" datetime="2025-07-27T15:11:23.182Z" title="更新于 2025-07-27 23:11:23">2025-07-27</time></header><h1 id="面试经验"><a href="#面试经验" class="headerlink" title="面试经验"></a>面试经验</h1><h2 id="非技术问题问答"><a href="#非技术问题问答" class="headerlink" title="非技术问题问答"></a>非技术问题问答</h2><h3 id="自我介绍"><a href="#自我介绍" class="headerlink" title="自我介绍"></a><strong>自我介绍</strong></h3><p>【面带笑容、自信介绍】</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">面试官你好，我是湖南科技大学25届达钦海，将从实习经历、校园经历以及个人优势三个方面来介绍一下我自己。</span><br><span class="line"></span><br><span class="line">在去年这个时候，我有幸在浙江大学湖州研究院和上海衍因科技公司实习。在浙大实习期间我负责了浙大淋巴医疗检测项目的研发工作，从架构设计、数据库设计到核心功能实现，完成了项目的0到1的搭建运行，项目中遇难克难的历程中，我收获了很多，增进了对程序设计的理解</span><br><span class="line"></span><br><span class="line">随后，在上海衍因科技公司，参与到公司专业的Scrum团队开发流程，学习了SaaS系统设计的主流方案，以及自上而下的微服务分层架构</span><br><span class="line">在功能开发方面，我主要完成了项目文件回收站、兑换码功能的设计与研发</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">在校期间，我担任了学习委员、电子俱乐部外联部干事，并在湖南科技大学网络信息中心实习，担任负责人，负责团队管理。我们团队是负责湖南科技大学信息化建设的团队，在任职期间，完成了校内信息化项目资安学工的研发，团队取得了三项软件著作权，并有多名成员进入国内外知名企业。这些经历使我提升了个人专业技能，积累了丰富的团队协作经验，提升了组织管理、表达和人际交往能力。</span><br></pre></td></tr></table></figure>

<p><strong>我认为我的个人优势在于：</strong></p>
<ul>
<li>具备丰富的实习、项目、团队协作经验</li>
<li>具备两大的价值观：第一性原理、求极致<ul>
<li><strong>第一性：</strong>看问题从问题的本质出发，把大问题拆分为不可再分的原子问题，更快定位原因，从更客观的角度看问题( 通信速率慢如何解决？ )</li>
<li><strong>求极致：</strong>不局限于把事情完成，而更想把事情做好(浙大实习期间负责的项目：我主动对接甲方需求、)</li>
</ul>
</li>
<li>我是一个有想法、真正<strong>热爱创新</strong>的开发者，喜欢接触、尝试新的东西（在校期间自主搭建了湖科大宠物身份证平台、学习AI）</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">感想你的聆听，我的自我介绍完毕！</span><br></pre></td></tr></table></figure>

<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">面试官你好，我是湖南科技大学25届达钦海，将从实习经历、校园经历以及个人优势三个方面来介绍一下我自己。</span><br><span class="line"></span><br><span class="line">在去年这个时候，我有幸在浙江大学湖州研究院和上海衍因科技公司实习。在浙大实习期间我负责了浙大淋巴医疗检测项目的研发工作，从架构设计、数据库设计到核心功能实现，完成了项目的0到1的搭建运行，项目中遇难克难的历程中，我收获了很多，增进了对程序设计的理解</span><br><span class="line"></span><br><span class="line">随后，在上海衍因科技公司，参与到公司专业的Scrum团队开发流程，学习了SaaS系统设计的主流方案，以及自上而下的微服务开发的架构</span><br><span class="line">实现新功能短周期快速迭代，并负责TMS管理模块的重构，项目文件回收站、兑换码功能、SaaS租户订阅系统设计与研发</span><br><span class="line"></span><br><span class="line">在校期间，我担任了学习委员、电子俱乐部外联部干事，并在湖南科技大学网络信息中心实习，担任负责人，负责团队管理。我们团队是负责湖南科技大学信息化建设的团队，在任职期间，完成了校内信息化项目资安学工的研发，团队取得了三项软件著作权，并有多名成员进入国内外知名企业。这些经历使我提升了个人专业技能，积累了丰富的团队协作经验，提升了组织管理、表达和人际交往能力。</span><br></pre></td></tr></table></figure>



<h3 id="阐述项目中问题"><a href="#阐述项目中问题" class="headerlink" title="阐述项目中问题"></a>阐述项目中问题</h3><p>背景-根本原因-影响-方案 <code>STAR</code> </p>
<h2 id="软技能提问"><a href="#软技能提问" class="headerlink" title="软技能提问"></a>软技能提问</h2><h3 id="亮点-解决问题"><a href="#亮点-解决问题" class="headerlink" title="亮点&#x2F;解决问题"></a>亮点&#x2F;解决问题</h3><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="../image/IMG_20250415_224337.jpg" alt="IMG_20250415_224337"  />



<p>第一性原理：</p>
<p>解决问题、 不同角度看事情、创新</p>
<h3 id="压力"><a href="#压力" class="headerlink" title="压力"></a>压力</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../image/IMG_20250415_224327.jpg" alt="IMG_20250415_224327"></p>
<h3 id="经验-教训"><a href="#经验-教训" class="headerlink" title="经验&#x2F;教训"></a>经验&#x2F;教训</h3><ul>
<li>核心功能：关注扩展性、健壮性</li>
<li>非核心功能：关注可用性</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../image/IMG_20250415_224346.jpg" alt="IMG_20250415_224346"></p>
<h3 id="团队"><a href="#团队" class="headerlink" title="团队"></a>团队</h3><h4 id="个人角色"><a href="#个人角色" class="headerlink" title="个人角色"></a>个人角色</h4><p>贝尔宾团队角色：<strong>思考型、社交型、</strong>行动型</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">点子很多，有想法。热爱社交，打通和成员的关系</span><br></pre></td></tr></table></figure>

<h3 id="协作经验"><a href="#协作经验" class="headerlink" title="协作经验"></a>协作经验</h3><p>团队协作问题多源于成员之间信息不对等。我认为，协作中<strong>沟通至关重要</strong>。发现问题要主动及时沟通，莫因面子或不好意思让问题搁置，否则阻碍项目进展、影响上下游。</p>
<p>提问要有针对性与技巧别一有问题就问，先自行尝试解决，但别死磕。把问题收集起来再问，避免打扰他人工作。提问时交代问题背景、已做尝试及结果，让同事更好理解，也能加快问题解决。</p>
<ul>
<li><p>发现问题，及时沟通（减少因为信息差导致的返工）</p>
</li>
<li><p>先<strong>自主探索</strong>，避免死磕，及时止损</p>
</li>
<li><p>提问“三大要素”：<strong>背景、尝试、结果</strong></p>
<blockquote>
<p>帮助对方快速定位问题，避免重复尝试无效方法</p>
</blockquote>
</li>
</ul>
<h3 id="常问问题"><a href="#常问问题" class="headerlink" title="常问问题"></a>常问问题</h3><ul>
<li><strong>你为什么想加入我们公司</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">在我很小的时候受家庭影响立志要闯出自己的一番事业，这对于我个人的一个择业规划就很注重企业平台和发展性。</span><br><span class="line"></span><br><span class="line">然后我了解到安克是一个赋能创造者平台，并且我通过在安克实习的同学了解到安克同时是一家机会多、伙伴好、氛围好的高效率运转的企业，借助这个平台能学到自我提升方法论的同时，可以在奋斗创新中实现我的个人价值和人生目标</span><br></pre></td></tr></table></figure>



<ul>
<li><strong>了解过安克创新吗</strong>（考你对是否用心了解公司，借此可以谈谈自己对公司业务、需要的人才品质、价值观来回答好这个问题）</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">第一次关注到安克是因为特朗普的一次直播中看到他用了咱安克的充电宝，妥妥总统臻选啊，后面我就感兴趣去深入了解了一下咱安克，发现安克是一家消费电子出海的独角兽企业，宏观上：安克敏锐洞察市内缺口，聚焦海外市场；微观上：从第一性原理出发，抛开表面事实，找到问题突破的关键，不断优化产品，就是在这样的一个与行业风向的竞赛中，安克年营收高达百亿。这样的耀眼的成绩我觉得还有一部分原因在于安克的自我使命：极致创新 激发可能。这个是和第一性原理紧耦合的，第一性原理是发现一个不同于大众的赛道，而求极致是在这一条陌生的赛道笃志前行。</span><br></pre></td></tr></table></figure>



<ul>
<li><strong>你的未来职业规划</strong>（HR希望通过询问职业规划来评估你的<strong>职业目标是否与公司的发展方向一致</strong>，以及你是否具备足够的<strong>潜力</strong>和<strong>稳定性</strong>长期为公司贡献。）<ul>
<li>职业规划概括为以下三点：<strong>夯实技术基础、担任重要角色、保持长期主义</strong><ul>
<li>3年内快速积累个人的专业知识、和业务技能，成为Java开发的行业专家</li>
<li>3-5年我想从螺丝钉成长为独当一面的架构师，在公司产品线担任重要角色<ul>
<li>这样的责任感会激励我把追求极致的精神运用在这份事业中，实现人生理想的同时，给咱安克交出一份满意的答卷</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<blockquote>
<p><strong>先夸下公司和职位，展示自己未来的发展路线和这个职位很匹配。</strong></p>
<p>比如可以说，贵公司规模很大，或者贵公司在这个行业的项目很有吸引力，或者说，这个职位和我未来的发展规划很匹配。然后可以说，我在未来的3到5年内，打算在xx领域进一步发展，着重积累xx方面的经验和技术。</p>
<p>上文提到的领域和技术，都需要和这个职位想匹配。其实面试官自己都知道，哪怕是大公司，能留住求职者3年就已经很不错了，小公司的话估计1，2年就跳槽。但话得这样说，证明自己愿意干长久。</p>
<p><strong>2 然后说下自己的技术或经验的进阶路线。</strong></p>
<p>比如可以说，如果有幸得到这个工作机会，我打算进一步学习xx技术，让自己更加资深，同时，我将进一步学习和实践和这个职位有关的xx技术，总之让自己更加适合这个工作。</p>
<p><strong>3 再进一步说明自己和这个职位的匹配程度</strong></p>
</blockquote>
<ul>
<li><p><strong>相比于其他人，你的优势在哪里</strong></p>
<ul>
<li>具备丰富的实习、项目、团队协作经验</li>
<li>认可且具备<code>Anker</code>的价值观：第一性原理、求极致<ul>
<li><strong>第一性：</strong>看问题从问题的本质出发，把大问题拆分为不可再分的原子问题，更快定位原因，从更客观的角度看问题( 通信速率慢如何解决？ )</li>
<li><strong>求极致：</strong>不局限于把事情完成，而更想把事情做好(浙大实习期间负责的项目：我主动对接甲方需求、)</li>
</ul>
</li>
<li>我是一个有想法、真正<strong>热爱创新</strong>的开发者，喜欢接触、尝试新的东西（在校期间自主搭建了湖科大宠物身份证平台、学习AI）</li>
</ul>
</li>
<li><p><strong>你是如何学习新知识的</strong></p>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../image/image-20250421212320019.png" alt="image-20250421212320019"></p>
<ul>
<li><strong>项目中是否和其他同学有意见不一然后如何解决的一些问题</strong></li>
</ul>
<blockquote>
<p>尊重他人的<strong>意见、积极沟通、用数据和事实</strong>说话</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">在之前的项目中确实遇到过和其他同学意见不一的情况。</span><br><span class="line"></span><br><span class="line">有一次我们在做一个校园活动策划项目，对于活动的宣传方式，我主张利用线上社交媒体进行广泛传播，制作有趣的短视频和互动话题来吸引同学们的关注。而另一位同学则认为应该以线下张贴海报和发放传单为主，他觉得这样能直接触达目标群体。</span><br><span class="line"></span><br><span class="line">当发现我们的意见不一致时，我首先做的是冷静下来，避免情绪化的争论。然后我主动找了个时间，和他坐下来好好沟通。我先让他详细阐述他选择线下方式的理由，他也提到了线下宣传的直接性和覆盖面广等优点。接着我也阐述了我对于线上宣传的想法，包括线上宣传的可扩展性、成本效益以及能够精准定位目标受众等优势。</span><br><span class="line"></span><br><span class="line">之后，我们一起收集了之前类似活动的宣传数据，发现线上宣传在吸引年轻群体方面确实有很好的效果，但线下宣传在提高活动知名度方面也有不可替代的作用。于是我们决定将两种方式结合起来，重新规划了宣传预算和资源分配，让线上和线下宣传相互补充。</span><br><span class="line"></span><br><span class="line">在这个过程中，我觉得尊重他人的意见、积极沟通、用数据和事实说话是很重要的，这样才能有效地解决意见不一的问题，达成团队共识。</span><br></pre></td></tr></table></figure>



<ul>
<li><strong>然后问了offer情况</strong>（具说情况+表达安克的好）</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">我本人已有7个offer，如果能拿到安克的机会，我将会给他们都释放掉（这个时候去讨论安克的一个优点）</span><br><span class="line"></span><br><span class="line">在我很小的时候受家庭影响立志要闯出自己的一番事业，这对于我个人的择业规划就很注重企业平台和发展性。我了解到安克是一个赋能创造者平台的企业，并且我通过在安克实习的同学了解到安克同时是一家机会多、伙伴好、氛围好的高效率运转的企业，借助这个平台能学到自我提升方法论的同时，可以在奋斗创新中实现我的个人价值和人生目标</span><br><span class="line"></span><br><span class="line">而且我很希望来深圳这个城市，我父母也在这边</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>期望薪资多少</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">“我了解到该岗位在深圳的薪资范围是15-22k。结合我的 实习经历 和 技能储备 还有目前offer的薪资水平，希望能争取到17k。当然，我也很看重贵司的发展平台和学习机会。”</span><br></pre></td></tr></table></figure>

<h2 id="项目技术栈复习"><a href="#项目技术栈复习" class="headerlink" title="项目技术栈复习"></a>项目技术栈复习</h2><h3 id="为什么用MySQL而不是其他数据库保存截面数据"><a href="#为什么用MySQL而不是其他数据库保存截面数据" class="headerlink" title="为什么用MySQL而不是其他数据库保存截面数据"></a>为什么用MySQL而不是其他数据库保存截面数据</h3><p>MySQL通过记录ID来建立索引快速搜索</p>
<ul>
<li>其实项目中数据采集频率快数据量大，对时序性要求高，很适合用influxDB这样的时序数据库</li>
<li>因为不管使用什么数据库，其保存的数据都是一样的，我在项目中定义了一个策略模式行为接口实现了用MySQL进行数据的保存方法，未来可以直接在此基础上定义新的策略实现已经定义好的策略接口，更方便去实现influxDB的扩展</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">DataHandler</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">saveData</span><span class="params">()</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">MySQL</span> <span class="keyword">implements</span> <span class="title class_">DataHandler</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">saveData</span><span class="params">()</span> &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="工厂-策略模式"><a href="#工厂-策略模式" class="headerlink" title="工厂+策略模式"></a>工厂+策略模式</h3><p><code>why + how + what</code></p>
<img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="../image/IMG_20250316_111232.jpg" alt="IMG_20250316_111232" style="zoom: 25%;" />

<blockquote>
<p>获取光栅数据有两种方案：上报、轮询。他们分别都有优缺点，适应不同的场景，医生通过选项来指定对应的模式来执行最终的扫描操作</p>
<ul>
<li><strong>上报</strong>：数据处理快，但是无法保障数据的完整性，精度较高（适用于更加精细的使用场景描）</li>
<li><strong>轮询</strong>：数据处理慢，但能自主设定轮询频率，精度相对就底（适用于简单的形体扫）</li>
</ul>
<p>使用该模式的好处：</p>
<ul>
<li><strong>工厂模式</strong>：将策略封装在工厂，通过工厂获取Bean减少业务对策略的直接依赖（减耦合），并且方便了扩展</li>
<li><strong>策略模式</strong>：可以避免if-else，优化代码结构，用于对应两种数据获取方案</li>
</ul>
</blockquote>
<ol>
<li><strong>定义策略</strong></li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">RasterDataProcessStrategy</span> &#123;</span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">rasterDataProcess</span><span class="params">(SerialPort serialPort, <span class="type">int</span> conveyorAddress, <span class="type">int</span>[] rasterAddress,<span class="type">double</span> stepLength,<span class="type">int</span> frequency)</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>策略的两个实现：</strong></p>
<ul>
<li><strong>轮询策略</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component(&quot;RasterDataPoll&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RasterDataPollStrategy</span> <span class="keyword">implements</span> <span class="title class_">RasterDataProcessStrategy</span> &#123;</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">rasterDataProcess</span><span class="params">(SerialPort serialPort, <span class="type">int</span> conveyorAddress, <span class="type">int</span>[] rasterAddress,<span class="type">double</span> stepLength ,<span class="type">int</span> frequency)</span> &#123;</span><br><span class="line">      </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<ul>
<li><strong>上报策略</strong></li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Component(&quot;RasterDataListener&quot;)</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RasterDataListenerStrategy</span> <span class="keyword">implements</span> <span class="title class_">RasterDataProcessStrategy</span> &#123;</span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">rasterDataProcess</span><span class="params">(SerialPort serialPort, <span class="type">int</span> conveyorAddress, <span class="type">int</span>[] rasterAddress,<span class="type">double</span> stepLength,<span class="type">int</span> frequency)</span> &#123;</span><br><span class="line">        <span class="comment">// 将设备注册监听类</span></span><br><span class="line">        <span class="keyword">try</span> &#123;</span><br><span class="line">            <span class="type">MySerialPortEventListener</span> <span class="variable">listener</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MySerialPortEventListener</span>(serialPort, <span class="number">1</span>,rasterAddress,conveyorAddress);</span><br><span class="line">        &#125;<span class="keyword">catch</span> (Exception e)&#123;</span><br><span class="line">            e.printStackTrace();</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><strong>策略工厂类，用于生成策略</strong></li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Service</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">RasterDataProcessFactory</span> &#123;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Autowired</span></span><br><span class="line">    Map&lt;String, RasterDataProcessStrategy&gt; map = <span class="keyword">new</span> <span class="title class_">ConcurrentHashMap</span>&lt;&gt;();</span><br><span class="line"></span><br><span class="line">    <span class="comment">/*</span></span><br><span class="line"><span class="comment">    * 根据设备类型选择适配器</span></span><br><span class="line"><span class="comment">    * */</span></span><br><span class="line">    <span class="keyword">public</span> RasterDataProcessStrategy <span class="title function_">getRasterDataProcessAdapter</span><span class="params">(String deviceType)</span>&#123;</span><br><span class="line">        <span class="type">RasterDataProcessStrategy</span> <span class="variable">rasterDataProcessAdapter</span> <span class="operator">=</span> map.get(deviceType);</span><br><span class="line">        <span class="keyword">if</span> (rasterDataProcessAdapter == <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;设备类型错误&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> rasterDataProcessAdapter;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="3">
<li><strong>实际使用</strong></li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span> (serialPort != <span class="literal">null</span>)&#123;</span><br><span class="line">            <span class="comment">//适配器模式优化</span></span><br><span class="line">            <span class="type">RasterDataProcessStrategy</span> <span class="variable">rasterDataPollStrategy</span> <span class="operator">=</span> rasterDataProcessFactory.getRasterDataProcessAdapter(<span class="string">&quot;RasterDataPoll&quot;</span>);</span><br><span class="line">            rasterDataPollStrategy.rasterDataProcess(serialPort, conveyorAddress, rasterAddress,stepLength, frequency);</span><br><span class="line">        &#125;</span><br></pre></td></tr></table></figure>

<h3 id="为什么使用WebSocket而不是SSE"><a href="#为什么使用WebSocket而不是SSE" class="headerlink" title="为什么使用WebSocket而不是SSE"></a>为什么使用WebSocket而不是SSE</h3><blockquote>
<p>WebSocket更适用于<strong>高频更新</strong>的数据推送</p>
</blockquote>
<ul>
<li>加密传输</li>
<li>WebSocket基于TCP而SSE基于http有较多的<strong>头部开销</strong>，所以<strong>WebSocket</strong>传输效率更高</li>
</ul>
<h3 id="Caffeine"><a href="#Caffeine" class="headerlink" title="Caffeine"></a>Caffeine</h3><p><strong>基于<code>Caffeine</code>框架高效管理设备在线状态，注册监听器自动释放过期设备的串口资源，提升系统资源利用率</strong></p>
<blockquote>
<h4 id="问题背景-WHY"><a href="#问题背景-WHY" class="headerlink" title="问题背景 WHY"></a>问题背景 WHY</h4></blockquote>
<p>串口通信资源的创建、操作都是基于<code>SerialPort</code>对象的，并且一个串口对应一个<code>SerialPort</code>，这就要求后端需要单例存储这个全局的<code>SerialPort</code>对象。</p>
<p>设计方案的同时需要考虑到对SerialPort资源的超时释放，JVM对象回收导致的资源无法正常释放的情况。</p>
<blockquote>
<h4 id="如何解决-HOW"><a href="#如何解决-HOW" class="headerlink" title="如何解决 HOW"></a>如何解决 HOW</h4></blockquote>
<ul>
<li><strong>全局的<code>SerialPort</code>对象资源保存</strong>：Caffeine框架底层基于JVM，可以保存对象资源，所有对串口对象获取从Caffeine获取，并且一个串口对应一个<code>SerialPort</code>，实现全局<code>SerialPort</code>对象</li>
<li><strong>超时释放</strong>：注册移除监听器，当串口长时间未进行操作Caffeine移除会缓存对象，此时监听器会在移除时执行串口资源关闭操作，保证资源正常释放</li>
<li><strong>避免JVM回收</strong>：Caffeine与对象资源建立的是强引用关系，在Caffeine使用时其串口资源是不会被JVM回收的；在未使用时会在监听器实现超时释放，进一步保障了资源安全释放问题</li>
</ul>
<blockquote>
<h4 id="代码实现"><a href="#代码实现" class="headerlink" title="代码实现"></a>代码实现</h4></blockquote>
<ol>
<li>配置<code>deviceOnlineCache</code>的Bean，注册监听器：保证缓存过期的时候能将串口资源安全释放，并记录串口退出的原因</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Configuration</span></span><br><span class="line"><span class="meta">@EnableCaching</span></span><br><span class="line"><span class="meta">@Slf4j</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">CaffeineConfig</span> &#123;</span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 设置在线设备缓存，配置监听器在缓存过期时关闭串口</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span> Cache&lt;String, DeviceOnlineVo&gt;</span></span><br><span class="line"><span class="comment">     * RemovalCause的值：</span></span><br><span class="line"><span class="comment">     * - EXPLICIT ： 表示显式地调用删除操作，直接将某个数据删除</span></span><br><span class="line"><span class="comment">     * - REPLACED：表示某个数据被更新</span></span><br><span class="line"><span class="comment">     * - EXPIRED：表示因为生命周期结束（过期时间到了），而被清除</span></span><br><span class="line"><span class="comment">     * - SIZE：表示因为缓存空间大小受限，总权重受限，而被清除</span></span><br><span class="line"><span class="comment">     * - COLLECTED ： 用于我们的垃圾收集器，也就是我们上面减少的软引用，弱引用</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Bean(&quot;deviceOnlineCache&quot;)</span></span><br><span class="line">    <span class="keyword">public</span> Cache&lt;String, DeviceOnlineVo&gt; <span class="title function_">caffeine</span><span class="params">()</span> &#123;</span><br><span class="line">        Cache&lt;String, DeviceOnlineVo&gt; cache = Caffeine.newBuilder()</span><br><span class="line">                .expireAfterAccess(<span class="number">10</span>, TimeUnit.SECONDS) <span class="comment">// 在读写操作之后刷新时间，保证再使用时不会中断</span></span><br><span class="line">                .maximumSize(<span class="number">256</span>)</span><br><span class="line">                .removalListener((String key, DeviceOnlineVo value, RemovalCause cause) -&gt;</span><br><span class="line">                &#123;</span><br><span class="line">                    Optional.ofNullable(value.getSerialPort()).ifPresent(serialPort -&gt; &#123;</span><br><span class="line">                        serialPort.closePort();</span><br><span class="line">                        log.info(serialPort.getSystemPortName()+<span class="string">&quot;正常串口关闭！&quot;</span>);</span><br><span class="line">                    &#125;);</span><br><span class="line">                    <span class="type">Device</span> <span class="variable">device</span> <span class="operator">=</span> value.getDevice();</span><br><span class="line">                    <span class="type">String</span> <span class="variable">deviceName</span> <span class="operator">=</span> device.getName() == <span class="literal">null</span>? <span class="string">&quot;COM&quot;</span>+device.getPort()+<span class="string">&quot;串口&quot;</span>: device.getName();</span><br><span class="line">                    log.info(deviceName+ <span class="string">&quot;已下线！原因：&quot;</span>+ cause);</span><br><span class="line">                &#125;</span><br><span class="line">                )</span><br><span class="line">                .build();</span><br><span class="line">        <span class="keyword">return</span> cache;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>通过Caffeine去<strong>存储、使用、关闭</strong>串口资源</li>
</ol>
<p><strong>存储</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">portName = <span class="string">&quot;COM&quot;</span>+ device.getPort();</span><br><span class="line">            <span class="comment">// 判断端口是否被占用</span></span><br><span class="line">            <span class="type">boolean</span> <span class="variable">open</span> <span class="operator">=</span> SerialPort.getCommPort(portName).isOpen();</span><br><span class="line">            <span class="keyword">if</span> (open) <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;该串口已被占用，请更换串口！&quot;</span>);</span><br><span class="line">            serialPort = ModBusCommandUtil.openPort(portName, baudRate, dataBits, stopBits, parity);</span><br><span class="line">            <span class="keyword">if</span> (serialPort != <span class="literal">null</span>)&#123;</span><br><span class="line">                <span class="comment">// 将设备注册到Redis中</span></span><br><span class="line">                <span class="comment">// 存入到Caffeine中，并设置过期时间</span></span><br><span class="line">                deviceOnlineCache.put(DEVICE_ONLINE_CACHE+userId,<span class="keyword">new</span> <span class="title class_">DeviceOnlineVo</span>(serialPort,device));</span><br><span class="line">            &#125;</span><br></pre></td></tr></table></figure>

<p><strong>使用</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">Device <span class="title function_">getDevice</span><span class="params">(Long deviceId)</span>&#123;</span><br><span class="line">        <span class="comment">// 获取用户ID</span></span><br><span class="line">        <span class="type">DeviceOnlineVo</span> <span class="variable">deviceOnlineVo</span> <span class="operator">=</span> deviceOnlineCache.getIfPresent(DEVICE_ONLINE_CACHE + deviceId);</span><br><span class="line">        <span class="keyword">if</span> (deviceOnlineVo == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">RuntimeException</span>(<span class="string">&quot;用户未连接设备！&quot;</span>);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> deviceOnlineVo.getDevice();</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p><strong>关闭</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">closeSerialPort</span><span class="params">(Long deviceId)</span> &#123;</span><br><span class="line">        deviceOnlineCache.invalidate(DEVICE_ONLINE_CACHE + deviceId);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>



<blockquote>
<h4 id="问题思考-WHAT"><a href="#问题思考-WHAT" class="headerlink" title="问题思考 WHAT"></a>问题思考 WHAT</h4></blockquote>
<p>技术对比</p>
<ul>
<li>map：无超时过期功能</li>
<li>expiredmap：过期仅仅只能移除对象，而不能在移除对象时显性调用资源关闭的方法</li>
<li>Redis：序列化和反序列化、监听器实现消耗高</li>
<li>caffeine：同时满足过期、续期、资源正常关闭的场景</li>
</ul>
<h3 id="LRU"><a href="#LRU" class="headerlink" title="LRU"></a>LRU</h3><p><strong>采用动态缓存加载Modbus指令并融合LRU算法，显著提升缓存命中率，有效减少至1ms时延与内存占用</strong></p>
<blockquote>
<h4 id="问题背景"><a href="#问题背景" class="headerlink" title="问题背景"></a>问题背景</h4></blockquote>
<p>项目中ModBus指令计算CRC校验码底层是通过JNA调用了C实现的，这个方法耗时长，而有部分指令经常需要被使用，并且鉴于某一个指令如果被加载使用过，下次被使用的概率会很大，为了减少他的持续加载，决定采用LRU算法进行指令缓存</p>
<blockquote>
<h4 id="如何解决"><a href="#如何解决" class="headerlink" title="如何解决"></a>如何解决</h4></blockquote>
<p>新建缓存集合继承LinkedHashMap，重写removeEldestEntry，定义逻辑当保存的指令数量大于设定的最大空间，淘汰最久未使用的指令</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> java.util.LinkedHashMap;</span><br><span class="line"><span class="keyword">import</span> java.util.Map;</span><br><span class="line"></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">class</span> <span class="title class_">LRUCache</span>&lt;K, V&gt; <span class="keyword">extends</span> <span class="title class_">LinkedHashMap</span>&lt;K, V&gt; &#123;</span><br><span class="line">    <span class="keyword">private</span> <span class="type">int</span> maxCapacity;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">public</span> <span class="title function_">LRUCache</span><span class="params">(<span class="type">int</span> capacity)</span> &#123;</span><br><span class="line">        <span class="comment">// 设置访问顺序为true</span></span><br><span class="line">        <span class="built_in">super</span>(capacity, <span class="number">0.75f</span>, <span class="literal">true</span>);</span><br><span class="line">        <span class="built_in">this</span>.maxCapacity = capacity;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="keyword">protected</span> <span class="type">boolean</span> <span class="title function_">removeEldestEntry</span><span class="params">(Map.Entry&lt;K, V&gt; eldest)</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> size() &gt; maxCapacity;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<blockquote>
<h4 id="问题思考"><a href="#问题思考" class="headerlink" title="问题思考"></a>问题思考</h4></blockquote>
<p><strong>什么是<code>LRU</code>、<code>LFU</code>？</strong></p>
<ul>
<li><code>LRU</code> 是 <code>Least Recently Used</code>（最近最少使用）的缩写，它是一种常用的缓存淘汰策略。当缓存满载需要腾出空间时，LRU算法会选择最近最久未被使用的数据项进行淘汰</li>
<li><code>LFU</code>是<code>Least Frequently Used</code>(最少使用频率）。在这种算法中，存储系统会记录每条<strong>记录被访问的次数</strong>（即使用频率），当需要腾出空间时，它会选择那些被访问次数最少的数据项进行淘汰。这意味着即使是近期访问过的数据，如果其总的访问次数少，也可能被优先淘汰。</li>
</ul>
<h3 id="JNA"><a href="#JNA" class="headerlink" title="JNA"></a>JNA</h3><p><strong>通过<code>JNA</code>在Java应用中调用<code>C++</code>语言生成的动态链接实现高效率的串口通信，数据传输时延低至2ms</strong></p>
<blockquote>
<h4 id="问题背景-1"><a href="#问题背景-1" class="headerlink" title="问题背景"></a>问题背景</h4></blockquote>
<p>Java调用串口资源进行串口通信速率达不到业务要求</p>
<blockquote>
<h4 id="如何解决-1"><a href="#如何解决-1" class="headerlink" title="如何解决"></a>如何解决</h4></blockquote>
<ul>
<li>通过<code>JNA</code>调用<code>C++</code>动态链接调用本地方法优化执行速率</li>
<li>并且基于ModBus协议的串口通信指令常包括无符号int值，而Java并不支持这种数据类型，还需要做进一步转换</li>
</ul>
<blockquote>
<h4 id="代码实现-1"><a href="#代码实现-1" class="headerlink" title="代码实现"></a>代码实现</h4></blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 定义加载 jna</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">public</span> <span class="keyword">interface</span> <span class="title class_">SerialCommunicationLibrary</span> <span class="keyword">extends</span> <span class="title class_">Library</span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="type">SerialCommunicationLibrary</span> <span class="variable">INSTANCE</span> <span class="operator">=</span> Native.load(<span class="string">&quot;src/main/resources/SerialCommunication.dll&quot;</span>, SerialCommunicationLibrary.class);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">void</span> <span class="title function_">startSerialCommunication</span><span class="params">(String com)</span>;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="meta">@Test</span></span><br><span class="line">    <span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">readDataTest</span><span class="params">()</span>&#123;</span><br><span class="line">        SerialCommunicationLibrary.INSTANCE.startSerialCommunication(<span class="string">&quot;COM3&quot;</span>);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p>C++实现</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../image/image-20240923135650383.png" alt="image-20240923135650383"></p>
<figure class="highlight c++"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;time.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;windows.h&gt;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">include</span> <span class="string">&lt;string.h&gt;</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> 1   <span class="comment">// 开启DEBUG打印</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> LOGD(...) &#123; printf(__VA_ARGS__); fflush(stdout); &#125;</span></span><br><span class="line"><span class="meta">#<span class="keyword">else</span>   <span class="comment">// 关闭DEBUG打印</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> LOGD(...)</span></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">if</span> 1   <span class="comment">// 开启ERROR打印</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> LOGE(...) &#123; printf(__VA_ARGS__); fflush(stdout); &#125;</span></span><br><span class="line"><span class="meta">#<span class="keyword">else</span>   <span class="comment">// 关闭ERROR打印</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> LOGE(...)</span></span><br><span class="line"><span class="meta">#<span class="keyword">endif</span></span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> BUF_SIZE    2048</span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> EXIT_STR    <span class="string">&quot;exit&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> I_EXIT      <span class="string">&quot;I exit.\r\n&quot;</span></span></span><br><span class="line"><span class="meta">#<span class="keyword">define</span> I_RECEIVE   <span class="string">&quot;I receive.\r\n&quot;</span></span></span><br><span class="line"></span><br><span class="line"><span class="comment">// 打开串口</span></span><br><span class="line"><span class="function">HANDLE <span class="title">OpenSerial</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *com, <span class="type">int</span> baud, <span class="type">int</span> byteSize, <span class="type">int</span> parity, <span class="type">int</span> stopBits)</span> </span>&#123;</span><br><span class="line">    DCB dcb;</span><br><span class="line">    BOOL b = FALSE;</span><br><span class="line">    COMMTIMEOUTS CommTimeouts;</span><br><span class="line">    HANDLE comHandle = INVALID_HANDLE_VALUE;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 打开串口</span></span><br><span class="line">    comHandle = <span class="built_in">CreateFile</span>(com, GENERIC_READ | GENERIC_WRITE, <span class="number">0</span>, <span class="literal">NULL</span>, OPEN_EXISTING, FILE_ATTRIBUTE_NORMAL, <span class="literal">NULL</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">if</span> (INVALID_HANDLE_VALUE == comHandle) &#123;</span><br><span class="line">        <span class="built_in">LOGE</span>(<span class="string">&quot;CreateFile fail\r\n&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span> comHandle;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 设置读写缓存大小</span></span><br><span class="line">    b = <span class="built_in">SetupComm</span>(comHandle, BUF_SIZE, BUF_SIZE);</span><br><span class="line">    <span class="keyword">if</span> (!b) &#123;</span><br><span class="line">        <span class="built_in">LOGE</span>(<span class="string">&quot;SetupComm fail\r\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 设定读写超时</span></span><br><span class="line">    CommTimeouts.ReadIntervalTimeout = MAXDWORD;</span><br><span class="line">    CommTimeouts.ReadTotalTimeoutMultiplier = <span class="number">0</span>;</span><br><span class="line">    CommTimeouts.ReadTotalTimeoutConstant = <span class="number">0</span>;</span><br><span class="line">    CommTimeouts.WriteTotalTimeoutMultiplier = <span class="number">1</span>;</span><br><span class="line">    CommTimeouts.WriteTotalTimeoutConstant = <span class="number">1</span>;</span><br><span class="line">    b = <span class="built_in">SetCommTimeouts</span>(comHandle, &amp;CommTimeouts);</span><br><span class="line">    <span class="keyword">if</span> (!b) &#123;</span><br><span class="line">        <span class="built_in">LOGE</span>(<span class="string">&quot;SetCommTimeouts fail\r\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 设置串口状态属性</span></span><br><span class="line">    <span class="built_in">GetCommState</span>(comHandle, &amp;dcb);</span><br><span class="line">    dcb.BaudRate = baud;</span><br><span class="line">    dcb.ByteSize = byteSize;</span><br><span class="line">    dcb.Parity   = parity;</span><br><span class="line">    dcb.StopBits = stopBits;</span><br><span class="line">    b = <span class="built_in">SetCommState</span>(comHandle, &amp;dcb);</span><br><span class="line">    <span class="keyword">if</span> (!b) &#123;</span><br><span class="line">        <span class="built_in">LOGE</span>(<span class="string">&quot;SetCommState fail\r\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> comHandle;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">// 封装为一个方法供JNA调用</span></span><br><span class="line">__declspec(dllexport) <span class="function"><span class="type">void</span> <span class="title">startSerialCommunication</span><span class="params">(<span class="type">const</span> <span class="type">char</span> *com)</span> </span>&#123;</span><br><span class="line">    BOOL b = FALSE;</span><br><span class="line">    DWORD wRLen = <span class="number">0</span>;</span><br><span class="line">    DWORD wWLen = <span class="number">0</span>;</span><br><span class="line">    <span class="type">char</span> buf[BUF_SIZE] = &#123;<span class="number">0</span>&#125;;</span><br><span class="line">    HANDLE comHandle = INVALID_HANDLE_VALUE;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 打开串口</span></span><br><span class="line">    comHandle = <span class="built_in">OpenSerial</span>(com, CBR_9600, <span class="number">8</span>, NOPARITY, ONE5STOPBITS);</span><br><span class="line">    <span class="keyword">if</span> (INVALID_HANDLE_VALUE == comHandle) &#123;</span><br><span class="line">        <span class="built_in">LOGE</span>(<span class="string">&quot;OpenSerial COM fail!\r\n&quot;</span>);</span><br><span class="line">        <span class="keyword">return</span>;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="built_in">LOGD</span>(<span class="string">&quot;Open COM Successfully!\r\n&quot;</span>);</span><br><span class="line"></span><br><span class="line">    <span class="keyword">while</span> (<span class="number">1</span>) &#123;</span><br><span class="line">        wRLen = <span class="number">0</span>;</span><br><span class="line">        <span class="type">time_t</span> old_time = <span class="built_in">time</span>(<span class="literal">NULL</span>);</span><br><span class="line">        b = <span class="built_in">ReadFile</span>(comHandle, buf, <span class="built_in">sizeof</span>(buf)<span class="number">-1</span>, &amp;wRLen, <span class="literal">NULL</span>);</span><br><span class="line">        <span class="type">time_t</span> end_time = <span class="built_in">time</span>(<span class="literal">NULL</span>);</span><br><span class="line">        <span class="keyword">if</span> (b &amp;&amp; <span class="number">0</span> &lt; wRLen) &#123;</span><br><span class="line">            buf[wRLen] = <span class="string">&#x27;\0&#x27;</span>;</span><br><span class="line">            <span class="built_in">LOGE</span>(<span class="string">&quot;&lt;&lt;&lt; TIME:%d \n&gt;&gt;&gt;&quot;</span>,end_time-old_time);</span><br><span class="line">            <span class="built_in">LOGD</span>(<span class="string">&quot;[RECV]%s\r\n&quot;</span>, buf);</span><br><span class="line">            <span class="comment">// 对buf数据进行处理</span></span><br><span class="line">            <span class="keyword">if</span> (<span class="number">0</span> == <span class="built_in">strncmp</span>(buf, EXIT_STR, <span class="built_in">strlen</span>(EXIT_STR))) &#123;</span><br><span class="line">                b = <span class="built_in">WriteFile</span>(comHandle, <span class="built_in">TEXT</span>(I_EXIT), <span class="built_in">strlen</span>(I_EXIT), &amp;wWLen, <span class="literal">NULL</span>);</span><br><span class="line">                <span class="keyword">if</span> (!b) &#123;</span><br><span class="line">                    <span class="built_in">LOGE</span>(<span class="string">&quot;WriteFile fail\r\n&quot;</span>);</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">break</span>;</span><br><span class="line">            &#125;</span><br><span class="line">            b = <span class="built_in">WriteFile</span>(comHandle, <span class="built_in">TEXT</span>(I_RECEIVE), <span class="built_in">strlen</span>(I_RECEIVE), &amp;wWLen, <span class="literal">NULL</span>);</span><br><span class="line">            <span class="keyword">if</span> (!b) &#123;</span><br><span class="line">                <span class="built_in">LOGE</span>(<span class="string">&quot;WriteFile fail\r\n&quot;</span>);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">// 关闭串口</span></span><br><span class="line">    b = <span class="built_in">CloseHandle</span>(comHandle);</span><br><span class="line">    <span class="keyword">if</span> (!b) &#123;</span><br><span class="line">        <span class="built_in">LOGE</span>(<span class="string">&quot;CloseHandle fail\r\n&quot;</span>);</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="built_in">LOGD</span>(<span class="string">&quot;Program Exit.\r\n&quot;</span>);</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<blockquote>
<h4 id="问题思考-1"><a href="#问题思考-1" class="headerlink" title="问题思考"></a>问题思考</h4></blockquote>
<ol>
<li><p><strong>C++ 调用串口资源比 Java 快的原因可以从以下几个方面来解释</strong>：</p>
<ul>
<li><p>**C++**：C++ 是静态类型语言，编译后生成的代码通常是直接与硬件交互的机器码。由于它是编译型语言，程序在运行前就已经完成了所有的类型检查和优化工作，因此运行时可以直接执行高效的机器指令。并且串口通信底层硬件驱动和库都是用 C 或 C++ 写的，所以直接用 C++ 调用这些库通常会更快。</p>
</li>
<li><p><strong>Java</strong>：是一种解释型语言，代码先解释为字节码，再转化为机器码</p>
</li>
</ul>
</li>
<li><p><strong>JNI与JNA的区别</strong></p>
</li>
</ol>
<p>都是java调用本地方法的方式，但是JNA调用本地方法操作更加便捷</p>
<h3 id="PostgresSQL"><a href="#PostgresSQL" class="headerlink" title="PostgresSQL"></a>PostgresSQL</h3><p><strong>设计实现项目文件的回收站，并结合快照版本控制方案快速恢复至所需状态，有效减少了数据丢失的风险</strong></p>
<blockquote>
<h4 id="问题背景-2"><a href="#问题背景-2" class="headerlink" title="问题背景"></a>问题背景</h4></blockquote>
<p>查看文件内容的历史修改</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../image/image-20240923161610712.png" alt="image-20240923161610712"></p>
<blockquote>
<h4 id="如何解决-2"><a href="#如何解决-2" class="headerlink" title="如何解决"></a>如何解决</h4></blockquote>
<p>提供一个快照表：保存文件<code>id，version，snapshot</code>，在snapshot中保存文件内容；这样就可以通过文件id和version区查看到不同版本的内容</p>
<p>定义file、file_snapshot（文件快照表），快照表</p>
<blockquote>
<h4 id="代码实现-2"><a href="#代码实现-2" class="headerlink" title="代码实现"></a>代码实现</h4></blockquote>
<p>因为同时要记录修改人id</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../image/image-20250416104804399.png" alt="image-20250416104804399"></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../image/image-20240923161119203.png" alt="image-20240923161119203"></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> BlockContentDiff <span class="title function_">getBlockContentDiff</span><span class="params">(<span class="type">long</span> processId)</span> &#123;</span><br><span class="line">        <span class="type">ElnAuditProcesses</span> <span class="variable">elnAuditProcesses</span> <span class="operator">=</span> elnAuditProcessesMapper.selectById(processId);</span><br><span class="line">        <span class="keyword">if</span> (elnAuditProcesses==<span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BusinessException</span>(ErrorCode.ELN_AUDIT_PROCESSES_NOT_FOUND);</span><br><span class="line">        &#125;</span><br><span class="line"></span><br><span class="line">        <span class="type">FileItemDto</span> <span class="variable">oldBlock</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="type">Boolean</span> <span class="variable">skipProjectPermissionCheck</span> <span class="operator">=</span> needSkipProjectPermissionCheck(elnAuditProcesses.getFileId());</span><br><span class="line">        <span class="keyword">if</span> (!ElnAuditProcessType.UNCOMMITTED.getValue().equals(elnAuditProcesses.getType()) &amp;&amp; elnAuditProcesses.getOldBlockVersion()!=<span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="type">FileItemSnapshotDto</span> <span class="variable">oldBlockSnapshot</span> <span class="operator">=</span> platformService.getFileItemByVersion(elnAuditProcesses.getFileId(), elnAuditProcesses.getBlockId(), elnAuditProcesses.getOldBlockVersion(), skipProjectPermissionCheck);</span><br><span class="line">            <span class="keyword">if</span> (oldBlockSnapshot!=<span class="literal">null</span>) &#123;</span><br><span class="line">                <span class="comment">// 老版本文件内容</span></span><br><span class="line">                oldBlock = ObjectMappingUtils.mapToObject(oldBlockSnapshot.getSnapshot(), FileItemDto.class);</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">FileItemSnapshotDto</span> <span class="variable">newBlockSnapshot</span> <span class="operator">=</span> platformService.getFileItemByVersion(elnAuditProcesses.getFileId(), elnAuditProcesses.getBlockId(), elnAuditProcesses.getBlockVersion(), skipProjectPermissionCheck);</span><br><span class="line">        <span class="type">FileItemDto</span> <span class="variable">newBlock</span> <span class="operator">=</span> <span class="literal">null</span>;</span><br><span class="line">        <span class="keyword">if</span> (newBlockSnapshot!=<span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="comment">// 新版本文件内容</span></span><br><span class="line">            newBlock = ObjectMappingUtils.mapToObject(newBlockSnapshot.getSnapshot(), FileItemDto.class);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">BlockContentDiff</span> <span class="variable">blockContentDiff</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">BlockContentDiff</span>();</span><br><span class="line">        blockContentDiff.setOldBlock(oldBlock);</span><br><span class="line">        blockContentDiff.setNewBlock(newBlock);</span><br><span class="line">        <span class="keyword">if</span> (elnAuditProcesses.getOldFileVersion()!=<span class="literal">null</span>) &#123;</span><br><span class="line">            blockContentDiff.setOldFileVersion(elnAuditProcesses.getOldFileVersion().toString());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">if</span> (elnAuditProcesses.getFileVersion()!=<span class="literal">null</span>) &#123;</span><br><span class="line">            blockContentDiff.setNewFileVersion(elnAuditProcesses.getFileVersion().toString());</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> blockContentDiff;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<h4 id="问题思考-2"><a href="#问题思考-2" class="headerlink" title="问题思考"></a>问题思考</h4></blockquote>
<h3 id="基于微服务的分层架构"><a href="#基于微服务的分层架构" class="headerlink" title="基于微服务的分层架构"></a>基于微服务的分层架构</h3><p>你提到的这种从左至右依赖的服务架构设计，即 AGW（通常指的是 API Gateway）、Application、Platform、Foundation 这样的分层结构，通常与现代微服务架构或者企业级应用架构设计相关。这样的架构模式可以被称为“分层架构”或更具体地称为“基于微服务的分层架构”。</p>
<h4 id="分层架构概述"><a href="#分层架构概述" class="headerlink" title="分层架构概述"></a>分层架构概述</h4><ul>
<li>**API Gateway (AGW)**：作为系统的入口点，它负责客户端请求的接收和路由到相应的后端服务。此外，它还可能提供诸如身份验证、限流、缓存等服务。</li>
<li><strong>Application</strong>：这一层包含具体的业务逻辑和服务实现。每个应用程序服务通常专注于解决特定的业务问题或功能。</li>
<li><strong>Platform</strong>：提供共享的服务和功能，这些功能对于多个应用程序来说是通用的，例如消息队列、数据库访问层等。</li>
<li><strong>Foundation</strong>：基础层，提供整个系统运行的基础技术设施，如操作系统、网络配置、存储解决方案等。</li>
</ul>
<h4 id="设计的好处"><a href="#设计的好处" class="headerlink" title="设计的好处"></a>设计的好处</h4><blockquote>
<p>复用性、模块化、灵活性</p>
</blockquote>
<ol>
<li><strong>模块化和解耦</strong>：<code>每一层都有明确的责任，这有助于降低各组件间的耦合度</code>，使得系统更加模块化，易于维护和扩展。</li>
<li><strong>可重用性</strong>：通过在平台层提供共享的服务，可以在不同的应用程序中<code>重用这些服务</code>，减少重复开发的工作量。</li>
<li><strong>灵活性和伸缩性</strong>：这种架构允许单独扩展各个层次的能力，比如可以根据需求对特定的<code>应用层服务进行水平扩展而不影响其他部分</code>。</li>
<li><strong>简化开发流程</strong>：清晰的层次划分可以帮助团队成员更容易理解系统的整体架构，简化开发过程中的沟通成本。</li>
<li><strong>安全性增强</strong>：API Gateway作为一个单一入口点，可以集中管理安全策略，如认证、授权等，从而保护内部服务免受外部直接攻击。</li>
</ol>
<p>综上所述，这种分层架构设计能够带来更好的组织性、可维护性和扩展性，同时也为快速响应业务变化提供了支持。</p>
<h3 id="SaaS租户系统设计"><a href="#SaaS租户系统设计" class="headerlink" title="SaaS租户系统设计"></a><a href="D:\桌面\hexo\blog\source\file">SaaS租户系统设计</a></h3><p><strong>设计思路</strong>：</p>
<ol>
<li>确定产品服务（<code>产品价值</code>）、服务人群，确定租户类型（<code>企业</code>、<code>个人</code>）</li>
<li>将产品按客户人群功能细分（例：<code>个人免费版</code>、<code>个人专业版</code>、<code>企业版</code> ）</li>
<li>大功能权限控制：创建租户时生成功能<code>Tenant-feature</code>关联表，该表记录功能的次数、开关、类型</li>
<li>细分功能权限控制：设定角色权限，精确控制一些读写操作</li>
</ol>
<h4 id="架构选型"><a href="#架构选型" class="headerlink" title="架构选型"></a>架构选型</h4><h5 id="双架构策略"><a href="#双架构策略" class="headerlink" title="双架构策略"></a><strong>双架构策略</strong></h5><p>￮ 定义：为个人版和企业版分别制作两套完全不同的架构。</p>
<p>￮ 特点：这种方法允许每个版本专注于特定用户群体的需求，但可能增加维护和开发的复杂性。</p>
<h5 id="标准SaaS架构（决策）"><a href="#标准SaaS架构（决策）" class="headerlink" title="标准SaaS架构（决策）"></a>标准SaaS架构（决策）</h5><blockquote>
<p>个人与企业功能需求并没有存在明显差异、统一架构更适合当前公司的规模、降低长期技术负债风险</p>
</blockquote>
<p>深入分析上述背景和考虑以下关键因素，得出决策。</p>
<ul>
<li><strong>用户需求的一致性</strong>：我们没有发现明显的证据表明不同用户群体（个人用户与企业用户）之间的功能需求存在显著差异。这意味着一个统一的架构能够有效地满足所有用户的基本需求。</li>
<li><strong>当前产品发展阶段和资源考量</strong>：考虑到我们产品目前所处的发展阶段，以及公司的规模和人力资源状况，采用一个统一的架构将更加合适。这将有助于我们集中资源，提高开发效率。</li>
<li><strong>后续维护和扩展性</strong>：从长远来看，一个标准化的SaaS架构将更容易维护和扩展。这种架构的选择有助于未来的功能迭代和技术升级，同时也降低了长期的技术债务风险。</li>
</ul>
<p>决策使用「标准化SaaS模式」。</p>
<blockquote>
<p><strong>标准化SaaS模式</strong></p>
<p>￮ 定义：所有版本（包括个人版和企业版）统一使用一套标准的SaaS架构，不区分个人用户和企业用户。</p>
<p>￮ 特点：这种方法强调了架构的统一性和简洁性，有利于减少开发和维护成本，同时提高系统的可扩展性和可维护性。</p>
</blockquote>
<h4 id="租户订阅"><a href="#租户订阅" class="headerlink" title="租户订阅"></a>租户订阅</h4><p><strong>决策</strong></p>
<blockquote>
<p>为了高效地管理系统功能，我们计划在租户管理中引入三个关键层级的控制机制：模块开关、功能开关以及功能限额。此外，面向系统内各种订阅版本（例如个人版、企业版等），我们将设计一系列可编辑的版本模板。这些模板将在租户初始化时进行配置（Provisioning），以此确保各版本在功能可用性和资源使用上均符合其特定的服务协议和用户需求。</p>
</blockquote>
<h5 id="组件设计"><a href="#组件设计" class="headerlink" title="组件设计"></a><strong>组件设计</strong></h5><ul>
<li>不同租户订阅需求不一样<ul>
<li>个人</li>
<li>企业：涉及多席位</li>
</ul>
</li>
<li>租户版本之间的转换</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../image/image-20250317231415379.png" alt="image-20250317231415379"></p>
<blockquote>
<p><strong>Foundation 服务组件设计</strong></p>
</blockquote>
<p>Foundation 服务作为系统的核心支撑组件，担负着以下关键功能：</p>
<ol>
<li>租户管理：</li>
</ol>
<p>￮ 实现租户模型（Server层），提供租户数据结构和逻辑。</p>
<p>￮ 承担租户管理职责（Server层），处理租户的创建、更新和删除。</p>
<p>￮ 负责租户的provisioning过程（Server层），确保租户初始化和配置。</p>
<p>￮ 提供运行时租户隔离的库（Lib层），支持上层服务在运行时实现租户隔离。</p>
<ol start="2">
<li>模块与功能管理：</li>
</ol>
<p>￮ 维护模块与功能管理模型（Server层），定义模块和功能的数据结构。</p>
<p>￮ 提供运行时模块开关的库（Lib层），用于控制模块的激活与禁用。</p>
<p>￮ 提供运行时功能开关的库（Lib层），用于管理功能级别的访问控制。</p>
<p>￮ 提供运行时功能限制的库（Lib层），用于实施功能的使用限额。</p>
<ol start="3">
<li>订阅管理：</li>
</ol>
<p>￮ 构建订阅模型（Server层），用于管理订阅计划的数据结构。</p>
<p>￮ 实施订阅管理功能（Server层），包括订阅计划的创建和更新。</p>
<p>￮ 管理租户的订阅变更（Server层），处理订阅升级、降级和变更。</p>
<blockquote>
<p><strong>Platform 服务组件</strong></p>
</blockquote>
<p>Platform 服务利用 Foundation 提供的库（Lib），负责管理租户的上下文信息。</p>
<blockquote>
<p><strong>Application 服务组件</strong></p>
</blockquote>
<p>Application 服务同样使用 Foundation 提供的库，以确保在应用层面上正确管理租户上下文。</p>
<blockquote>
<p><strong>Agw 服务组件</strong></p>
</blockquote>
<p>Agw 服务使用Foundation 提供的Lib，负责以下任务：</p>
<p>• 管理租户上下文。</p>
<p>• 控制模块开关上下文，确保正确的模块可用性。</p>
<p><strong>• 管理功能开关上下文，实施功能级别的访问控制。</strong></p>
<p><strong>• 实施功能限制上下文，确保功能使用符合预定限额。</strong></p>
<h5 id="数据库设计"><a href="#数据库设计" class="headerlink" title="数据库设计"></a>数据库设计</h5><ul>
<li><p>**<code>subscription_type_feature</code>**：用于定义订阅类型的功能包，属于静态配置。（相当于定义了订阅类型的规范）</p>
</li>
<li><p>**<code>feature_enabled</code>**：用于管理租户的实际功能启用状态，属于动态数据。</p>
<blockquote>
<p>每新建一个租户将基于<code>subscription_type_feature</code>定义的规范生成租户自己的<code>feature_enabled</code></p>
</blockquote>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../image/image-20250317231805006.png" alt="image-20250317231805006"></p>
<h4 id="数据隔离"><a href="#数据隔离" class="headerlink" title="数据隔离"></a>数据隔离</h4><h5 id="租户隔离模型"><a href="#租户隔离模型" class="headerlink" title="租户隔离模型"></a><strong>租户隔离模型</strong></h5><p>在我们的系统中，租户是实现数据隔离的基本单位。这种模型确保了即使在底层数据存储中没有物理上的隔离，用户也能体验到数据上的完全隔离。对用户来说，不同租户的数据在逻辑上是完全隔绝的，从而在保障数据安全和隐私的同时，提供了一个清晰、高效的数据管理环境。</p>
<ol>
<li>逻辑隔离</li>
<li>Shecama隔离(数据库内部的单元房)</li>
<li>独立数据库隔离</li>
</ol>
<h4 id="具体实现"><a href="#具体实现" class="headerlink" title="具体实现"></a>具体实现</h4><h5 id="网关层"><a href="#网关层" class="headerlink" title="网关层"></a>网关层</h5><ul>
<li>获取租户ID，将租户ID（<strong>用于做用户操作租户隔离</strong>）、userID加载请求头</li>
<li>判断租户是否可以使用该功能（<code>tenant_feature</code>）<ul>
<li>如果<code>tenant_feature</code>不包含数据：放行</li>
<li>如果<code>tenant_feature</code>包含数据：同时满足<strong>次数限制、功能类型、功能开关</strong>才放行</li>
</ul>
</li>
<li>判断用户角色是否拥有接口权限</li>
<li>转发请求到对应服务！</li>
</ul>
<h5 id="租户订阅-1"><a href="#租户订阅-1" class="headerlink" title="租户订阅"></a>租户订阅</h5><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../image/image-20240920142622891.png" alt="image-20240920142622891"></p>
<blockquote>
<p><code>tenant_feature</code>：字段有使用次数限制、功能类型、功能开关，只保存需要限制的功能。用于网关层做拦截</p>
</blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> IF <span class="keyword">EXISTS</span> &quot;yanyin&quot;.&quot;tenant_feature&quot;;</span><br><span class="line"><span class="keyword">CREATE TABLE</span> &quot;yanyin&quot;.&quot;tenant_feature&quot; (</span><br><span class="line">  &quot;id&quot; int8 <span class="keyword">NOT NULL</span> GENERATED <span class="keyword">BY</span> <span class="keyword">DEFAULT</span> <span class="keyword">AS</span> <span class="keyword">IDENTITY</span> (</span><br><span class="line">INCREMENT <span class="number">1</span></span><br><span class="line">MINVALUE  <span class="number">1</span></span><br><span class="line">MAXVALUE <span class="number">9223372036854775807</span></span><br><span class="line"><span class="keyword">START</span> <span class="number">1</span></span><br><span class="line">),</span><br><span class="line">  &quot;tenant_id&quot; int8 <span class="keyword">NOT NULL</span>,</span><br><span class="line">  &quot;feature&quot; <span class="type">varchar</span>(<span class="number">128</span>) <span class="keyword">COLLATE</span> &quot;pg_catalog&quot;.&quot;default&quot;,</span><br><span class="line">  &quot;feature_level&quot; <span class="type">varchar</span>(<span class="number">32</span>) <span class="keyword">COLLATE</span> &quot;pg_catalog&quot;.&quot;default&quot;,</span><br><span class="line">  &quot;enabled&quot; bool,</span><br><span class="line">  &quot;limited_quantity&quot; int4,</span><br><span class="line">  &quot;create_time&quot; <span class="type">timestamp</span>(<span class="number">6</span>),</span><br><span class="line">  &quot;update_time&quot; <span class="type">timestamp</span>(<span class="number">6</span>),</span><br><span class="line">  &quot;is_deleted&quot; int2,</span><br><span class="line">  &quot;create_by&quot; int8,</span><br><span class="line">  &quot;update_by&quot; int8</span><br><span class="line">)</span><br><span class="line">;</span><br><span class="line">COMMENT <span class="keyword">ON</span> <span class="keyword">COLUMN</span> &quot;yanyin&quot;.&quot;tenant_feature&quot;.&quot;id&quot; <span class="keyword">IS</span> <span class="string">&#x27;id&#x27;</span>;</span><br><span class="line">COMMENT <span class="keyword">ON</span> <span class="keyword">COLUMN</span> &quot;yanyin&quot;.&quot;tenant_feature&quot;.&quot;tenant_id&quot; <span class="keyword">IS</span> <span class="string">&#x27;租户id&#x27;</span>;</span><br><span class="line">COMMENT <span class="keyword">ON</span> <span class="keyword">COLUMN</span> &quot;yanyin&quot;.&quot;tenant_feature&quot;.&quot;feature&quot; <span class="keyword">IS</span> <span class="string">&#x27;功能&#x27;</span>;</span><br><span class="line">COMMENT <span class="keyword">ON</span> <span class="keyword">COLUMN</span> &quot;yanyin&quot;.&quot;tenant_feature&quot;.&quot;feature_level&quot; <span class="keyword">IS</span> <span class="string">&#x27;功能类型&#x27;</span>;</span><br><span class="line">COMMENT <span class="keyword">ON</span> <span class="keyword">COLUMN</span> &quot;yanyin&quot;.&quot;tenant_feature&quot;.&quot;enabled&quot; <span class="keyword">IS</span> <span class="string">&#x27;功能开关&#x27;</span>;</span><br><span class="line">COMMENT <span class="keyword">ON</span> <span class="keyword">COLUMN</span> &quot;yanyin&quot;.&quot;tenant_feature&quot;.&quot;limited_quantity&quot; <span class="keyword">IS</span> <span class="string">&#x27;功能限制&#x27;</span>;</span><br><span class="line">COMMENT <span class="keyword">ON</span> <span class="keyword">COLUMN</span> &quot;yanyin&quot;.&quot;tenant_feature&quot;.&quot;create_time&quot; <span class="keyword">IS</span> <span class="string">&#x27;创建时间&#x27;</span>;</span><br><span class="line">COMMENT <span class="keyword">ON</span> <span class="keyword">COLUMN</span> &quot;yanyin&quot;.&quot;tenant_feature&quot;.&quot;update_time&quot; <span class="keyword">IS</span> <span class="string">&#x27;更新时间&#x27;</span>;</span><br><span class="line">COMMENT <span class="keyword">ON</span> <span class="keyword">COLUMN</span> &quot;yanyin&quot;.&quot;tenant_feature&quot;.&quot;is_deleted&quot; <span class="keyword">IS</span> <span class="string">&#x27;逻辑删除标志&#x27;</span>;</span><br><span class="line">COMMENT <span class="keyword">ON</span> <span class="keyword">COLUMN</span> &quot;yanyin&quot;.&quot;tenant_feature&quot;.&quot;create_by&quot; <span class="keyword">IS</span> <span class="string">&#x27;创建人&#x27;</span>;</span><br><span class="line">COMMENT <span class="keyword">ON</span> <span class="keyword">COLUMN</span> &quot;yanyin&quot;.&quot;tenant_feature&quot;.&quot;update_by&quot; <span class="keyword">IS</span> <span class="string">&#x27;更新人&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Indexes structure for table tenant_feature</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">CREATE</span> INDEX &quot;idx_tenant_id_is_deleted_feature_level&quot; <span class="keyword">ON</span> &quot;yanyin&quot;.&quot;tenant_feature&quot; <span class="keyword">USING</span> btree (</span><br><span class="line">  &quot;tenant_id&quot; &quot;pg_catalog&quot;.&quot;int8_ops&quot; <span class="keyword">ASC</span> <span class="keyword">NULLS LAST</span>,</span><br><span class="line">  &quot;is_deleted&quot; &quot;pg_catalog&quot;.&quot;int2_ops&quot; <span class="keyword">ASC</span> <span class="keyword">NULLS LAST</span>,</span><br><span class="line">  &quot;feature_level&quot; <span class="keyword">COLLATE</span> &quot;pg_catalog&quot;.&quot;default&quot; &quot;pg_catalog&quot;.&quot;text_ops&quot; <span class="keyword">ASC</span> <span class="keyword">NULLS LAST</span></span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="comment">-- Primary Key structure for table tenant_feature</span></span><br><span class="line"><span class="comment">-- ----------------------------</span></span><br><span class="line"><span class="keyword">ALTER TABLE</span> &quot;yanyin&quot;.&quot;tenant_feature&quot; <span class="keyword">ADD CONSTRAINT</span> &quot;tenant_feature_pkey&quot; <span class="keyword">PRIMARY KEY</span> (&quot;id&quot;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">enum</span> <span class="title class_">FeatureNameEnum</span> &#123;</span><br><span class="line"></span><br><span class="line">    ACADEMIC_CA(<span class="string">&quot;学术认证&quot;</span>, <span class="string">&quot;profile.academicCertification&quot;</span>),</span><br><span class="line"></span><br><span class="line">    SEAT(<span class="string">&quot;席位管理&quot;</span>, <span class="string">&quot;userManagement.seat&quot;</span>),</span><br><span class="line">    </span><br><span class="line">    LITERATURES_AI(<span class="string">&quot;AI文献提问&quot;</span>, <span class="string">&quot;library.literatures.ai&quot;</span>),</span><br><span class="line"></span><br><span class="line">    INVENTORY_MATERIALS(<span class="string">&quot;物料管理&quot;</span>, <span class="string">&quot;inventoryMaterials&quot;</span>),</span><br><span class="line"></span><br><span class="line">    EQUIPMENT(<span class="string">&quot;设备管理&quot;</span>, <span class="string">&quot;equipment&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String name;</span><br><span class="line">    <span class="keyword">private</span> <span class="keyword">final</span> String value;</span><br><span class="line"></span><br><span class="line">    FeatureNameEnum(String name, String value) &#123;</span><br><span class="line">        <span class="built_in">this</span>.name = name;</span><br><span class="line">        <span class="built_in">this</span>.value = value;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>



<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 查看剩余席位</span></span><br><span class="line"><span class="keyword">public</span> List&lt;SeatResponse&gt; <span class="title function_">getSeatNumList</span><span class="params">(FeatureRequest req)</span> &#123;</span><br><span class="line">        List&lt;SeatResponse&gt; seatNumList = tenantFeatureMapper.getSeatNumList(req.getTenantIds(), FeatureNameEnum.SEAT.getValue());</span><br><span class="line">        List&lt;SeatResponse&gt; seatResponses = req.getTenantIds().stream()</span><br><span class="line">                .filter(tenantId -&gt; !seatNumList.stream().map(SeatResponse::getTenantId).toList().contains(tenantId))</span><br><span class="line">                .map(tenantId -&gt; &#123;</span><br><span class="line">                    <span class="type">SeatResponse</span> <span class="variable">seatResponse</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">SeatResponse</span>();</span><br><span class="line">                    seatResponse.setTenantId(tenantId);</span><br><span class="line">                    seatResponse.setSeat(<span class="number">1</span>);</span><br><span class="line">                    seatResponse.setRemainingSeats(<span class="number">0</span>);</span><br><span class="line">                    <span class="keyword">return</span> seatResponse;</span><br><span class="line">                &#125;).toList();</span><br><span class="line">        seatNumList.addAll(seatResponses);</span><br><span class="line">        <span class="keyword">return</span> seatNumList;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<h5 id="租户隔离"><a href="#租户隔离" class="headerlink" title="租户隔离"></a>租户隔离</h5><blockquote>
<p>租户之间的数据是不可见的，可以是物理上的隔离，也可以是逻辑上的隔离；本项目中采用的是Mybatis支持的逻辑隔离方案，对租户所有操作加上</p>
<p><code>where tenantId =  租户自己的id</code></p>
</blockquote>
<p><strong>实现步骤</strong></p>
<ol>
<li><em>Mybatis配置租户隔离拦截器</em><ul>
<li>重写<code>TenantLineHandler</code>的<code>getTenantId</code>方法实现以租户为隔离单位的逻辑隔离</li>
<li>重写<code>ignoreTable</code>方法过滤部分不依赖租户查询的数据</li>
</ul>
</li>
</ol>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">private</span> <span class="keyword">static</span> <span class="keyword">final</span> List&lt;String&gt; TENANT_IGNORE_TABLES =</span><br><span class="line">            List.of(<span class="string">&quot;namespace&quot;</span>, <span class="string">&quot;\&quot;user\&quot;&quot;</span>,<span class="string">&quot;bio_lib_preset&quot;</span>,<span class="string">&quot;bio_entity_preset&quot;</span>,<span class="string">&quot;meta_preset&quot;</span>,<span class="string">&quot;dashboard_preset&quot;</span>,<span class="string">&quot;widget_preset&quot;</span>,<span class="string">&quot;recycle_bin&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="meta">@Bean</span></span><br><span class="line">    <span class="keyword">public</span> MybatisPlusInterceptor <span class="title function_">mybatisPlusInterceptor</span><span class="params">()</span> &#123;</span><br><span class="line">        <span class="type">MybatisPlusInterceptor</span> <span class="variable">interceptor</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">MybatisPlusInterceptor</span>();</span><br><span class="line"></span><br><span class="line">        <span class="comment">// add TenantLineInnerInterceptor</span></span><br><span class="line">        interceptor.addInnerInterceptor(<span class="keyword">new</span> <span class="title class_">TenantLineInnerInterceptor</span>(<span class="keyword">new</span> <span class="title class_">TenantLineHandler</span>() &#123;</span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> Expression <span class="title function_">getTenantId</span><span class="params">()</span> &#123;</span><br><span class="line">                <span class="type">Long</span> <span class="variable">tenantId</span> <span class="operator">=</span> TenantContextHolder.getTenantId();</span><br><span class="line">                <span class="keyword">if</span> (tenantId == <span class="literal">null</span>) &#123;</span><br><span class="line">                    <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">NullValue</span>();</span><br><span class="line">                &#125;</span><br><span class="line">                <span class="keyword">return</span> <span class="keyword">new</span> <span class="title class_">LongValue</span>(tenantId);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="meta">@Override</span></span><br><span class="line">            <span class="keyword">public</span> <span class="type">boolean</span> <span class="title function_">ignoreTable</span><span class="params">(String tableName)</span> &#123;</span><br><span class="line">                <span class="keyword">return</span> TENANT_IGNORE_TABLES.contains(tableName);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">        &#125;));</span><br><span class="line"></span><br><span class="line">        <span class="comment">// add PaginationInnerInterceptor</span></span><br><span class="line">        interceptor.addInnerInterceptor(<span class="keyword">new</span> <span class="title class_">PaginationInnerInterceptor</span>());</span><br><span class="line"></span><br><span class="line">        <span class="keyword">return</span> interceptor;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li><em>网关层转发时携带TenantId</em></li>
</ol>
<h3 id="兑换码功能设计"><a href="#兑换码功能设计" class="headerlink" title="兑换码功能设计"></a>兑换码功能设计</h3><p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../image/whiteboard_exported_image-1726629586322-8.png" alt="whiteboard_exported_image"></p>
<h3 id="RocketMQ"><a href="#RocketMQ" class="headerlink" title="RocketMQ"></a>RocketMQ</h3><ul>
<li><p><code>why</code>：如何避免Platform层直接Application层</p>
</li>
<li><p><code>how</code>：项目的架构自上而下分为：网关、Application、Platform、Foundation，过程中项目文件回收站的新接口应该定义在哪个层让我很疑惑，后面我学习到Platform维护的是file的操作，File是所有文件的父类，而Application实现的是由file衍生出的ELN、image、PDF等实际文件，文件回收站的逻辑应当是这些实际文件都有方法，所以应新增在Platform层中。</p>
<blockquote>
<p>这有点像设计有点像Bean的设计，Beanfinition保存的是Bean的属性指向Bean，而Bean才是真正的对象</p>
</blockquote>
</li>
<li><p><code>what</code>：基于MQ实现了异步删除、避免了底层服务向上依赖高级服务。加深了对自上而下的项目架构的理解</p>
</li>
</ul>
<blockquote>
<h4 id="问题背景-3"><a href="#问题背景-3" class="headerlink" title="问题背景"></a>问题背景</h4></blockquote>
<p><code>file_asset</code>是所有文件的父类表，由这张表可以引申出<code>eln、sequence、imge</code>等实际的文件类型。架构设计中<code>Platform</code>层偏底层用于提供对<code>file_asset</code>的公共接口开放给<code>Application</code>层使用，所以<code>Application</code>对于具体文件类型的操作都是依赖于<code>Platform</code>的，姑且称呼<code>Application</code>为高级服务，高级服务可以依赖于底层服务，但是底层服务不能依赖于高级服务。现在需要在<code>Platform</code>设计一个文件回收站，而文件回收站是对<code>file_asset</code>的回收，所以他一定在<code>Platform</code>层，而对各种文件的彻底删除逻辑原本在<code>Application</code>是已经实现了的，所以在执行彻底删除操作时需要自下而上去调用</p>
<blockquote>
<h4 id="如何解决-3"><a href="#如何解决-3" class="headerlink" title="如何解决"></a>如何解决</h4></blockquote>
<p><strong>通过MQ实现自下而上的消息通信，而避免依赖耦合</strong></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../image/image-20240923163408034.png" alt="image-20240923163408034"></p>
<blockquote>
<h4 id="代码实现-3"><a href="#代码实现-3" class="headerlink" title="代码实现"></a>代码实现</h4></blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title function_">erase</span><span class="params">(<span class="type">long</span> id)</span> &#123;</span><br><span class="line">        <span class="type">RecycleBin</span> <span class="variable">recycleBin</span> <span class="operator">=</span> getById(id);</span><br><span class="line">        <span class="keyword">if</span> (recycleBin == <span class="literal">null</span>) &#123;</span><br><span class="line">            <span class="keyword">throw</span> <span class="keyword">new</span> <span class="title class_">BusinessException</span>(ErrorCode.RECYCLE_BIN_FILE_NOT_EXIST);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="type">boolean</span> <span class="variable">removeSuccess</span> <span class="operator">=</span> removeById(id);</span><br><span class="line">        <span class="keyword">if</span> (removeSuccess) &#123;</span><br><span class="line">            log.info(<span class="string">&quot;recycleBin were erased successfully，id：&#123;&#125;&quot;</span>, id);</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            log.info(<span class="string">&quot;recycleBin were erased failed，id：&#123;&#125;&quot;</span>, id);</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 发送Mq消息,让Application层彻底删除文件</span></span><br><span class="line">        rocketProducerService.send(rocketmqTopicRecycleBinNotification,rocketmqTagErase,JsonUtil.objToMap(recycleBin));</span><br><span class="line">        log.info(<span class="string">&quot;send erase message recycleBinMessage:&#123;&#125;&quot;</span>,JsonUtil.objToMap(recycleBin));</span><br><span class="line">        <span class="comment">// 同步写入recycle_opt_log</span></span><br><span class="line">        recycleOptLogService.saveRecycleOptLog(recycleBin,RecycleOptType.ERASE.getValue());</span><br><span class="line"></span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>



<blockquote>
<h4 id="问题思考-3"><a href="#问题思考-3" class="headerlink" title="问题思考"></a>问题思考</h4></blockquote>
<h3 id="ZLMediaKit"><a href="#ZLMediaKit" class="headerlink" title="ZLMediaKit"></a>ZLMediaKit</h3><p>基于<code>ZLMediaKit</code> 流服务器以及<strong>哔哩哔哩</strong>开源技术<code>flv.js</code> 实现网页视频实时播放，时延低至直播标准</p>
<blockquote>
<h4 id="问题背景-4"><a href="#问题背景-4" class="headerlink" title="问题背景"></a>问题背景</h4></blockquote>
<p><em>所谓远程实验平台，其解决问题的核心就是用摄像头监控单片机在我们执行操作时候的反应，用户可以通过电脑在宿舍操作的方式完成电子实验</em></p>
<p>根据要求我们需要实现浏览器解析出流媒体视频对实验设备状态的高效监控，现有一个方案是采取海康原生的SDK进行开发，但是这样需要去花时间成本去学习他自己定义的API，而且如果需要更换其他品牌的摄像头就无法使用了。还有个问题是前端选型了bilibili的<code>flv.js</code>技术，只能接收flv格式的视频流，他是基于RTMP的，而海康摄像头传输的是RTSP内容，需要做转换</p>
<blockquote>
<h4 id="如何解决-4"><a href="#如何解决-4" class="headerlink" title="如何解决"></a>如何解决</h4></blockquote>
<p>基于<code>ZLMediaKit</code>高性能流服务器代理</p>
<ul>
<li>流服务器可以实现对<code>RTSP</code>格式流媒体文件向基于<code>RTMP</code>的flv流媒体文件转化</li>
<li>基于流服务器代理视频流可以屏蔽摄像头平台的差异，适配不同格式的视频流</li>
<li>部署流服务器集群，采用最小连接算法，每个流媒体服务代理一定量的连接，保障视频流稳定的同时、也合理利用率服务器资源</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../image/image-20240925150308577.png" alt="image-20240925150308577"></p>
<blockquote>
<h4 id="代码实现-4"><a href="#代码实现-4" class="headerlink" title="代码实现"></a>代码实现</h4></blockquote>
<p><strong>前端实现</strong></p>
<ol>
<li>将摄像头注册在流服务器</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">//将摄像头注册在流服务器，输出视频流</span></span><br><span class="line"><span class="keyword">function</span> <span class="title function_">getStreamUrl</span>(<span class="params"></span>) &#123;</span><br><span class="line">        $.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">            <span class="attr">url</span>: <span class="string">&#x27;/dev-api/system/config/configKey/camera.request.ip&#x27;</span>, <span class="comment">//获取camera本身的连接信息</span></span><br><span class="line">            <span class="attr">beforeSend</span>: <span class="keyword">function</span> (<span class="params">request</span>) &#123;</span><br><span class="line">                request.<span class="title function_">setRequestHeader</span>(<span class="string">&quot;Authorization&quot;</span>, <span class="string">&quot;Bearer &quot;</span> + <span class="title function_">getCookie</span>(<span class="string">&quot;Admin-Token&quot;</span>));</span><br><span class="line">            &#125;,</span><br><span class="line">            <span class="attr">success</span>: <span class="function">(<span class="params">res</span>) =&gt;</span> &#123;</span><br><span class="line">                <span class="comment">// 生成唯一标识符</span></span><br><span class="line">                <span class="keyword">const</span> streamId = <span class="string">`<span class="subst">$&#123;getParams(<span class="string">&quot;orderNum&quot;</span>)&#125;</span><span class="subst">$&#123;getParams(<span class="string">&quot;cameraNum&quot;</span>)&#125;</span>`</span>;</span><br><span class="line">                $.<span class="title function_">ajax</span>(&#123;</span><br><span class="line">                    <span class="attr">url</span>: <span class="string">`http://<span class="subst">$&#123;res.msg&#125;</span>:800/index/api/addStreamProxy`</span>,</span><br><span class="line">                    <span class="attr">data</span>: &#123;</span><br><span class="line">                        <span class="string">&quot;secret&quot;</span>: <span class="string">`Jj9JiJgR82NjRoSRYJQSsGtW2TPBEJrt`</span>,</span><br><span class="line">                        <span class="string">&quot;vhost&quot;</span>: <span class="string">`<span class="subst">$&#123;res.msg&#125;</span>`</span>,</span><br><span class="line">                        <span class="string">&quot;app&quot;</span>: <span class="string">&quot;live&quot;</span>,</span><br><span class="line">                        <span class="string">&quot;stream&quot;</span>: streamId,</span><br><span class="line">                        <span class="string">&quot;url&quot;</span>: <span class="string">&quot;rtsp://admin:&quot;</span> + <span class="string">`<span class="subst">$&#123;getParams(<span class="string">&quot;password&quot;</span>)&#125;</span>@<span class="subst">$&#123;getParams(<span class="string">&quot;ip&quot;</span>)&#125;</span>`</span></span><br><span class="line">                    &#125;,</span><br><span class="line">                    <span class="attr">success</span>: <span class="function">(<span class="params">response</span>) =&gt;</span> &#123;</span><br><span class="line">                        <span class="keyword">if</span> (response.<span class="property">code</span> != <span class="number">0</span>) &#123;</span><br><span class="line">                            <span class="variable language_">console</span>.<span class="title function_">log</span>(response);</span><br><span class="line">                            <span class="comment">//将失败的信息response.msg放进mainContainer，提示用户</span></span><br><span class="line">                            <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.center&#x27;</span>).<span class="property">innerHTML</span> = <span class="string">`&lt;h1&gt;注册流代理失败，请查看流服务器中错误信息，检查摄像头IP及帐号密码是否正确&lt;/h1&gt;`</span>;</span><br><span class="line">                            <span class="keyword">return</span>;</span><br><span class="line">                        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">                            <span class="comment">//将.center删掉</span></span><br><span class="line">                            <span class="variable language_">document</span>.<span class="title function_">querySelector</span>(<span class="string">&#x27;.center&#x27;</span>).<span class="property">style</span>.<span class="property">display</span> = <span class="string">&#x27;none&#x27;</span>;</span><br><span class="line">                            <span class="variable language_">console</span>.<span class="title function_">log</span>(response);</span><br><span class="line">                            <span class="comment">//输出视频流</span></span><br><span class="line">                            <span class="title function_">playStream</span>(res.<span class="property">msg</span>, streamId)</span><br><span class="line">                        &#125;</span><br><span class="line"></span><br><span class="line">                    &#125;</span><br><span class="line">                &#125;);</span><br><span class="line">                <span class="comment">// playStream(res.msg, streamId)</span></span><br><span class="line">            &#125;</span><br><span class="line">        &#125;);</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<ol start="2">
<li>输出视频流</li>
</ol>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">x <span class="keyword">var</span> timerId; <span class="comment">// 全局变量，存储定时器ID</span></span><br><span class="line"><span class="comment">/*</span></span><br><span class="line"><span class="comment">        输出视频流具体操作，每隔2分钟，重新获取一次视频流，</span></span><br><span class="line"><span class="comment">        这样可以确保在视频播放过程中，视频播放器始终处于活跃状态，从而避免因视频播放器故障而导致的视频播放中断而无法再启动。</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">    <span class="keyword">function</span> <span class="title function_">playStream</span>(<span class="params">configIP, streamId</span>) &#123;</span><br><span class="line">        <span class="keyword">if</span> (flvjs.<span class="title function_">isSupported</span>()) &#123;</span><br><span class="line">            <span class="keyword">var</span> videoElement = <span class="variable language_">document</span>.<span class="title function_">getElementById</span>(<span class="string">&#x27;videoElement&#x27;</span>);</span><br><span class="line">            <span class="keyword">var</span> flvPlayer = flvjs.<span class="title function_">createPlayer</span>(&#123;</span><br><span class="line">                <span class="attr">type</span>: <span class="string">&#x27;flv&#x27;</span>,</span><br><span class="line">                <span class="attr">url</span>: <span class="string">`http://<span class="subst">$&#123;configIP&#125;</span>:800/live/<span class="subst">$&#123;streamId&#125;</span>.flv`</span></span><br><span class="line">            &#125;);</span><br><span class="line">            flvPlayer.<span class="title function_">attachMediaElement</span>(flvPlayer);</span><br><span class="line">            flvPlayer.<span class="title function_">load</span>();</span><br><span class="line">            flvPlayer.<span class="title function_">play</span>();</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 清理旧的定时器</span></span><br><span class="line">            <span class="keyword">if</span> (timerId) &#123;</span><br><span class="line">                <span class="built_in">clearInterval</span>(timerId);</span><br><span class="line">            &#125;</span><br><span class="line"></span><br><span class="line">            <span class="comment">// 创建新的定时器</span></span><br><span class="line">            timerId = <span class="built_in">setInterval</span>(<span class="function">() =&gt;</span> &#123;</span><br><span class="line">                <span class="comment">// 停止播放</span></span><br><span class="line">                flvPlayer.<span class="title function_">pause</span>();</span><br><span class="line">                flvPlayer.<span class="title function_">unload</span>();</span><br><span class="line">                flvPlayer.<span class="title function_">detachMediaElement</span>();</span><br><span class="line">                <span class="comment">// 重新播放</span></span><br><span class="line">                <span class="title function_">playStream</span>(configIP, streamId)</span><br><span class="line">            &#125;, <span class="number">120000</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br></pre></td></tr></table></figure>

<p><strong>后端注册流的代理</strong></p>
<p>流程：注册成功会获得一个流媒体地址，前端<code>flv.js</code>利用这个地址来解析出我们所看到的直播画面</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment">    * 注册流代理</span></span><br><span class="line"><span class="comment">    */</span></span><br><span class="line">   <span class="meta">@Override</span></span><br><span class="line">   <span class="keyword">public</span> AjaxResult <span class="title function_">registerStreamProxy</span><span class="params">(String cameraIp, String vhost, String app, String stream, String url)</span> &#123;</span><br><span class="line">       log.info(<span class="string">&quot;为&quot;</span> + cameraIp + <span class="string">&quot;注册流代理&quot;</span>);</span><br><span class="line">       <span class="comment">// 流代理密钥</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">secret</span> <span class="operator">=</span> <span class="string">&quot;Jj9JiJgR82NjRoSRYJQSsGtW2TPBEJrt&quot;</span>;</span><br><span class="line"></span><br><span class="line">       <span class="comment">// 流代理请求参数,param: secret=Jj9JiJgR82NjRoSRYJQSsGtW2TPBEJrt&amp;vhost=192.168.0.120&amp;app=live&amp;stream=113&amp;url=rtsp://admin:hzyjy123@192.168.0.170</span></span><br><span class="line">       <span class="type">String</span> <span class="variable">param</span> <span class="operator">=</span> <span class="string">&quot;secret=&quot;</span> + secret + <span class="string">&quot;&amp;vhost=&quot;</span> + vhost + <span class="string">&quot;&amp;app=&quot;</span> + app + <span class="string">&quot;&amp;stream=&quot;</span> + stream + <span class="string">&quot;&amp;url=&quot;</span> + url;</span><br><span class="line"></span><br><span class="line">       <span class="comment">// 判断缓存中是否有该cameraIp的key</span></span><br><span class="line">       <span class="keyword">if</span> (redisCache.hasKey((CacheConstants.CAMERA_REGISTER_KEY + cameraIp))) &#123;</span><br><span class="line">           <span class="type">String</span> <span class="variable">result</span> <span class="operator">=</span> redisCache.getCacheObject(CacheConstants.CAMERA_REGISTER_KEY + cameraIp);</span><br><span class="line">           log.info(<span class="string">&quot;缓存中有该cameraIp的keyresult: &quot;</span> + result);</span><br><span class="line">           <span class="keyword">return</span> AjaxResult.success(result);</span><br><span class="line">       &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">           log.info(<span class="string">&quot;缓存中没有该cameraIp的key,开始注册流代理&quot;</span>);</span><br><span class="line">           <span class="comment">//获取轮询算法得到的streamPort</span></span><br><span class="line">           <span class="type">String</span> <span class="variable">streamPort</span> <span class="operator">=</span> getStreamPortByPolling();</span><br><span class="line">           <span class="keyword">if</span> (streamPort == <span class="literal">null</span>) &#123;</span><br><span class="line">               <span class="keyword">return</span> AjaxResult.error(<span class="string">&quot;获取视频流服务器端口失败，请检测配置文件中流服务器端口是否启用&quot;</span>);</span><br><span class="line">           &#125;</span><br><span class="line">           <span class="comment">//注册流代理的url,postUrl = &quot;http://192.168.0.120:800/index/api/addStreamProxy&quot;;</span></span><br><span class="line">           <span class="comment">//将vhost和streamPort拼接到url中http://vhost:streamPort/index/api/addStreamProxy</span></span><br><span class="line">           <span class="type">String</span> <span class="variable">postUrl</span> <span class="operator">=</span> <span class="string">&quot;http://&quot;</span> + vhost + <span class="string">&quot;:&quot;</span> + streamPort + <span class="string">&quot;/index/api/addStreamProxy&quot;</span>;</span><br><span class="line">           <span class="keyword">try</span> &#123;</span><br><span class="line">               String response;</span><br><span class="line">               <span class="comment">//发送post请求,response: &#123;   &quot;code&quot; : 0,   &quot;data&quot; : &#123;      &quot;key&quot; : &quot;192.168.0.120/live/113&quot;   &#125;&#125;</span></span><br><span class="line">               <span class="keyword">try</span> &#123;</span><br><span class="line">                   response = HttpUtils.sendPost(postUrl, param);</span><br><span class="line">               &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">                   log.error(<span class="string">&quot;注册流代理失败，请检查参数配置中的IP是否正确&quot;</span>);</span><br><span class="line">                   <span class="keyword">return</span> AjaxResult.error(<span class="string">&quot;注册流代理失败，请检查参数配置中的IP是否正确&quot;</span>);</span><br><span class="line">               &#125;</span><br><span class="line"></span><br><span class="line">               <span class="comment">// 根据返回的response中的code判断是否注册成功</span></span><br><span class="line">               <span class="type">JSONObject</span> <span class="variable">responseJson</span> <span class="operator">=</span> JSONObject.parseObject(response);</span><br><span class="line">               <span class="type">Integer</span> <span class="variable">code</span> <span class="operator">=</span> responseJson.getInteger(<span class="string">&quot;code&quot;</span>);</span><br><span class="line">               <span class="keyword">if</span> (code == -<span class="number">1</span>) &#123;</span><br><span class="line">                   log.error(<span class="string">&quot;注册流代理失败，请查看流服务器中错误信息，检查摄像头IP及帐号密码是否正确&quot;</span>);</span><br><span class="line">                   <span class="keyword">return</span> AjaxResult.error(<span class="string">&quot;注册流代理失败，请查看流服务器中错误信息，检查摄像头IP及帐号密码是否正确&quot;</span>);</span><br><span class="line">               &#125;</span><br><span class="line"></span><br><span class="line">               <span class="comment">//解析response,获取streamData</span></span><br><span class="line">               <span class="type">String</span> <span class="variable">streamData</span> <span class="operator">=</span> responseJson.getJSONObject(<span class="string">&quot;data&quot;</span>).getString(<span class="string">&quot;key&quot;</span>);</span><br><span class="line"></span><br><span class="line">               <span class="comment">//将streamData拼接成http://vhost:streamPort/live/113</span></span><br><span class="line">               String[] split = streamData.split(<span class="string">&quot;/&quot;</span>);</span><br><span class="line">               <span class="type">String</span> <span class="variable">streamUrl</span> <span class="operator">=</span> split[<span class="number">0</span>] + <span class="string">&quot;:&quot;</span> + streamPort + <span class="string">&quot;/&quot;</span> + split[<span class="number">1</span>] + <span class="string">&quot;/&quot;</span> + split[<span class="number">2</span>];</span><br><span class="line"></span><br><span class="line">               <span class="comment">//将cameraIp和streamUrl写入缓存</span></span><br><span class="line">               redisCache.setCacheObject(CacheConstants.CAMERA_REGISTER_KEY + cameraIp, streamUrl, <span class="number">30</span>, TimeUnit.MINUTES);</span><br><span class="line"></span><br><span class="line">               log.info(<span class="string">&quot;注册流代理成功streamUrl: &quot;</span> + streamUrl);</span><br><span class="line">               <span class="keyword">return</span> AjaxResult.success(streamUrl);</span><br><span class="line">           &#125; <span class="keyword">catch</span> (Exception e) &#123;</span><br><span class="line">               log.error(<span class="string">&quot;注册流代理失败，请检查参数配置中的IP是否正确&quot;</span>);</span><br><span class="line">               <span class="keyword">return</span> AjaxResult.error(<span class="string">&quot;注册流代理失败，请检查参数配置中的IP是否正确&quot;</span>);</span><br><span class="line">           &#125;</span><br><span class="line"></span><br><span class="line">       &#125;</span><br><span class="line">   &#125;</span><br></pre></td></tr></table></figure>



<blockquote>
<h4 id="问题思考-4"><a href="#问题思考-4" class="headerlink" title="问题思考"></a>问题思考</h4></blockquote>
<p><em><strong>RTSP与RTMP的区别？</strong></em></p>
<p>RTSP 更加注重对流媒体的<strong>控制</strong>，而 RTMP 则更加专注于<strong>实时性</strong>和<strong>低延迟</strong>的数据传输。</p>
<h3 id="Lua-和-Redisson"><a href="#Lua-和-Redisson" class="headerlink" title="Lua 和 Redisson"></a>Lua 和 Redisson</h3><blockquote>
<p><strong>Redis缓存热点数据优化</strong></p>
<p><code>QPS</code>：1000 | <code>QPS</code>（未用Redis）：71</p>
<p><strong>Lua+Redisson性能：</strong></p>
<p><code>TPS</code>：100</p>
</blockquote>
<ul>
<li><p>Redisson：保障同一时间只有一个线程可以访问特定资源</p>
<blockquote>
<p>用于布隆过滤器来避免缓存击穿</p>
</blockquote>
</li>
<li><p>Lua：保障<strong>查库存、判断库存是否足够、减库存</strong>是同时操作</p>
</li>
</ul>
<p><strong>双重保障</strong>：</p>
<ul>
<li><p>分布式锁提供了第一层的并发控制，确保在同一时间只有一个线程可以访问特定资源。</p>
</li>
<li><p>Lua 脚本则提供了第二层的<strong>原子性</strong>保障，确保在获取锁后，读取库存、判断库存是否足够、减少库存这三个步骤是原子的，不会被其他操作打断</p>
<blockquote>
<ul>
<li>避免三个操作被阻塞打断（JVM阻塞）<ul>
<li>就比如我一开始查询出来库存是足够的，在减少库存的时候发生了JVM阻塞，这个时候库存可能被修改了，这会导致扣除失误的操作</li>
</ul>
</li>
<li>每个Redis命令都需要一次网络往返，Lua保障只需要一个命令，吞吐量大</li>
<li><strong>减少锁的竞争：</strong>一个命令中完成多个操作，减少了锁的竞争，提高了系统的吞吐量</li>
<li><strong>可靠性：</strong>网络中断或客户端异常退出，Lua 脚本也能保证操作的完整性，因为它是作为一个整体在 Redis 服务器上执行的</li>
</ul>
</blockquote>
</li>
</ul>
<h3 id="Liquibase"><a href="#Liquibase" class="headerlink" title="Liquibase"></a>Liquibase</h3><h3 id="JSerialComm"><a href="#JSerialComm" class="headerlink" title="JSerialComm"></a>JSerialComm</h3><h2 id="经典提问方式"><a href="#经典提问方式" class="headerlink" title="经典提问方式"></a>经典提问方式</h2><h3 id="谈一谈XXX的理解"><a href="#谈一谈XXX的理解" class="headerlink" title="谈一谈XXX的理解"></a>谈一谈XXX的理解</h3><blockquote>
<p>谈一谈对设计模式的理解</p>
</blockquote>
<ol>
<li>解释XXX<strong>是什么</strong>、为了<strong>解决什么问题</strong></li>
<li>根据问题不同选择不同的回答，联想核心知识点<ul>
<li>如果XXX就是一个技术栈，只需要回答<strong>原理</strong>、<strong>应用场景</strong></li>
<li>如果XXX是一个多概念的统述，展开XXX具体<strong>分类</strong>和<strong>应用场景</strong></li>
</ul>
</li>
<li>归纳<strong>优缺点</strong>，缺点可以对比论述</li>
</ol>
<h3 id="XXX的原理"><a href="#XXX的原理" class="headerlink" title="XXX的原理"></a>XXX的原理</h3><blockquote>
<p>MySQL实现事务隔离机制的原理</p>
</blockquote>
<ol>
<li>简述XXX<strong>是什么</strong>、为了<strong>解决什么问题</strong></li>
<li>原理分点论述</li>
</ol>
<h3 id="XXX和YYY的区别"><a href="#XXX和YYY的区别" class="headerlink" title="XXX和YYY的区别"></a>XXX和YYY的区别</h3><blockquote>
<p>Mybatis-plus和Mybatis的区别</p>
</blockquote>
<ol>
<li>简述XXX和YYY的分别是什么，有什么<strong>共同点</strong></li>
<li>区别：<strong>原理&#x2F;特性-<strong>对比</strong>优缺点</strong>-<strong>适用场景</strong></li>
</ol>
<blockquote>
<ul>
<li><strong>一句话对比</strong>：<br>“React推崇函数式编程和单向数据流，而Vue采用渐进式设计，允许选项式API和组合式API并存。”</li>
<li><strong>加分回答</strong>：<br>“这种差异导致React更适合大型应用的状态管理，而Vue能快速适配小型项目。”</li>
</ul>
</blockquote>
<h3 id="为什么要XXX"><a href="#为什么要XXX" class="headerlink" title="为什么要XXX"></a>为什么要XXX</h3><blockquote>
<ul>
<li>为什么要自定义TCP</li>
<li>为什么要拆分Service和Impl</li>
</ul>
</blockquote>
<p>原来的痛点 —&gt; XXX如何解决</p>
<h3 id="XXX的发生原因"><a href="#XXX的发生原因" class="headerlink" title="XXX的发生原因"></a>XXX的发生原因</h3><blockquote>
<p>TCP收到数据包不一致的原因</p>
</blockquote>
<h2 id="AI面试题"><a href="#AI面试题" class="headerlink" title="AI面试题"></a>AI面试题</h2><blockquote>
<p><code>2024/3/15</code></p>
</blockquote>
<ol>
<li><p>谈谈InnoDB引擎中的锁 </p>
</li>
<li><p>说一说HashMap的扩容机制</p>
</li>
<li><p>UDP协议的特点有哪些？</p>
<blockquote>
<p>无连接，一对多，不阻塞，不可靠</p>
</blockquote>
</li>
<li><p>HTTPS协议非对称加密的过程？</p>
</li>
</ol>
<blockquote>
<p>client请求服务端（指定SSL版本和加密组件）<br>server返回CA证书+公钥<br>client用机构公钥认证server返回的CA证书上的签名是否正确<br>client生成一个密钥R，用公钥对密钥R加密发送给server server用服务器的私钥解密获取密钥R<br>后续通信都是采用密钥R进行加密</p>
</blockquote>
<h2 id="江西南昌：面试"><a href="#江西南昌：面试" class="headerlink" title="江西南昌：面试"></a>江西南昌：面试</h2><blockquote>
<p><code>2024/3/31</code></p>
</blockquote>
<ol>
<li><p>接口幂等性</p>
</li>
<li><p>前端防抖</p>
</li>
<li><p>说一下Spring</p>
</li>
<li><p>Bean的生命周期</p>
<blockquote>
<p>实例化 ——&gt; 属性赋值(IOC自动管理依赖关系)——&gt; 初始化（@PostConstruct 初始化操作）——&gt; 销毁（@PreDestroy）</p>
</blockquote>
</li>
<li><p>HashMap的原理</p>
</li>
<li><p>MySQL根据价格查询数据</p>
</li>
<li><p>查询数据总数</p>
<blockquote>
<p>select COUNT(*) from table</p>
</blockquote>
</li>
<li><p>做过的人生规划</p>
</li>
</ol>
<h2 id="亚信科技：面试"><a href="#亚信科技：面试" class="headerlink" title="亚信科技：面试"></a>亚信科技：面试</h2><ol>
<li><p>如何理解的面向对象三大特性：继承、封装、多态</p>
<blockquote>
<ul>
<li>继承：子类继承父类可以对方法进行复用、扩展</li>
<li>封装：属性和方法封装在一起，相当于一个工具箱一样，外部不需要关心实现，只关心使用</li>
<li>多态：一个类，所延伸的多种形态；</li>
</ul>
</blockquote>
</li>
<li><p>JDK下有哪些常见的包</p>
</li>
<li><p>list、set、map区别</p>
</li>
<li><p>MySQL 删除的关键字：DROP、DELETE、TRUNCATE区别，（TRUNCATE关键字一点印象都没有。。。）</p>
</li>
<li><p>关于删除操作的实际应用（这里想问的是删除数据时要对数据进行备份。日志方面？）</p>
</li>
<li><p>Redis在项目中的实际应用</p>
</li>
<li><p>Redis持久化：AOF、RDB、混合模式</p>
</li>
<li><p>AOF文件过大怎么办？（AOF重写）</p>
</li>
<li><p>是否关注一些开源项目？</p>
</li>
<li><p>公司使用spark等一些大数据方面的框架是否有了解，是否愿意做相关方面的事情。</p>
</li>
</ol>
<p>对了，还问到了Redis 的set的底层数据结构以及如何通过Redis命令获取所有的元素（没答上来，说的是平时通过Java操作redis）</p>
<h2 id="亚信科技：笔试"><a href="#亚信科技：笔试" class="headerlink" title="亚信科技：笔试"></a>亚信科技：笔试</h2><ol>
<li><p>协程</p>
<blockquote>
<p>它被视为一种用户态的轻量级线程，拥有自己的寄存器上下文和栈。协程的切换与保存状态发生在其他地方，而不是CPU的栈里，这使其在切换时能保留上一次调用时的状态</p>
</blockquote>
</li>
<li><p>面向连接的协议</p>
<blockquote>
<p>面向连接的协议是一种网络协议，它依赖于发送方和接收器之间的显式通信和阻塞来管理双方的数据传输。这种协议要求在网络系统中的两台计算机之间发送数据之前，必须先建立一条连接。面向连接的网络类似于电话系统，在开始通信前必须先进行一次呼叫和应答。</p>
<ul>
<li>TCP（Transmission Control Protocol，传输控制协议）</li>
<li>SSL（Secure Sockets Layer，安全套接层）</li>
<li>TLS（Transport Layer Security，传输层安全性协议）</li>
</ul>
</blockquote>
</li>
<li><p>Spring配置上下文自动注入的注解</p>
<blockquote>
<p><strong>@SpringBootApplication</strong>包含的注解</p>
<ol>
<li><strong>@Configuration</strong>：这个注解用于指示一个类是一个配置类，它定义了一个或多个<code>@Bean</code>方法，用于创建和配置Spring应用程序上下文中的Bean。</li>
<li><strong>@EnableAutoConfiguration</strong>：这个注解用于启用Spring Boot的自动配置机制。Spring Boot会根据添加的jar依赖自动配置你的Spring应用。例如，如果你在classpath下有<code>spring-boot-starter-web</code>，Spring Boot会自动配置嵌入式Servlet容器（如Tomcat），并配置Spring MVC。</li>
<li><strong>@ComponentScan</strong>：这个注解的作用是将主配置类(@SpringBootApplication标注的类)所在包以及子包里面的所有组件扫描并加载到Spring的容器中。这就是为什么在利用Spring Boot进行开发时，无论是Controller还是Service的路径都是与主配置类同级或者次级的原因。</li>
</ol>
</blockquote>
</li>
<li><p>Redis</p>
</li>
</ol>
<blockquote>
<ul>
<li>RDB</li>
<li>AOF</li>
<li>分区与集群（master与slave）</li>
</ul>
</blockquote>
<ol start="5">
<li><p>Zookeeper</p>
</li>
<li><p>事务隔离与并发控制</p>
</li>
<li><p>模糊查询的方式</p>
<blockquote>
<p><strong>使用LIKE与SQL通配符进行模糊查询</strong>：</p>
<ul>
<li><code>%</code>：表示任意0个或多个字符。它可以匹配<strong>任意类型和长度</strong>的字符。在某些情况下，如果查询的是中文，可能需要使用两个百分号（%%）来表示。例如，<code>SELECT * FROM [user] WHERE u_name LIKE &#39;%三%&#39;</code> 会返回所有<code>u_name</code>字段中包含“三”的记录。</li>
<li><code>_</code>：表示任意单个字符。它用于匹配<strong>单个</strong>任意字符。</li>
<li><code>[ ]</code>：表示<strong>括号内所列字符中的一个</strong>。你可以指定一个字符、字符串或范围，要求所匹配的对象为它们中的任一个。</li>
<li><code>[^ ]</code>：表示<strong>不在括号所列之内的单个字符</strong>。它的取值和<code>[ ]</code>相同，但它要求所匹配对象为指定字符以外的任一个字符。</li>
</ul>
</blockquote>
</li>
<li><p>泛型在编译时期</p>
<blockquote>
<p>泛型在编译时期主要起到类型检查和类型推断的作用。编译器会利用泛型类型信息来保证类型安全，并在生成字节码之前清除这些类型信息。<strong>这种实现技术称为擦除（erasure）</strong></p>
<p>具体来说，在编译时，所有的泛型类型都会被擦除成原始类型。例如，一个<code>List&lt;String&gt;</code>类型的变量，在编译时会被擦除成<code>List</code>类型。这样做的好处是可以使泛型代码与旧的非泛型代码兼容。然而，擦除机制也带来了一些问题，比如无法在运行时获取泛型参数的具体类型。为了解决这个问题，Java采用了泛型补偿机制，编译器会自动插入一些类型转换代码（通常称为桥方法），以保证程序的正确性。</p>
</blockquote>
</li>
<li><p>Kafaka</p>
</li>
<li><p>Drop 和 Delete</p>
<blockquote>
<figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">#<span class="number">1.</span> <span class="keyword">DROP</span>用于删除表和数据库</span><br><span class="line"><span class="keyword">DROP</span> <span class="keyword">TABLE</span> `<span class="keyword">table</span>`;</span><br><span class="line"><span class="keyword">DROP</span> DATABASE test;</span><br><span class="line">#<span class="number">2.</span> <span class="keyword">Delete</span>用于删除字段，行数据</span><br><span class="line"><span class="keyword">DELETE</span> <span class="keyword">FROM</span> table_name <span class="keyword">WHERE</span> <span class="keyword">condition</span>;</span><br><span class="line">#<span class="number">3.</span> <span class="keyword">TRUNCATE</span> 用于快速删除表中的所有行，而不记录每行的删除操作。</span><br><span class="line">#与<span class="keyword">DELETE</span>不同，<span class="keyword">TRUNCATE</span> 是一个不可回滚的操作，一旦执行，删除的行就无法恢复</span><br><span class="line"><span class="keyword">TRUNCATE</span> <span class="keyword">TABLE</span> table_name;</span><br></pre></td></tr></table></figure>
</blockquote>
</li>
<li><p>java基础</p>
</li>
</ol>
<blockquote>
<ul>
<li>enum√</li>
<li>重载和重写√</li>
<li>ArrayList与Vector√</li>
</ul>
<blockquote>
<p>在Java中，<code>ArrayList</code>和<code>Vector</code>都是实现了<code>List</code>接口的类，它们都可以用来存储动态数组的元素。尽管它们在许多方面非常相似，但它们在性能、同步和迭代方面存在一些重要的差异。以下是关于<code>ArrayList</code>和<code>Vector</code>的一些主要区别：</p>
<ol>
<li>同步性<ul>
<li><code>ArrayList</code>是非同步的，这意味着在多线程环境中，如果没有适当的同步，它可能会导致并发修改异常。</li>
<li><code>Vector</code>是同步的，它的每个方法都是<strong>同步</strong>的，这意味着它对于多线程环境是安全的。然而，这种同步性也带来了性能开销。</li>
</ul>
</li>
<li>性能<ul>
<li>由于<code>Vector</code>的每个方法都是同步的，因此在单线程环境中，<code>ArrayList</code>通常比<code>Vector</code>具有更好的性能。</li>
<li>如果在多线程环境中使用<code>ArrayList</code>，则需要额外的同步措施，这可能会降低性能。</li>
</ul>
</li>
<li>增长因子<ul>
<li>当<code>ArrayList</code>需要增长时，它通常会增加到原来的1.5倍大小。</li>
<li><code>Vector</code>有一个可配置的增长因子，默认是增加一倍的大小。可以通过<code>Vector</code>的<strong>构造函数设置这个增长因子</strong>。</li>
</ul>
</li>
</ol>
</blockquote>
<ul>
<li>同步方法√</li>
<li>装箱拆箱√：<strong>基本数据类型和其对应的包装类之间进行自动转换</strong></li>
</ul>
</blockquote>
<h2 id="哔哩哔哩：笔试"><a href="#哔哩哔哩：笔试" class="headerlink" title="哔哩哔哩：笔试"></a>哔哩哔哩：笔试</h2><blockquote>
<p><code>2024/4/28</code></p>
</blockquote>
<ol>
<li><p>分区表，问mysql很深</p>
</li>
<li><p>二叉树遍历</p>
</li>
<li><p>DBMS</p>
<blockquote>
<ul>
<li><strong>数据库</strong>（Data Base，DB)是按一定结构组织并长期存储在计算机内的、可共享的大量数据的有机集合。其实就是存放数据的仓库，只不过这些数据存在一定的关联、并按一定的格式存放在计算机上。例如，把一个学校的学生、课程、学生成绩等数据有序的组织并存放在计算机内，就可以构成一个数据库。</li>
<li><strong>数据库管理系统</strong>（Data Base Management System，DBMS）是管理和维护数据库的系统软件。常用的DBMS有：Oracle、DB2、SqlServer、MySql等</li>
<li><strong>数据库管理员</strong>（Date Base Administrator ,DBA)管理操作数据库人员。</li>
<li><strong>数据库系统</strong>（Data Base System，DBS）是实现有组织的、动态地存储大量关联数据、方便多用户访问的计算机软件、硬件和数据资源组成的系统，简化为：DBS&#x3D;计算机系统（硬件、软件平台、人）+DBMS+DB</li>
</ul>
</blockquote>
</li>
<li><p>希尔排序</p>
</li>
<li><p>LBA</p>
<blockquote>
<ul>
<li><strong>LBA</strong>（Logical Block Address）：数据存储装置中用来表示数据所在位置的信息，最常用于对硬盘的数据位置表示。LBA可以指代某个数据区块的地址，可以理解为我们使用的快递地址，xxx省xxx市xxx区xxx路xxx号。</li>
<li><strong>PBA</strong>（Physics Block Address）：数据存储装置中用来表示数据实际存放的物理地址，可以类似理解为物理地址的经纬度。</li>
</ul>
</blockquote>
</li>
<li><p>ThreadLocal</p>
</li>
<li><p>JVM调优</p>
</li>
</ol>
<blockquote>
<ul>
<li>jstack</li>
<li>jstart</li>
</ul>
</blockquote>
<h2 id="杭州合思：面试"><a href="#杭州合思：面试" class="headerlink" title="杭州合思：面试"></a>杭州合思：面试</h2><blockquote>
<p><code>2024/7/30</code></p>
<p>自我介绍没有太大问题，此次面试最主要的是自己底子不够牢靠，记过的想不起来了，而且讲的时候突出不了重点，对于这次面试，我提出对以下几点未来需要注意的地方：</p>
<ul>
<li><strong>不要好高骛远</strong>：目前的实力离大厂真的还有很长的一段距离，基础知识不牢靠，无算法经验，而且表达还突出不了重点，不善组织语言</li>
<li>总结一下每个<strong>项目的项目亮点和所遇到的困难</strong>，再记录一下是怎么解决的，并用话说出来</li>
<li><strong>提高表达能力，说话戳重点</strong></li>
<li>用心准备八股到8月10号再开始投</li>
<li>目前只准备准备东软的笔试面试就可以了，主要还是要花时间提升自己的<strong>硬实力</strong></li>
</ul>
</blockquote>
<ol>
<li><p>自我介绍</p>
</li>
<li><p>说一下自己所有项目中做的最好的，并说出项目难点亮点</p>
</li>
<li><p>SQL优化经验</p>
<blockquote>
<ol>
<li><p>某个字段查询次数多，可以使用覆盖索引，减少回表操作</p>
</li>
<li><p>只为那些经常出现在<code>WHERE</code>子句、<code>JOIN</code>条件或<code>ORDER BY</code>子句中的列创建索引</p>
</li>
<li><p>避免一些索引失效的情况</p>
</li>
</ol>
</blockquote>
</li>
<li><p>select for update 用到什么锁</p>
</li>
<li><p>如何评价自己</p>
</li>
<li><p>如何确保IO资源关闭（try-with-resources）</p>
<blockquote>
<p>资源：IO资源（File）、Socket资源</p>
<p>[使用try-with-resources确保资源正确关闭的深入探讨_使用 try-with-resources 确保 resultset 资源被正确关闭-CSDN博客](<a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_39973810/article/details/136649926#:~:text=%E5%8F%AA%E8%A6%81%E8%B5%84%E6%BA%90%E5%AE%9E%E7%8E%B0%E4%BA%86">https://blog.csdn.net/weixin_39973810/article/details/136649926#:~:text=只要资源实现了</a> java.lang.AutoCloseable 或 java.io.Closeable,接口，就可以使用此语句。 它确保在语句结束时自动调用 close() 方法，无论是正常完成还是异常终止。)</p>
<p><code>java 7</code> 以后只要实现了<code>java.lang.AutoCloseable</code>或<code>java.io.Closeable</code>的接口IO资源，在<code>try-catch</code>语句中会自动关闭</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">try</span> (<span class="type">Scanner</span> <span class="variable">scanner</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">Scanner</span>(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;testRead.txt&quot;</span>));</span><br><span class="line"><span class="type">PrintWriter</span> <span class="variable">writer</span> <span class="operator">=</span> <span class="keyword">new</span> <span class="title class_">PrintWriter</span>(<span class="keyword">new</span> <span class="title class_">File</span>(<span class="string">&quot;testWrite.txt&quot;</span>))) &#123;</span><br><span class="line"><span class="keyword">while</span> (scanner.hasNext()) &#123;</span><br><span class="line">writer.print(scanner.nextLine());</span><br><span class="line">&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
<li><p>有没有自己部署过项目，知道k8s吗</p>
</li>
<li><p>数据库表中隐私信息加密解密</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/FoundMe/article/details/134394935">如何在MySQL中进行数据的加密和解密存储_数据库加密和解密存储-CSDN博客</a></p>
<p>注册时加密保存密码 —&gt; 登录时把输入的密码加密比对数据库里面的加密的密码是否相同</p>
<p><strong><a target="_blank" rel="noopener" href="https://blog.csdn.net/u012888704/article/details/107406374">SpringSecurity默认加密器BCryptPasswordEncoder</a></strong><br>spring security中的<code>BCryptPasswordEncoder</code>方法采用<code>SHA-256 + 随机盐 + 密钥</code>对密码进行加密。<strong>SHA系列是Hash算法，不是加密算法，使用加密算法意味着可以解密（这个与编码&#x2F;解码一样），但是采用Hash处理，其过程是不可逆的</strong>。</p>
<ul>
<li><p>（1）<strong>加密</strong>(encode)：注册用户时，使用SHA-256+随机盐+密钥把用户输入的密码进行hash处理，得到密码的hash值，然后将其存入数据库中。</p>
</li>
<li><p>（2）<strong>密码匹配</strong>(matches)：用户登录时，密码匹配阶段并没有进行密码解密（因为密码经过Hash处理，是不可逆的），而是使用相同的算法把用户输入的密码进行hash处理，得到密码的hash值，然后将其与从数据库中查询到的密码hash值进行比较。如果两者相同，说明用户输入的密码正确。</p>
</li>
</ul>
</blockquote>
</li>
<li><p>解释策略模式在项目中的使用</p>
</li>
<li><p>Git团队协作经验</p>
</li>
<li><p>注解的原理</p>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://www.cnblogs.com/yangming1996/p/9295168.html">JAVA 注解的基本原理 - Single_Yam - 博客园 (cnblogs.com)</a></p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../image/image-20240731105904546.png" alt="image-20240731105904546"></p>
<p>『元注解』是用于修饰注解的注解</p>
<p>JAVA 中有以下几个『元注解』：</p>
<ul>
<li>@Target：注解的作用目标</li>
<li>@Retention：注解的生命周期</li>
<li>@Documented：注解是否应当被包含在 JavaDoc 文档中</li>
<li>@Inherited：是否允许子类继承该注解</li>
</ul>
<p>处理：</p>
<ul>
<li>编译时扫描处理，如果Retention为Runtime类型则用map保存在虚拟机中</li>
<li>反射处理，实际上会生成一个代理类继承注解接口并重写所有方法，所有注解的方法都是基于这个代理类做调用的</li>
</ul>
</blockquote>
</li>
<li><p>泛型原理</p>
</li>
<li><p>exception分类</p>
<p><a target="_blank" rel="noopener" href="https://blog.csdn.net/mk1843109092/article/details/102768350">异常Exception 主要分类 异常的捕获与抛出 自定义异常_获取exception异常类型-CSDN博客</a></p>
</li>
<li><p>java jdk 8 的新特性</p>
</li>
</ol>
<blockquote>
<p><a target="_blank" rel="noopener" href="https://www.runoob.com/java/java8-new-features.html">Java 8 新特性 |菜鸟教程 (runoob.com)</a></p>
<blockquote>
<p><code>Lambda表达式</code>、<code>流处理</code>、<code>Default方法</code>、<code>Optional类</code></p>
</blockquote>
<ul>
<li><p><strong>Lambda 表达式</strong> − Lambda 允许把函数作为一个方法的参数（函数作为参数传递到方法中）。</p>
</li>
<li><p><strong>方法引用</strong> − 方法引用提供了非常有用的语法，可以直接引用已有Java类或对象（实例）的方法或构造器。与lambda联合使用，方法引用可以使语言的构造更紧凑简洁，减少冗余代码。</p>
<blockquote>
<p>通常配合foreach使用，当指定方法时，有参数会自动注入进去</p>
</blockquote>
</li>
<li><p><strong>默认方法</strong> − 默认方法就是一个在接口里面有了一个实现的方法。default 方法</p>
</li>
<li><p><strong>新工具</strong> − 新的编译工具，如：Nashorn引擎 jjs、 类依赖分析器jdeps。</p>
</li>
<li><p><strong>Stream API</strong> −新添加的Stream API（java.util.stream） 把真正的函数式编程风格引入到Java中。</p>
</li>
<li><p><strong>日期时间 API</strong> − 加强对日期与时间的处理。</p>
</li>
<li><p><strong>Optional 类</strong> − Optional 类已经成为 Java 8 类库的一部分，用来解决空指针异常。</p>
<p><a target="_blank" rel="noopener" href="https://www.runoob.com/java/java8-optional-class.html">Java 8 Optional 类 | 菜鸟教程 (runoob.com)</a> <em>Optional类是一个容器，简化了if判断的操作，0..方便避免了空指针异常</em></p>
</li>
<li><p><strong>Nashorn， JavaScript 引擎</strong> − Java 8提供了一个新的Nashorn javascript引擎，它允许我们在JVM上运行特定的javascript应用。</p>
</li>
</ul>
</blockquote>
<h2 id="北京慧策：笔试"><a href="#北京慧策：笔试" class="headerlink" title="北京慧策：笔试"></a>北京慧策：笔试</h2><blockquote>
<p><strong>算法</strong></p>
</blockquote>
<ul>
<li>最长回文字符串（[leetCode](<a target="_blank" rel="noopener" href="https://leetcode.cn/problems/longest-palindromic-substring/description/?envType=study-plan-v2&envId=top-100-liked">5. 最长回文子串 - 力扣（LeetCode）</a>)   <a target="_blank" rel="noopener" href="https://blog.csdn.net/tiankong_12345/article/details/102018257">中心扩展算法</a>）</li>
<li>字符串数组公共前缀</li>
</ul>
<blockquote>
<p><strong>八股文</strong></p>
</blockquote>
<ul>
<li>双桥委派机制，好处，为什么打破</li>
<li>数组扩容为什么选择1.5倍</li>
</ul>
<blockquote>
<p>1.5 的扩容因子在空间利用率和性能之间找到了一个平衡点</p>
</blockquote>
<ul>
<li>TCP握手环节</li>
</ul>
<h2 id="上海衍因：面试"><a href="#上海衍因：面试" class="headerlink" title="上海衍因：面试"></a>上海衍因：面试</h2><ul>
<li>SQL优化</li>
<li>select * 的理解</li>
<li>单通道和双通道的概念</li>
<li>自我介绍 + 项目 + 未来规划</li>
<li>TCP&#x2F;IP以及网络模型</li>
<li>如何得出一个二叉树的层数</li>
<li>Redis使用场景（分布式ID，地理坐标，缓存穿透）</li>
<li>如何保证Redis和MySQL的数据一致性</li>
<li>JNA和JNI的不同点</li>
<li>工厂 + 适配器模式的使用与理解</li>
</ul>
<p>二面：</p>
<ul>
<li><p>stringbuffer，stringbuilder，string的区别</p>
<blockquote>
<p>string不可变，其他均可变，stringbuffer线程安全，stringbuilder线程不安全</p>
</blockquote>
</li>
<li><p>创建对象的方式</p>
</li>
</ul>
<blockquote>
<ul>
<li>反射</li>
<li>new 构造器</li>
<li>工厂模式（String.valueOf(“字符串”)）</li>
<li>克隆clone()</li>
</ul>
</blockquote>
<ul>
<li>计算两个节点的公共父节点</li>
<li>反射是否调用了构造方法（可以调用）</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">Constructor&lt;?&gt;[] constructors = MyClass.class.getConstructors(); <span class="keyword">for</span> (Constructor&lt;?&gt; constructor : constructors) &#123; <span class="type">Object</span> <span class="variable">instance</span> <span class="operator">=</span> constructor.newInstance(arg1, arg2); <span class="comment">// 根据构造方法参数列表提供对应的参数 &#125;</span></span><br></pre></td></tr></table></figure>

<ul>
<li>哪些集合是线程安全的</li>
</ul>
<blockquote>
<p><strong>线程安全集合</strong></p>
<p><em>synchronized同步</em>：</p>
<ul>
<li>Vector：只要是关键性的操作，方法前面都加了synchronized关键字，来保证线程的安全性</li>
<li>Hashtable：使用了synchronized关键字，所以相较于Hashmap是线程安全的。</li>
<li>Stack：栈，也是线程安全的，继承于Vector。</li>
</ul>
<p><em>锁分段</em>：</p>
<ul>
<li>ConcurrentHashMap:使用锁分段技术确保线性安全，是一种高效但是线程安全的集合。</li>
</ul>
</blockquote>
<h2 id="北京京东：笔试"><a href="#北京京东：笔试" class="headerlink" title="北京京东：笔试"></a>北京京东：笔试</h2><p><strong>选择题：</strong></p>
<ul>
<li><p><strong>数据结构与算法</strong>：平衡二叉树、小根堆、图（有向无环图）、完全二叉树、判断时间空间复杂度</p>
<blockquote>
<ul>
<li><strong>平衡二叉树</strong>：一种二叉搜索树，在任何节点处，左子树的高度与右子树的高度最多相差1。常见的实现有AVL树和红黑树。</li>
<li><strong>小根堆</strong>：一种特殊的完全二叉树，其中每个节点的值都小于或等于其子节点的值。</li>
<li><strong>图（有向无环图）</strong>：表示对象及其关系的数据结构，如果是一个有向无环图(DAG)，则意味着图中没有任何路径可以形成一个循环。</li>
<li><strong>完全二叉树</strong>：是由满二叉树而引出来的，若设二叉树的<code>深度为h</code>，<code>除第 h 层外</code>，<code>其它各层 (1～h-1) 的结点数都达到最大个数(即1~h-1层为一个满二叉树)</code>，第 h 层所有的结点都连续集中在最左边，这就是完全二叉树。</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../image/image-20240901174735823.png" alt="image-20240901174735823"></p>
</blockquote>
</li>
<li><p><strong>JUC</strong>：进程的状态&#x2F;切换、sleep&#x2F;wait</p>
</li>
<li><p><strong>Java基础</strong>：HashMap、HashSet，TreeMap、TreeSet底层原理；</p>
</li>
<li><p><strong>程序设计</strong>：模板方法；备忘录模式</p>
</li>
<li><p><strong>数据库</strong>：SQL（Having）；关系型数据库概念</p>
</li>
<li><p><strong>计算机网络</strong>：状态码304 </p>
<blockquote>
<p><strong>状态码304</strong>：HTTP状态码，表示请求资源未修改，客户端可以继续使用缓存版本</p>
</blockquote>
</li>
</ul>
<p><strong>算法题：</strong></p>
<blockquote>
<p>动态规划，DFS，字符串类型</p>
</blockquote>
<h2 id="招商银行：笔试"><a href="#招商银行：笔试" class="headerlink" title="招商银行：笔试"></a>招商银行：笔试</h2><ul>
<li>桥接模式、状态模式</li>
<li>类什么时候被卸载</li>
<li>计算地址</li>
<li>所有的排序算法</li>
</ul>
<h2 id="中海达：面试"><a href="#中海达：面试" class="headerlink" title="中海达：面试"></a>中海达：面试</h2><ul>
<li>自我介绍</li>
<li>要你自己从校园经历、两段实习经历去讲解项目</li>
<li>索引优化、数据库三大范式</li>
<li>RocketMQ、Liqubase、WebSocket 、ZlMediaKit 在项目中的使用</li>
<li>Liqubase的理解，以及替代品</li>
<li>ZlMediaKit 具体的使用流程</li>
<li>最小连接算法在项目中的实现（负载均衡）</li>
<li>WebSocket 的理解</li>
<li>怎么了解到我们公司的</li>
<li>最近在看RocketMQ的什么书籍吗</li>
<li>反问：对我们应届生有什么建议？回答：考研</li>
</ul>
<blockquote>
<ul>
<li>每个流媒体服务器最多能承受多少连接</li>
<li>ZlMediaKit 服务部署了多少个集群，部署的服务器配置是咋样的</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">1.每个流媒体服务器所能支持的并发连接数取决于硬件性能，数百个到千个都可以</span><br><span class="line">2.部署了8个以上集群，服务器配置14代处理器+32g+2tb		</span><br></pre></td></tr></table></figure>
</blockquote>
<h2 id="美团：面试"><a href="#美团：面试" class="headerlink" title="美团：面试"></a>美团：面试</h2><ul>
<li>top指令监控资源</li>
<li>如何设计一个用户的关注和被关注的系统</li>
</ul>
<blockquote>
<p>设计一个用户关注和被关注的系统通常涉及到数据库的设计以及前端和后端的应用逻辑。下面是一个简化版的设计思路：</p>
<h3 id="1-数据库设计"><a href="#1-数据库设计" class="headerlink" title="1. 数据库设计"></a>1. 数据库设计</h3><h4 id="表结构"><a href="#表结构" class="headerlink" title="表结构"></a>表结构</h4><p>为了实现用户之间的关注关系，可以创建一个专门的表来存储这种关系。这种表通常被称为“关联表”或“链接表”，因为它连接了两个实体（这里是两个用户）。</p>
<ul>
<li><p><strong>users</strong> 表</p>
<ul>
<li><code>id</code> 用户ID (Primary Key)</li>
<li><code>username</code> 用户名 (Unique)</li>
<li>其他字段如密码、邮箱等…</li>
</ul>
</li>
<li><p><strong>follows</strong> 表</p>
<ul>
<li><code>follower_id</code> 关注者的用户ID (Foreign Key 参考 users.id)</li>
<li><code>following_id</code> 被关注者的用户ID (Foreign Key 参考 users.id)</li>
<li><code>created_at</code> 创建时间 (Timestamp)</li>
</ul>
</li>
</ul>
<p>这种设计允许一个用户可以关注多个其他用户，并且每个用户也可以被多个用户关注。</p>
<h3 id="3-后端逻辑"><a href="#3-后端逻辑" class="headerlink" title="3. 后端逻辑"></a>3. 后端逻辑</h3><p>后端主要负责处理来自前端的请求，并与数据库交互。</p>
<ul>
<li><p><strong>关注操作</strong></p>
<ul>
<li>当用户点击“关注”按钮时，后端应该验证用户身份并检查用户是否已经关注了该用户。</li>
<li>如果没有，则在 follows 表中插入一条记录，包含当前用户（follower_id）和要关注的用户（following_id）。</li>
<li>更新相关用户的关注者数量或被关注者数量统计。</li>
</ul>
</li>
<li><p><strong>取消关注操作</strong></p>
<ul>
<li>当用户点击“取消关注”按钮时，后端应该删除 follows 表中相应的记录。</li>
<li>更新相关用户的关注者数量或被关注者数量统计。</li>
</ul>
</li>
</ul>
<h3 id="5-性能优化"><a href="#5-性能优化" class="headerlink" title="5. 性能优化"></a>5. 性能优化</h3><p>随着系统的增长，简单的CRUD操作可能不足以支持大量的并发请求。这时可以考虑以下一些性能优化措施：</p>
<ul>
<li>使用索引：对于经常查询的字段（例如 follower_id 和 following_id），应该建立索引。</li>
<li>缓存：对于频繁访问的数据（例如用户的关注列表），可以使用缓存技术来减少数据库的压力。</li>
<li>分页：当用户关注列表非常长时，可以采用分页技术来减少单次查询的数据量。</li>
</ul>
<p>以上就是设计一个基本的用户关注和被关注系统的概览。实际开发中还需要根据项目需求和团队的技术栈来调整具体的实现细节。</p>
<h3 id="Redis优化"><a href="#Redis优化" class="headerlink" title="Redis优化"></a>Redis优化</h3><p>通过SortedSet缓存用户关注者、粉丝Id，提高性能</p>
<p>使用SortedSet优势在于可以通过时间戳排序，并且两个set之间可以求交集，可以方便的计算两个用户之间的共同关注</p>
<h4 id="1-存储关注关系"><a href="#1-存储关注关系" class="headerlink" title="1. 存储关注关系"></a>1. 存储关注关系</h4><p>在 Redis 中可以使用 Set 或 Sorted Set 数据类型来存储关注关系。</p>
<ul>
<li><p><strong>Set</strong>: 如果不需要排序，可以简单地使用 Set 来存储一个用户关注的其他用户 ID 列表。</p>
<ul>
<li><code>follow:&lt;userid&gt;</code>: 存储 userid 所关注的所有用户 id。</li>
<li><code>followers:&lt;userid&gt;</code>: 存储关注 userid 的所有用户 id。</li>
</ul>
</li>
<li><p><strong>Sorted Set</strong>: 如果需要按照时间戳或者其他条件排序，可以使用 Sorted Set。</p>
<ul>
<li><code>follow:&lt;userid&gt;</code>: 存储 userid 关注的所有用户 id 及其时间戳。</li>
<li><code>followers:&lt;userid&gt;</code>: 存储关注 userid 的所有用户 id 及其时间戳。</li>
</ul>
</li>
</ul>
<h4 id="2-缓存热点数据"><a href="#2-缓存热点数据" class="headerlink" title="2. 缓存热点数据"></a>2. 缓存热点数据</h4><p>对于热点数据（例如，拥有大量关注者的用户），频繁的数据库读写操作可能会成为瓶颈。可以通过 Redis 将这部分数据缓存起来，从而减少对数据库的访问。</p>
<ul>
<li><strong>关注列表</strong>: 对于拥有大量粉丝的用户，可以将他们的关注列表缓存到 Redis 中。</li>
<li><strong>粉丝列表</strong>: 对于被很多人关注的用户，可以将粉丝列表缓存到 Redis 中。</li>
</ul>
<h4 id="3-实现实时更新"><a href="#3-实现实时更新" class="headerlink" title="3. 实现实时更新"></a>3. 实现实时更新</h4><p>Redis 支持发布&#x2F;订阅模式，可以实现实时更新关注状态。</p>
<ul>
<li>当用户关注或取消关注某个用户时，可以通过 Redis 的发布功能将事件通知给所有监听该频道的客户端。</li>
<li>客户端监听特定频道的消息，然后根据收到的消息更新本地的 UI 或者进行其他处理。</li>
</ul>
<h4 id="5-数据一致性"><a href="#5-数据一致性" class="headerlink" title="5. 数据一致性"></a>5. 数据一致性</h4><p>虽然 Redis 主要用于提高性能，但是在某些情况下，仍然需要保证数据的一致性。可以通过以下方法来解决数据一致性问题：</p>
<ul>
<li><strong>双写</strong>: 在 Redis 中写入数据的同时，在数据库中也进行同样的写操作，确保数据最终一致。</li>
<li><strong>异步同步</strong>: 定期或者通过触发器将 Redis 中的数据同步回数据库，保证最终一致性。</li>
</ul>
<h4 id="6-数据持久化"><a href="#6-数据持久化" class="headerlink" title="6. 数据持久化"></a>6. 数据持久化</h4><p>Redis 默认是将数据存储在内存中的，为了防止数据丢失，可以配置 AOF 或 RDB 进行持久化。</p>
<ul>
<li><strong>AOF (Append Only File)</strong>: 每个写命令都会被记录到文件中，Redis 重启后可以通过重放 AOF 文件来恢复数据。</li>
<li><strong>RDB (Redis Database Backup)</strong>: 定期创建数据快照，Redis 重启后可以从最新的快照恢复数据。</li>
</ul>
<h4 id="注意事项"><a href="#注意事项" class="headerlink" title="注意事项"></a>注意事项</h4><p>虽然 Redis 可以极大地提高系统的性能，但在使用时也需要考虑以下几点：</p>
<ul>
<li><strong>内存消耗</strong>: Redis 存储在内存中，需要合理规划内存大小，避免因内存不足导致的服务不可用。</li>
<li><strong>数据迁移</strong>: 在数据量很大的情况下，需要考虑如何高效地将数据从数据库迁移到 Redis 中。</li>
<li><strong>故障转移</strong>: 设置主从复制和哨兵机制，确保 Redis 在故障时能够快速切换到备用实例。</li>
</ul>
<p>通过上述方法，可以有效地利用 Redis 提升关注系统的性能和用户体验。</p>
</blockquote>
<h2 id="车三百：笔试"><a href="#车三百：笔试" class="headerlink" title="车三百：笔试"></a>车三百：笔试</h2><p>不同：</p>
<table>
<thead>
<tr>
<th>A组</th>
<th>B组</th>
</tr>
</thead>
<tbody><tr>
<td>奥迪 奥迪TT RS 2017款 2.5T Coupe</td>
<td>奥迪 奥迪TT RS(进口) 2017款 奥迪TT RS(进口) TT RS 2.5T Coupe</td>
</tr>
<tr>
<td>大众 途昂 2019款 530 V6 四驱 豪华版</td>
<td>大众 途昂 2017款 途昂 530 V6 四驱豪华版</td>
</tr>
<tr>
<td>大众 途昂 2017款 330TSI 两驱 舒适版</td>
<td>大众 途昂 2017款 途昂 330TSI 两驱舒适版</td>
</tr>
<tr>
<td>宝马 宝马7系 插电混动 2017款 740Le</td>
<td>宝马 宝马7系新能源(进口) 2017款 宝马7系新能源(进口) 740Le</td>
</tr>
<tr>
<td>宝马 宝马Z8 2000款 4.9 手动 V8</td>
<td>宝马 宝马Z8(进口) 2000款 宝马Z8(进口) 4.9 MT</td>
</tr>
<tr>
<td>宝马 宝马Z8 2000款 Z8</td>
<td>宝马 宝马Z8(进口) 2000款 宝马Z8(进口) 4.9 MT</td>
</tr>
</tbody></table>
<ol>
<li>B组：进口</li>
<li>B组：在2019款之后重复款式名称</li>
<li>B组：匹配完年限相同的之后再匹配近似年限的</li>
</ol>
<blockquote>
<p>逐步保存每一节匹配的结果，如果后面的不相似在对比前面的相似度</p>
</blockquote>
<h2 id="米健康：笔试"><a href="#米健康：笔试" class="headerlink" title="米健康：笔试"></a>米健康：笔试</h2><ol>
<li><p><a target="_blank" rel="noopener" href="https://blog.csdn.net/weixin_42570192/article/details/125956145">操作系统进程调度算法</a></p>
</li>
<li><p>寻找对端路径算法</p>
</li>
<li><p>出栈方式问题</p>
</li>
<li><p>TCP&#x2F;IP协议组包括哪些协议</p>
<blockquote>
<ul>
<li><p>IP (Internet Protocol)：负责数据包的路由选择。</p>
</li>
<li><p>TCP (Transmission Control Protocol)：提供可靠的端到端的数据传输。</p>
</li>
<li><p>UDP (User Datagram Protocol)：提供无连接的数据报服务。</p>
</li>
<li><p>ICMP (Internet Control Message Protocol)：用于发送错误消息和相关信息。</p>
</li>
<li><p>FTP (File Transfer Protocol)：用于文件传输。</p>
</li>
<li><p>SMTP (Simple Mail Transfer Protocol)：用于电子邮件的传输。</p>
</li>
<li><p>DNS (Domain Name System)：将域名转换为IP地址。</p>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../image/559c8450b990dc8320b9014d67d884cc.png" alt="559c8450b990dc8320b9014d67d884cc"></p>
</li>
</ul>
</blockquote>
</li>
<li><p>虚拟存储器</p>
<blockquote>
<p>虚拟存储器是一种计算机存储管理技术，它允许程序访问比实际物理内存更大的地址空间。虚拟存储器通过将内存和磁盘空间结合起来使用，使得操作系统能够管理比实际RAM更多的数据。当程序尝试访问不在物理内存中的数据时，操作系统会自动将所需的数据从磁盘加载到内存中，并可能将其他较少使用的数据移回磁盘，这个过程称为页面交换。</p>
</blockquote>
</li>
<li><p>前序遍历推出可能的后序遍历</p>
</li>
</ol>
<h2 id="腾讯云智：笔试"><a href="#腾讯云智：笔试" class="headerlink" title="腾讯云智：笔试"></a>腾讯云智：笔试</h2><ul>
<li><p><input checked="" disabled="" type="checkbox"> 
垃圾回收（CMS）</p>
</li>
<li><p><input checked="" disabled="" type="checkbox"> 
checkde Exception</p>
</li>
<li><p><input checked="" disabled="" type="checkbox"> 
timer的使用</p>
</li>
<li><p><input checked="" disabled="" type="checkbox"> 
自适应Hash（InnoDB）</p>
</li>
<li><p><input disabled="" type="checkbox"> 
C++前序遍历</p>
</li>
<li><p><input disabled="" type="checkbox"> 
Linux &#x3D;&gt; awk</p>
</li>
<li><p><input disabled="" type="checkbox"> 
核心态</p>
</li>
<li><p><input disabled="" type="checkbox"> 
TCP数据交换计算</p>
</li>
<li><p><input disabled="" type="checkbox"> 
TFTP是什么</p>
</li>
<li><p><input disabled="" type="checkbox"> 
计算某个文件单词个数的指令（wc）</p>
<blockquote>
<figure class="highlight sh"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">echo</span> <span class="string">&quot;This is a test&quot;</span> | <span class="built_in">wc</span> -w</span><br></pre></td></tr></table></figure>
</blockquote>
</li>
<li><p><input disabled="" type="checkbox"> 
插入排序</p>
</li>
<li><p><input disabled="" type="checkbox"> 
PCB在进程中的概念</p>
</li>
</ul>
<p><strong>算法：</strong></p>
<ul>
<li>最大异或值</li>
<li>分苹果（每相邻俩人苹果个数不超过1，保障第k个人的苹果最多）</li>
<li>找出连续的字符串个数，包括r、e，但是不包括d</li>
</ul>
<h2 id="腾讯云智：面试"><a href="#腾讯云智：面试" class="headerlink" title="腾讯云智：面试"></a>腾讯云智：面试</h2><ul>
<li>数据结构与算法：<a target="_blank" rel="noopener" href="https://www.bilibili.com/video/BV1AY4y157yL/?spm_id_from=333.337.search-card.all.click&vd_source=70a5c913e74574ad96afc2ae210ba3e0">KMP</a>、<a target="_blank" rel="noopener" href="https://blog.csdn.net/qq_38943651/article/details/108396570">在有向图中判断是否有环</a>（DFS）</li>
<li>操作系统：内核态和用户态、虚拟内存</li>
<li>计网：http2.0、XHR、TCP拥塞控制</li>
<li>微服务：RPC原理、如何理解微服务、注册中心如何工作</li>
<li>Spring：IOC原理、ApplicationContent与BeanFactory区别</li>
<li>MySQL：Select for update、间隙锁和记录锁、总结各个日志</li>
<li>JUC：线程安全问题</li>
</ul>
<h2 id="安克创新：面试"><a href="#安克创新：面试" class="headerlink" title="安克创新：面试"></a>安克创新：面试</h2><h3 id="一面"><a href="#一面" class="headerlink" title="一面"></a>一面</h3><ol>
<li><p>Mybatis-plus和Mybatis的区别</p>
</li>
<li><p>AQS的理解</p>
</li>
<li><p>JUC工具包</p>
<ul>
<li>同步器</li>
<li>原子类</li>
<li>线程池</li>
<li>并发集合</li>
</ul>
</li>
<li><p>英语是否重要</p>
</li>
<li><p>TCP和HTTP协议的区别</p>
</li>
<li><p>为什么要自定义TCP</p>
</li>
<li><p>dubbo和spring cloud的区别</p>
</li>
</ol>
<h3 id="HR面试"><a href="#HR面试" class="headerlink" title="HR面试"></a>HR面试</h3><blockquote>
<h4 id="HR面核心问题分类"><a href="#HR面核心问题分类" class="headerlink" title="HR面核心问题分类"></a><strong>HR面核心问题分类</strong></h4><p>三面考察了对行业的认知，对个人未来计划的规划，以及对公司文化的认知，大约40-50分钟。</p>
<p>主要问了项目，校园经历，比赛之类的经历，以及团队合作相关的问题</p>
<h5 id="1-高频行为题（跨岗位通用）"><a href="#1-高频行为题（跨岗位通用）" class="headerlink" title="1. 高频行为题（跨岗位通用）"></a><strong>1. 高频行为题（跨岗位通用）</strong></h5><ul>
<li>项目经历：<ul>
<li>项目中的意见分歧及解决方式</li>
<li>团队协作中的挫折&#x2F;成就经历</li>
<li>与甲方对接的经验</li>
</ul>
</li>
<li>自我认知：<ul>
<li>性格优缺点</li>
<li>身边人对你的评价</li>
<li>最感激的三件事</li>
</ul>
</li>
</ul>
<h5 id="2-个人背景与稳定性"><a href="#2-个人背景与稳定性" class="headerlink" title="2. 个人背景与稳定性"></a><strong>2. 个人背景与稳定性</strong></h5><ul>
<li>家庭情况（如居住地、父母态度）</li>
<li>职业规划与岗位匹配度</li>
<li>是否了解公司及行业知识</li>
</ul>
</blockquote>
<p><a target="_blank" rel="noopener" href="https://www.anker.com.cn/pages/about">https://www.anker.com.cn/pages/about</a></p>
<p>正常的hr面，要准备的话就去了解一下公司就行，可能会问你对公司的了解   </p>
<blockquote>
<p>安克创新科技股份有限公司成立于2011年，是国内营收规模最大的全球化消费电子品牌企业之一，专注于智能配件和智能硬件的设计、研发和销售。企业业务从线上起步，主要销售渠道为Amazon、Ebay、天猫、京东等海内外线上平台，在亚马逊等境外大型电商平台上占据领先的行业市场份额，拥有很高的知名度和美誉度；同时在北美、欧洲、日本和中东等发达国家和地区，通过与沃尔玛、百思买以及贸易商合作，线下收入增长快速。</p>
</blockquote>
<ul>
<li><p>了解公司的业务、看中的品质（第一性、求极致）</p>
<ul>
<li>消费电子出海独角兽：anker充电宝、soundcore耳机、eufy清洁&#x2F;安防</li>
<li><strong>第一性：</strong>看问题从问题的本质出发，把大问题拆分为不可再分的原子问题，更快定位问题，从更客观的角度看问题( 通信速率慢如何解决？ )</li>
<li><strong>求极致：</strong>不局限于把事情完成，而更想把事情做好(浙大实习期间负责的项目：用心、负责、主动)</li>
</ul>
</li>
<li><p>个人优势：</p>
<ul>
<li>认可且具备<code>Anker</code>的价值观：第一性原理、求极致</li>
<li>我是一个真正热爱创新的开发者，喜欢接触、尝试新的东西（在校期间自主搭建了湖科大宠物身份证平台、学习AI）</li>
<li>我是一个积极上进的人</li>
<li>我具备较丰富的项目、实习经验，具备较好的团队协作经验</li>
</ul>
<ul>
<li>我本是电子信息类专业分支，安克也是一家消费电子企业，熟悉Java开发的同时有电子信息专业基础</li>
</ul>
</li>
<li><p><strong>你为什么想加入我们公司</strong></p>
</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">在我很小的时候受家庭影响立志要闯出自己的一番事业，这对于我个人的一个择业规划就很注重企业平台和发展性。然后我了解到安克是一个赋能创造者平台的企业，并且我通过在安克实习的同学了解到安克同时是一家机会多、伙伴好、氛围好的高效率运转的企业，借助这个平台能学到自我提升方法论的同时，可以在奋斗创新中实现我的个人价值和人生目标</span><br></pre></td></tr></table></figure>



<ul>
<li><strong>了解过安克创新吗</strong>（考你对是否用心了解公司，借此可以谈谈自己对公司业务、需要的人才品质、价值观来回答好这个问题）</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">第一次关注到安克是因为特朗普的一次直播中看到他用了咱安克的充电宝，妥妥总统臻选啊，后面我就感兴趣去深入了解了一下咱安克，发现安克是一家消费电子出海的独角兽企业，宏观上：安克敏锐洞察市内缺口，聚焦海外市场；微观上：从第一性原理出发，抛开表面事实，找到问题突破的关键，不断优化产品，在这样的一个与行业风向的竞赛中，安克年营收高达百亿。这样的耀眼的成绩我觉得还有一部分原因在于安克的自我使命：极致创新 激发可能。这个是和第一性原理紧耦合的，第一性原理是发现一个不同于大众的赛道，而求极致是在这一条陌生的赛道笃志前行。</span><br></pre></td></tr></table></figure>



<ul>
<li><strong>你的未来职业规划</strong>（HR希望通过询问职业规划来评估你的<strong>职业目标是否与公司的发展方向一致</strong>，以及你是否具备足够的<strong>潜力</strong>和<strong>稳定性</strong>长期为公司贡献。）<ul>
<li>先夸公司：首先安克是一家追逐时代风向的领头羊</li>
<li>再说匹配：未来安克将聚焦于行业热门技术，像<strong>多模态AI感知和决策、家用智能的边缘计算系统</strong>，这些都是我个人很感兴趣的方向，并且我也在持续关注和学习目前行业新技术</li>
<li>进阶路线：<ul>
<li>3年内快速积累个人的专业知识、和业务技能，成为Java开发的行业专家</li>
<li>3-5年我想从螺丝钉成长为独当一面的架构师，在公司产品线担任重要角色<ul>
<li>这样的责任感会激励我把我求极致的精神运用在这份事业中，实现个人的人生理想的同时，给咱安克交出一份满意的答卷</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<blockquote>
<p><strong>先夸下公司和职位，展示自己未来的发展路线和这个职位很匹配。</strong></p>
<p>比如可以说，贵公司规模很大，或者贵公司在这个行业的项目很有吸引力，或者说，这个职位和我未来的发展规划很匹配。然后可以说，我在未来的3到5年内，打算在xx领域进一步发展，着重积累xx方面的经验和技术。</p>
<p>上文提到的领域和技术，都需要和这个职位想匹配。其实面试官自己都知道，哪怕是大公司，能留住求职者3年就已经很不错了，小公司的话估计1，2年就跳槽。但话得这样说，证明自己愿意干长久。</p>
<p><strong>2 然后说下自己的技术或经验的进阶路线。</strong></p>
<p>比如可以说，如果有幸得到这个工作机会，我打算进一步学习xx技术，让自己更加资深，同时，我将进一步学习和实践和这个职位有关的xx技术，总之让自己更加适合这个工作。</p>
<p><strong>3 再进一步说明自己和这个职位的匹配程度</strong></p>
</blockquote>
<ul>
<li><p><strong>相比于其他人，你的优势在哪里</strong></p>
<ul>
<li>具备丰富的实习、项目、团队协作经验</li>
<li>认可且具备<code>Anker</code>的价值观：第一性原理、求极致<ul>
<li><strong>第一性：</strong>看问题从问题的本质出发，把大问题拆分为不可再分的原子问题，更快定位原因，从更客观的角度看问题( 通信速率慢如何解决？ )</li>
<li><strong>求极致：</strong>不局限于把事情完成，而更想把事情做好(浙大实习期间负责的项目：我主动对接甲方需求、)</li>
</ul>
</li>
<li>我是一个有想法、真正<strong>热爱创新</strong>的开发者，喜欢接触、尝试新的东西（在校期间自主搭建了湖科大宠物身份证平台、学习AI）</li>
</ul>
</li>
<li><p><strong>你是如何学习新知识的</strong></p>
</li>
</ul>
<p><img src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/../image/image-20250421212320019.png" alt="image-20250421212320019"></p>
<ul>
<li><strong>项目中是否和其他同学有意见不一然后如何解决的一些问题</strong></li>
</ul>
<blockquote>
<p>尊重他人的<strong>意见、积极沟通、用数据和事实</strong>说话</p>
</blockquote>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">在之前的项目中确实遇到过和其他同学意见不一的情况。</span><br><span class="line"></span><br><span class="line">有一次我们在做一个校园活动策划项目，对于活动的宣传方式，我主张利用线上社交媒体进行广泛传播，制作有趣的短视频和互动话题来吸引同学们的关注。而另一位同学则认为应该以线下张贴海报和发放传单为主，他觉得这样能直接触达目标群体。</span><br><span class="line"></span><br><span class="line">当发现我们的意见不一致时，我首先做的是冷静下来，避免情绪化的争论。然后我主动找了个时间，和他坐下来好好沟通。我先让他详细阐述他选择线下方式的理由，他也提到了线下宣传的直接性和覆盖面广等优点。接着我也阐述了我对于线上宣传的想法，包括线上宣传的可扩展性、成本效益以及能够精准定位目标受众等优势。</span><br><span class="line"></span><br><span class="line">之后，我们一起收集了之前类似活动的宣传数据，发现线上宣传在吸引年轻群体方面确实有很好的效果，但线下宣传在提高活动知名度方面也有不可替代的作用。于是我们决定将两种方式结合起来，重新规划了宣传预算和资源分配，让线上和线下宣传相互补充。</span><br><span class="line"></span><br><span class="line">在这个过程中，我觉得尊重他人的意见、积极沟通、用数据和事实说话是很重要的，这样才能有效地解决意见不一的问题，达成团队共识。</span><br></pre></td></tr></table></figure>



<ul>
<li><strong>然后问了offer情况</strong>（具说情况+表达安克的好）</li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">我本人已有7个offer，如果能拿到安克的机会，我将会给他们都拒掉（这个时候去讨论安克的一个优点）</span><br><span class="line"></span><br><span class="line">在我很小的时候受家庭影响立志要闯出自己的一番事业，这对于我个人的择业规划就很注重企业平台和发展性。我了解到安克是一个赋能创造者平台的企业，并且我通过在安克实习的同学了解到安克同时是一家机会多、伙伴好、氛围好的高效率运转的企业，借助这个平台能学到自我提升方法论的同时，可以在奋斗创新中实现我的个人价值和人生目标</span><br><span class="line"></span><br><span class="line">而且我很希望来深圳这个城市，我父母也在这边</span><br></pre></td></tr></table></figure>

<ul>
<li><strong>期望薪资多少</strong></li>
</ul>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">“我了解到该岗位在深圳的薪资范围是15-22k。结合我的 实习经历 和 技能储备 还有目前offer的薪资水平，希望能争取到17k。当然，我也很看重贵司的发展平台和学习机会。”</span><br></pre></td></tr></table></figure>

<h2 id="微派网络"><a href="#微派网络" class="headerlink" title="微派网络"></a>微派网络</h2><h3 id="项目"><a href="#项目" class="headerlink" title="项目"></a>项目</h3><p>遇到的难点、印象最深的线上事故如何解决</p>
<p>难点：</p>
<ul>
<li>浙大淋巴医疗检查系统：平台基于java实现，可是java无法满足项目中高性能串口通信的要求，这是从技术底层的否定</li>
<li>RAG平台：</li>
</ul>
<h3 id="计网"><a href="#计网" class="headerlink" title="计网"></a>计网</h3><p>五层模型&#x2F;作用</p>
<p>应用层、传输层、网络层、数据链路层、物理层</p>
<h3 id="数据库"><a href="#数据库" class="headerlink" title="数据库"></a>数据库</h3><p>三大范式&#x2F;事务如何实现</p>
<p>三大范式：原子性、唯一性（非主键字段必须完全依赖主键）、独立性(消除传递依赖)</p>
<h3 id="消息队列"><a href="#消息队列" class="headerlink" title="消息队列"></a>消息队列</h3><p>RocketMQ的topic-tag存储实现</p>
<p>MQ消息如何保障可靠性</p>
<h3 id="AI"><a href="#AI" class="headerlink" title="AI"></a>AI</h3><p>相似度计算公式：余弦相似度。结果区间【-1,1】</p>
<p>取值越趋近为1向量方向越相似</p>
<p>RAG的缺陷和优化策略</p>
<h3 id="场景题"><a href="#场景题" class="headerlink" title="场景题"></a>场景题</h3><p>设计一个微信好友系统</p>
<p>从流程触发每个点去思考</p>
<h3 id="算法"><a href="#算法" class="headerlink" title="算法"></a>算法</h3><p>数据结构、算法、数据结构的区别</p>
<p>返回指定数组倒数第K大的数、手撕K个一组反转链表</p>
<!-- flag of hidden posts --></article><div class="post-copyright"><div class="copyright-cc-box"><i class="anzhiyufont anzhiyu-icon-copyright"></i></div><div class="post-copyright__author_box"><a class="post-copyright__author_img" href="/" title="头像"><img class="post-copyright__author_img_back" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/fansea.png" title="头像" alt="头像"><img class="post-copyright__author_img_front" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/fansea.png" title="头像" alt="头像"></a><div class="post-copyright__author_name">FANSEA</div><div class="post-copyright__author_desc">目标明确，只管去做</div></div><div class="post-copyright__post__info"><a class="post-copyright__original" title="该文章为原创文章，注意版权协议" href="https://fansea0.github.io/2024/03/15/%E9%9D%A2%E8%AF%95%E7%BB%8F%E9%AA%8C/">原创</a><a class="post-copyright-title"><span onclick="rm.copyPageUrl('https://fansea0.github.io/2024/03/15/%E9%9D%A2%E8%AF%95%E7%BB%8F%E9%AA%8C/')">面试经验</span></a></div><div class="post-tools" id="post-tools"><div class="post-tools-left"><div class="rewardLeftButton"><div class="post-reward" onclick="anzhiyu.addRewardMask()"><div class="reward-button button--animated" title="赞赏作者"><i class="anzhiyufont anzhiyu-icon-hand-heart-fill"></i>打赏作者</div><div class="reward-main"><div class="reward-all"><span class="reward-title">感谢你赐予我前进的力量</span><ul class="reward-group"><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-weichat.png" alt="微信"/></a><div class="post-qr-code-desc">微信</div></li><li class="reward-item"><a href="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" target="_blank"><img class="post-qr-code-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/qrcode-alipay.png" alt="支付宝"/></a><div class="post-qr-code-desc">支付宝</div></li></ul><a class="reward-main-btn" href="/about/#about-reward" target="_blank"><div class="reward-text">赞赏者名单</div><div class="reward-dec">因为你们的支持让我意识到写文章的价值🙏</div></a></div></div></div><div id="quit-box" onclick="anzhiyu.removeRewardMask()" style="display: none"></div></div><div class="shareRight"><div class="share-link mobile"><div class="share-qrcode"><div class="share-button" title="使用手机访问这篇文章"><i class="anzhiyufont anzhiyu-icon-qrcode"></i></div><div class="share-main"><div class="share-main-all"><div id="qrcode" title="https://fansea0.github.io/2024/03/15/%E9%9D%A2%E8%AF%95%E7%BB%8F%E9%AA%8C/"></div><div class="reward-dec">使用手机访问这篇文章</div></div></div></div></div><div class="share-link weibo"><a class="share-button" target="_blank" href="https://service.weibo.com/share/share.php?title=面试经验&amp;url=https://fansea0.github.io/2024/03/15/%E9%9D%A2%E8%AF%95%E7%BB%8F%E9%AA%8C/&amp;pic=" rel="external nofollow noreferrer noopener"><i class="anzhiyufont anzhiyu-icon-weibo"></i></a></div><script>function copyCurrentPageUrl() {
  var currentPageUrl = window.location.href;
  var input = document.createElement("input");
  input.setAttribute("value", currentPageUrl);
  document.body.appendChild(input);
  input.select();
  input.setSelectionRange(0, 99999);
  document.execCommand("copy");
  document.body.removeChild(input);
}</script><div class="share-link copyurl"><div class="share-button" id="post-share-url" title="复制链接" onclick="copyCurrentPageUrl()"><i class="anzhiyufont anzhiyu-icon-link"></i></div></div></div></div></div><div class="post-copyright__notice"><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="https://fansea0.github.io" target="_blank">FANSEA</a>！</span></div></div><div class="post-tools-right"><div class="tag_share"><div class="post-meta__box"><div class="post-meta__box__tag-list"><a class="post-meta__box__tags" href="/tags/%E9%9D%A2%E8%AF%95/"><span class="tags-punctuation"> <i class="anzhiyufont anzhiyu-icon-tag"></i></span>面试<span class="tagsPageCount">1</span></a></div></div></div><div class="post_share"><div class="social-share" data-image="/fansea.png" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/css/share.min.css" media="print" onload="this.media='all'"/><script src="https://cdn.cbd.int/butterfly-extsrc@1.1.3/sharejs/dist/js/social-share.min.js" defer="defer"></script></div></div><nav class="pagination-post" id="pagination"></nav></div><div class="aside-content" id="aside-content"><div class="card-widget card-info"><div class="card-content"><div class="author-info-avatar"><img class="avatar-img" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/fansea.png" onerror="this.onerror=null;this.src='/img/friend_404.gif'" alt="avatar"/></div><div class="author-info__description"></div></div></div><div class="card-widget anzhiyu-right-widget" id="card-wechat" onclick="null"><div id="flip-wrapper"><div id="flip-content"><div class="face" style="background: url(https://bu.dusays.com/2023/01/13/63c02edf44033.png) center center / 100% no-repeat"></div><div class="back face" style="background: url(https://bu.dusays.com/2023/05/13/645fa415e8694.png) center center / 100% no-repeat"></div></div></div></div><div class="sticky_layout"><div class="card-widget" id="card-toc"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-bars"></i><span>文章目录</span><span class="toc-percentage"></span></div><div class="toc-content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%9D%A2%E8%AF%95%E7%BB%8F%E9%AA%8C"><span class="toc-number">1.</span> <span class="toc-text">面试经验</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%9D%9E%E6%8A%80%E6%9C%AF%E9%97%AE%E9%A2%98%E9%97%AE%E7%AD%94"><span class="toc-number">1.1.</span> <span class="toc-text">非技术问题问答</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%87%AA%E6%88%91%E4%BB%8B%E7%BB%8D"><span class="toc-number">1.1.1.</span> <span class="toc-text">自我介绍</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%98%90%E8%BF%B0%E9%A1%B9%E7%9B%AE%E4%B8%AD%E9%97%AE%E9%A2%98"><span class="toc-number">1.1.2.</span> <span class="toc-text">阐述项目中问题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BD%AF%E6%8A%80%E8%83%BD%E6%8F%90%E9%97%AE"><span class="toc-number">1.2.</span> <span class="toc-text">软技能提问</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%BA%AE%E7%82%B9-%E8%A7%A3%E5%86%B3%E9%97%AE%E9%A2%98"><span class="toc-number">1.2.1.</span> <span class="toc-text">亮点&#x2F;解决问题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8E%8B%E5%8A%9B"><span class="toc-number">1.2.2.</span> <span class="toc-text">压力</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%BB%8F%E9%AA%8C-%E6%95%99%E8%AE%AD"><span class="toc-number">1.2.3.</span> <span class="toc-text">经验&#x2F;教训</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9B%A2%E9%98%9F"><span class="toc-number">1.2.4.</span> <span class="toc-text">团队</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%B8%AA%E4%BA%BA%E8%A7%92%E8%89%B2"><span class="toc-number">1.2.4.1.</span> <span class="toc-text">个人角色</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%8D%8F%E4%BD%9C%E7%BB%8F%E9%AA%8C"><span class="toc-number">1.2.5.</span> <span class="toc-text">协作经验</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B8%B8%E9%97%AE%E9%97%AE%E9%A2%98"><span class="toc-number">1.2.6.</span> <span class="toc-text">常问问题</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE%E6%8A%80%E6%9C%AF%E6%A0%88%E5%A4%8D%E4%B9%A0"><span class="toc-number">1.3.</span> <span class="toc-text">项目技术栈复习</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E7%94%A8MySQL%E8%80%8C%E4%B8%8D%E6%98%AF%E5%85%B6%E4%BB%96%E6%95%B0%E6%8D%AE%E5%BA%93%E4%BF%9D%E5%AD%98%E6%88%AA%E9%9D%A2%E6%95%B0%E6%8D%AE"><span class="toc-number">1.3.1.</span> <span class="toc-text">为什么用MySQL而不是其他数据库保存截面数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%B7%A5%E5%8E%82-%E7%AD%96%E7%95%A5%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.3.2.</span> <span class="toc-text">工厂+策略模式</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E4%BD%BF%E7%94%A8WebSocket%E8%80%8C%E4%B8%8D%E6%98%AFSSE"><span class="toc-number">1.3.3.</span> <span class="toc-text">为什么使用WebSocket而不是SSE</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Caffeine"><span class="toc-number">1.3.4.</span> <span class="toc-text">Caffeine</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E8%83%8C%E6%99%AF-WHY"><span class="toc-number">1.3.4.1.</span> <span class="toc-text">问题背景 WHY</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3-HOW"><span class="toc-number">1.3.4.2.</span> <span class="toc-text">如何解决 HOW</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0"><span class="toc-number">1.3.4.3.</span> <span class="toc-text">代码实现</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E6%80%9D%E8%80%83-WHAT"><span class="toc-number">1.3.4.4.</span> <span class="toc-text">问题思考 WHAT</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#LRU"><span class="toc-number">1.3.5.</span> <span class="toc-text">LRU</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E8%83%8C%E6%99%AF"><span class="toc-number">1.3.5.1.</span> <span class="toc-text">问题背景</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3"><span class="toc-number">1.3.5.2.</span> <span class="toc-text">如何解决</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E6%80%9D%E8%80%83"><span class="toc-number">1.3.5.3.</span> <span class="toc-text">问题思考</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JNA"><span class="toc-number">1.3.6.</span> <span class="toc-text">JNA</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E8%83%8C%E6%99%AF-1"><span class="toc-number">1.3.6.1.</span> <span class="toc-text">问题背景</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3-1"><span class="toc-number">1.3.6.2.</span> <span class="toc-text">如何解决</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0-1"><span class="toc-number">1.3.6.3.</span> <span class="toc-text">代码实现</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E6%80%9D%E8%80%83-1"><span class="toc-number">1.3.6.4.</span> <span class="toc-text">问题思考</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#PostgresSQL"><span class="toc-number">1.3.7.</span> <span class="toc-text">PostgresSQL</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E8%83%8C%E6%99%AF-2"><span class="toc-number">1.3.7.1.</span> <span class="toc-text">问题背景</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3-2"><span class="toc-number">1.3.7.2.</span> <span class="toc-text">如何解决</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0-2"><span class="toc-number">1.3.7.3.</span> <span class="toc-text">代码实现</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E6%80%9D%E8%80%83-2"><span class="toc-number">1.3.7.4.</span> <span class="toc-text">问题思考</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9F%BA%E4%BA%8E%E5%BE%AE%E6%9C%8D%E5%8A%A1%E7%9A%84%E5%88%86%E5%B1%82%E6%9E%B6%E6%9E%84"><span class="toc-number">1.3.8.</span> <span class="toc-text">基于微服务的分层架构</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%88%86%E5%B1%82%E6%9E%B6%E6%9E%84%E6%A6%82%E8%BF%B0"><span class="toc-number">1.3.8.1.</span> <span class="toc-text">分层架构概述</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%AE%BE%E8%AE%A1%E7%9A%84%E5%A5%BD%E5%A4%84"><span class="toc-number">1.3.8.2.</span> <span class="toc-text">设计的好处</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#SaaS%E7%A7%9F%E6%88%B7%E7%B3%BB%E7%BB%9F%E8%AE%BE%E8%AE%A1"><span class="toc-number">1.3.9.</span> <span class="toc-text">SaaS租户系统设计</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%9E%B6%E6%9E%84%E9%80%89%E5%9E%8B"><span class="toc-number">1.3.9.1.</span> <span class="toc-text">架构选型</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E5%8F%8C%E6%9E%B6%E6%9E%84%E7%AD%96%E7%95%A5"><span class="toc-number">1.3.9.1.1.</span> <span class="toc-text">双架构策略</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%A0%87%E5%87%86SaaS%E6%9E%B6%E6%9E%84%EF%BC%88%E5%86%B3%E7%AD%96%EF%BC%89"><span class="toc-number">1.3.9.1.2.</span> <span class="toc-text">标准SaaS架构（决策）</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E7%A7%9F%E6%88%B7%E8%AE%A2%E9%98%85"><span class="toc-number">1.3.9.2.</span> <span class="toc-text">租户订阅</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BB%84%E4%BB%B6%E8%AE%BE%E8%AE%A1"><span class="toc-number">1.3.9.2.1.</span> <span class="toc-text">组件设计</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1"><span class="toc-number">1.3.9.2.2.</span> <span class="toc-text">数据库设计</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E9%9A%94%E7%A6%BB"><span class="toc-number">1.3.9.3.</span> <span class="toc-text">数据隔离</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%A7%9F%E6%88%B7%E9%9A%94%E7%A6%BB%E6%A8%A1%E5%9E%8B"><span class="toc-number">1.3.9.3.1.</span> <span class="toc-text">租户隔离模型</span></a></li></ol></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%85%B7%E4%BD%93%E5%AE%9E%E7%8E%B0"><span class="toc-number">1.3.9.4.</span> <span class="toc-text">具体实现</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%BD%91%E5%85%B3%E5%B1%82"><span class="toc-number">1.3.9.4.1.</span> <span class="toc-text">网关层</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%A7%9F%E6%88%B7%E8%AE%A2%E9%98%85-1"><span class="toc-number">1.3.9.4.2.</span> <span class="toc-text">租户订阅</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#%E7%A7%9F%E6%88%B7%E9%9A%94%E7%A6%BB"><span class="toc-number">1.3.9.4.3.</span> <span class="toc-text">租户隔离</span></a></li></ol></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%85%91%E6%8D%A2%E7%A0%81%E5%8A%9F%E8%83%BD%E8%AE%BE%E8%AE%A1"><span class="toc-number">1.3.10.</span> <span class="toc-text">兑换码功能设计</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RocketMQ"><span class="toc-number">1.3.11.</span> <span class="toc-text">RocketMQ</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E8%83%8C%E6%99%AF-3"><span class="toc-number">1.3.11.1.</span> <span class="toc-text">问题背景</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3-3"><span class="toc-number">1.3.11.2.</span> <span class="toc-text">如何解决</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0-3"><span class="toc-number">1.3.11.3.</span> <span class="toc-text">代码实现</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E6%80%9D%E8%80%83-3"><span class="toc-number">1.3.11.4.</span> <span class="toc-text">问题思考</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ZLMediaKit"><span class="toc-number">1.3.12.</span> <span class="toc-text">ZLMediaKit</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E8%83%8C%E6%99%AF-4"><span class="toc-number">1.3.12.1.</span> <span class="toc-text">问题背景</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E5%A6%82%E4%BD%95%E8%A7%A3%E5%86%B3-4"><span class="toc-number">1.3.12.2.</span> <span class="toc-text">如何解决</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BB%A3%E7%A0%81%E5%AE%9E%E7%8E%B0-4"><span class="toc-number">1.3.12.3.</span> <span class="toc-text">代码实现</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E6%80%9D%E8%80%83-4"><span class="toc-number">1.3.12.4.</span> <span class="toc-text">问题思考</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Lua-%E5%92%8C-Redisson"><span class="toc-number">1.3.13.</span> <span class="toc-text">Lua 和 Redisson</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Liquibase"><span class="toc-number">1.3.14.</span> <span class="toc-text">Liquibase</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#JSerialComm"><span class="toc-number">1.3.15.</span> <span class="toc-text">JSerialComm</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BB%8F%E5%85%B8%E6%8F%90%E9%97%AE%E6%96%B9%E5%BC%8F"><span class="toc-number">1.4.</span> <span class="toc-text">经典提问方式</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%B0%88%E4%B8%80%E8%B0%88XXX%E7%9A%84%E7%90%86%E8%A7%A3"><span class="toc-number">1.4.1.</span> <span class="toc-text">谈一谈XXX的理解</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#XXX%E7%9A%84%E5%8E%9F%E7%90%86"><span class="toc-number">1.4.2.</span> <span class="toc-text">XXX的原理</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#XXX%E5%92%8CYYY%E7%9A%84%E5%8C%BA%E5%88%AB"><span class="toc-number">1.4.3.</span> <span class="toc-text">XXX和YYY的区别</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%BA%E4%BB%80%E4%B9%88%E8%A6%81XXX"><span class="toc-number">1.4.4.</span> <span class="toc-text">为什么要XXX</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#XXX%E7%9A%84%E5%8F%91%E7%94%9F%E5%8E%9F%E5%9B%A0"><span class="toc-number">1.4.5.</span> <span class="toc-text">XXX的发生原因</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#AI%E9%9D%A2%E8%AF%95%E9%A2%98"><span class="toc-number">1.5.</span> <span class="toc-text">AI面试题</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%B1%9F%E8%A5%BF%E5%8D%97%E6%98%8C%EF%BC%9A%E9%9D%A2%E8%AF%95"><span class="toc-number">1.6.</span> <span class="toc-text">江西南昌：面试</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%9A%E4%BF%A1%E7%A7%91%E6%8A%80%EF%BC%9A%E9%9D%A2%E8%AF%95"><span class="toc-number">1.7.</span> <span class="toc-text">亚信科技：面试</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%BA%9A%E4%BF%A1%E7%A7%91%E6%8A%80%EF%BC%9A%E7%AC%94%E8%AF%95"><span class="toc-number">1.8.</span> <span class="toc-text">亚信科技：笔试</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%93%94%E5%93%A9%E5%93%94%E5%93%A9%EF%BC%9A%E7%AC%94%E8%AF%95"><span class="toc-number">1.9.</span> <span class="toc-text">哔哩哔哩：笔试</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9D%AD%E5%B7%9E%E5%90%88%E6%80%9D%EF%BC%9A%E9%9D%A2%E8%AF%95"><span class="toc-number">1.10.</span> <span class="toc-text">杭州合思：面试</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8C%97%E4%BA%AC%E6%85%A7%E7%AD%96%EF%BC%9A%E7%AC%94%E8%AF%95"><span class="toc-number">1.11.</span> <span class="toc-text">北京慧策：笔试</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%8A%E6%B5%B7%E8%A1%8D%E5%9B%A0%EF%BC%9A%E9%9D%A2%E8%AF%95"><span class="toc-number">1.12.</span> <span class="toc-text">上海衍因：面试</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%8C%97%E4%BA%AC%E4%BA%AC%E4%B8%9C%EF%BC%9A%E7%AC%94%E8%AF%95"><span class="toc-number">1.13.</span> <span class="toc-text">北京京东：笔试</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%8B%9B%E5%95%86%E9%93%B6%E8%A1%8C%EF%BC%9A%E7%AC%94%E8%AF%95"><span class="toc-number">1.14.</span> <span class="toc-text">招商银行：笔试</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E4%B8%AD%E6%B5%B7%E8%BE%BE%EF%BC%9A%E9%9D%A2%E8%AF%95"><span class="toc-number">1.15.</span> <span class="toc-text">中海达：面试</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%BE%8E%E5%9B%A2%EF%BC%9A%E9%9D%A2%E8%AF%95"><span class="toc-number">1.16.</span> <span class="toc-text">美团：面试</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#1-%E6%95%B0%E6%8D%AE%E5%BA%93%E8%AE%BE%E8%AE%A1"><span class="toc-number">1.16.1.</span> <span class="toc-text">1. 数据库设计</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E8%A1%A8%E7%BB%93%E6%9E%84"><span class="toc-number">1.16.1.1.</span> <span class="toc-text">表结构</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3-%E5%90%8E%E7%AB%AF%E9%80%BB%E8%BE%91"><span class="toc-number">1.16.2.</span> <span class="toc-text">3. 后端逻辑</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#5-%E6%80%A7%E8%83%BD%E4%BC%98%E5%8C%96"><span class="toc-number">1.16.3.</span> <span class="toc-text">5. 性能优化</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#Redis%E4%BC%98%E5%8C%96"><span class="toc-number">1.16.4.</span> <span class="toc-text">Redis优化</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#1-%E5%AD%98%E5%82%A8%E5%85%B3%E6%B3%A8%E5%85%B3%E7%B3%BB"><span class="toc-number">1.16.4.1.</span> <span class="toc-text">1. 存储关注关系</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#2-%E7%BC%93%E5%AD%98%E7%83%AD%E7%82%B9%E6%95%B0%E6%8D%AE"><span class="toc-number">1.16.4.2.</span> <span class="toc-text">2. 缓存热点数据</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#3-%E5%AE%9E%E7%8E%B0%E5%AE%9E%E6%97%B6%E6%9B%B4%E6%96%B0"><span class="toc-number">1.16.4.3.</span> <span class="toc-text">3. 实现实时更新</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#5-%E6%95%B0%E6%8D%AE%E4%B8%80%E8%87%B4%E6%80%A7"><span class="toc-number">1.16.4.4.</span> <span class="toc-text">5. 数据一致性</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#6-%E6%95%B0%E6%8D%AE%E6%8C%81%E4%B9%85%E5%8C%96"><span class="toc-number">1.16.4.5.</span> <span class="toc-text">6. 数据持久化</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#%E6%B3%A8%E6%84%8F%E4%BA%8B%E9%A1%B9"><span class="toc-number">1.16.4.6.</span> <span class="toc-text">注意事项</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BD%A6%E4%B8%89%E7%99%BE%EF%BC%9A%E7%AC%94%E8%AF%95"><span class="toc-number">1.17.</span> <span class="toc-text">车三百：笔试</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E7%B1%B3%E5%81%A5%E5%BA%B7%EF%BC%9A%E7%AC%94%E8%AF%95"><span class="toc-number">1.18.</span> <span class="toc-text">米健康：笔试</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%85%BE%E8%AE%AF%E4%BA%91%E6%99%BA%EF%BC%9A%E7%AC%94%E8%AF%95"><span class="toc-number">1.19.</span> <span class="toc-text">腾讯云智：笔试</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%85%BE%E8%AE%AF%E4%BA%91%E6%99%BA%EF%BC%9A%E9%9D%A2%E8%AF%95"><span class="toc-number">1.20.</span> <span class="toc-text">腾讯云智：面试</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%AE%89%E5%85%8B%E5%88%9B%E6%96%B0%EF%BC%9A%E9%9D%A2%E8%AF%95"><span class="toc-number">1.21.</span> <span class="toc-text">安克创新：面试</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E4%B8%80%E9%9D%A2"><span class="toc-number">1.21.1.</span> <span class="toc-text">一面</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#HR%E9%9D%A2%E8%AF%95"><span class="toc-number">1.21.2.</span> <span class="toc-text">HR面试</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#HR%E9%9D%A2%E6%A0%B8%E5%BF%83%E9%97%AE%E9%A2%98%E5%88%86%E7%B1%BB"><span class="toc-number">1.21.2.1.</span> <span class="toc-text">HR面核心问题分类</span></a><ol class="toc-child"><li class="toc-item toc-level-5"><a class="toc-link" href="#1-%E9%AB%98%E9%A2%91%E8%A1%8C%E4%B8%BA%E9%A2%98%EF%BC%88%E8%B7%A8%E5%B2%97%E4%BD%8D%E9%80%9A%E7%94%A8%EF%BC%89"><span class="toc-number">1.21.2.1.1.</span> <span class="toc-text">1. 高频行为题（跨岗位通用）</span></a></li><li class="toc-item toc-level-5"><a class="toc-link" href="#2-%E4%B8%AA%E4%BA%BA%E8%83%8C%E6%99%AF%E4%B8%8E%E7%A8%B3%E5%AE%9A%E6%80%A7"><span class="toc-number">1.21.2.1.2.</span> <span class="toc-text">2. 个人背景与稳定性</span></a></li></ol></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%BE%AE%E6%B4%BE%E7%BD%91%E7%BB%9C"><span class="toc-number">1.22.</span> <span class="toc-text">微派网络</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#%E9%A1%B9%E7%9B%AE"><span class="toc-number">1.22.1.</span> <span class="toc-text">项目</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E8%AE%A1%E7%BD%91"><span class="toc-number">1.22.2.</span> <span class="toc-text">计网</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="toc-number">1.22.3.</span> <span class="toc-text">数据库</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E6%B6%88%E6%81%AF%E9%98%9F%E5%88%97"><span class="toc-number">1.22.4.</span> <span class="toc-text">消息队列</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#AI"><span class="toc-number">1.22.5.</span> <span class="toc-text">AI</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E5%9C%BA%E6%99%AF%E9%A2%98"><span class="toc-number">1.22.6.</span> <span class="toc-text">场景题</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#%E7%AE%97%E6%B3%95"><span class="toc-number">1.22.7.</span> <span class="toc-text">算法</span></a></li></ol></li></ol></li></ol></div></div><div class="card-widget card-recent-post"><div class="item-headline"><i class="anzhiyufont anzhiyu-icon-history"></i><span>最近发布</span></div><div class="aside-list"><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/05/06/cursor%E5%89%8D%E7%AB%AF%E6%8F%90%E7%A4%BA%E8%AF%8D%E5%B7%A5%E7%A8%8B/" title="cursor前端提示词工程">cursor前端提示词工程</a><time datetime="2025-05-06T03:22:03.000Z" title="发表于 2025-05-06 11:22:03">2025-05-06</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/04/20/%E7%94%B5%E5%95%86%E9%A2%86%E5%9F%9FRAG%E5%AE%A2%E6%9C%8D%E8%81%8A%E5%A4%A9%E6%9C%BA%E5%99%A8%E4%BA%BA%E8%AE%BE%E8%AE%A1/" title="电商领域RAG客服聊天机器人设计">电商领域RAG客服聊天机器人设计</a><time datetime="2025-04-20T09:47:57.000Z" title="发表于 2025-04-20 17:47:57">2025-04-20</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/04/06/AI%E8%81%8A%E5%A4%A9%E6%9C%BA%E5%99%A8%E4%BA%BA%E8%AE%BE%E8%AE%A1/" title="AI聊天机器人设计">AI聊天机器人设计</a><time datetime="2025-04-06T06:28:45.000Z" title="发表于 2025-04-06 14:28:45">2025-04-06</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/04/03/AI-Learning/" title="AI-学习记录">AI-学习记录</a><time datetime="2025-04-03T09:04:03.000Z" title="发表于 2025-04-03 17:04:03">2025-04-03</time></div></div><div class="aside-list-item no-cover"><div class="content"><a class="title" href="/2025/03/30/Docker%E5%AD%A6%E4%B9%A0/" title="Docker学习">Docker学习</a><time datetime="2025-03-30T06:58:02.000Z" title="发表于 2025-03-30 14:58:02">2025-03-30</time></div></div></div></div></div></div></div></main><footer id="footer"><div id="footer-wrap"></div><div id="footer-bar"><div class="footer-bar-links"><div class="footer-bar-left"><div id="footer-bar-tips"><div class="copyright">&copy;2020 - 2025 By <a class="footer-bar-link" href="/" title="FANSEA" target="_blank">FANSEA</a></div></div><div id="footer-type-tips"></div></div><div class="footer-bar-right"><a class="footer-bar-link" target="_blank" rel="noopener" href="https://github.com/anzhiyu-c/hexo-theme-anzhiyu" title="主题">主题</a></div></div></div></footer></div><div id="sidebar"><div id="menu-mask"></div><div id="sidebar-menus"><div class="sidebar-site-data site-data is-center"><a href="/archives/" title="archive"><div class="headline">文章</div><div class="length-num">100</div></a><a href="/tags/" title="tag"><div class="headline">标签</div><div class="length-num">23</div></a><a href="/categories/" title="category"><div class="headline">分类</div><div class="length-num">0</div></a></div><span class="sidebar-menu-item-title">功能</span><div class="sidebar-menu-item"><a class="darkmode_switchbutton menu-child" href="javascript:void(0);" title="显示模式"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span>显示模式</span></a></div><div class="back-menu-list-groups"><div class="back-menu-list-group"><div class="back-menu-list-title">网页</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://blog.anheyu.com/" title="博客"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="/img/favicon.ico" alt="博客"/><span class="back-menu-item-text">博客</span></a></div></div><div class="back-menu-list-group"><div class="back-menu-list-title">项目</div><div class="back-menu-list"><a class="back-menu-item" target="_blank" rel="noopener" href="https://image.anheyu.com/" title="安知鱼图床"><img class="back-menu-item-icon" src= "data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7" onerror="this.onerror=null,this.src=&quot;/img/404.jpg&quot;" data-lazy-src="https://image.anheyu.com/favicon.ico" alt="安知鱼图床"/><span class="back-menu-item-text">安知鱼图床</span></a></div></div></div><div class="menus_items"><div class="menus_item"><a class="site-page" href="javascript:void(0);"><span> 友链</span></a><ul class="menus_item_child"><li><a class="site-page child faa-parent animated-hover" href="/link/"><i class="anzhiyufont anzhiyu-icon-link faa-tada" style="font-size: 0.9em;"></i><span> 友人帐</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/fcircle/"><i class="anzhiyufont anzhiyu-icon-artstation faa-tada" style="font-size: 0.9em;"></i><span> 朋友圈</span></a></li><li><a class="site-page child faa-parent animated-hover" href="/comments/"><i class="anzhiyufont anzhiyu-icon-envelope faa-tada" style="font-size: 0.9em;"></i><span> 留言板</span></a></li></ul></div></div><span class="sidebar-menu-item-title">标签</span><div class="card-tags"><div class="item-headline"></div><div class="card-tag-cloud"><a href="/tags/AI/" style="font-size: 0.88rem;">AI<sup>1</sup></a><a href="/tags/MQ/" style="font-size: 0.88rem;">MQ<sup>1</sup></a><a href="/tags/NoSQL/" style="font-size: 0.88rem;">NoSQL<sup>2</sup></a><a href="/tags/ROS/" style="font-size: 0.88rem;">ROS<sup>1</sup></a><a href="/tags/cursor-%E5%89%8D%E7%AB%AF/" style="font-size: 0.88rem;">cursor 前端<sup>1</sup></a><a href="/tags/docker-%E5%BE%AE%E6%9C%8D%E5%8A%A1/" style="font-size: 0.88rem;">docker 微服务<sup>1</sup></a><a href="/tags/java/" style="font-size: 0.88rem;">java<sup>8</sup></a><a href="/tags/rag-%E6%99%BA%E8%83%BD%E5%AE%A2%E6%9C%8D-SpringAI-%E6%AF%95%E4%B8%9A%E8%AE%BE%E8%AE%A1/" style="font-size: 0.88rem;">rag 智能客服 SpringAI 毕业设计<sup>1</sup></a><a href="/tags/vue/" style="font-size: 0.88rem;">vue<sup>1</sup></a><a href="/tags/%E5%88%9B%E4%B8%9A/" style="font-size: 0.88rem;">创业<sup>1</sup></a><a href="/tags/%E5%BE%AE%E6%9C%8D%E5%8A%A1/" style="font-size: 0.88rem;">微服务<sup>4</sup></a><a href="/tags/%E6%80%9D%E8%80%83/" style="font-size: 0.88rem;">思考<sup>10</sup></a><a href="/tags/%E6%8A%80%E6%9C%AF/" style="font-size: 0.88rem;">技术<sup>1</sup></a><a href="/tags/%E6%8A%80%E6%9C%AF%E6%BC%AB%E8%B0%88/" style="font-size: 0.88rem;">技术漫谈<sup>21</sup></a><a href="/tags/%E6%91%84%E5%BD%B1/" style="font-size: 0.88rem;">摄影<sup>1</sup></a><a href="/tags/%E6%95%B0%E6%8D%AE%E5%BA%93/" style="font-size: 0.88rem;">数据库<sup>6</sup></a><a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 0.88rem;">算法<sup>7</sup></a><a href="/tags/%E7%BC%96%E7%A8%8B%E5%B7%A5%E5%85%B7-JMeter/" style="font-size: 0.88rem;">编程工具 JMeter<sup>1</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E5%9F%BA%E7%A1%80/" style="font-size: 0.88rem;">计算机基础<sup>4</sup></a><a href="/tags/%E8%AE%A1%E7%AE%97%E6%9C%BA%E6%8E%A7%E5%88%B6/" style="font-size: 0.88rem;">计算机控制<sup>1</sup></a><a href="/tags/%E8%BD%A6%E8%BD%A6/" style="font-size: 0.88rem;">车车<sup>1</sup></a><a href="/tags/%E9%87%91%E8%9E%8D/" style="font-size: 0.88rem;">金融<sup>2</sup></a><a href="/tags/%E9%A1%B9%E7%9B%AE/" style="font-size: 0.88rem;">项目<sup>11</sup></a></div></div><hr/></div></div><div id="rightside"><div id="rightside-config-hide"><button id="readmode" type="button" title="阅读模式"><i class="anzhiyufont anzhiyu-icon-book-open"></i></button><button id="translateLink" type="button" title="简繁转换">繁</button><button id="darkmode" type="button" title="浅色和深色模式转换"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i></button><button id="hide-aside-btn" type="button" title="单栏和双栏切换"><i class="anzhiyufont anzhiyu-icon-arrows-left-right"></i></button></div><div id="rightside-config-show"><button id="rightside-config" type="button" title="设置"><i class="anzhiyufont anzhiyu-icon-gear"></i></button><button class="close" id="mobile-toc-button" type="button" title="目录"><i class="anzhiyufont anzhiyu-icon-list-ul"></i></button><button id="go-up" type="button" title="回到顶部"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></button></div></div><div id="nav-music"><a id="nav-music-hoverTips" onclick="anzhiyu.musicToggle()" accesskey="m">播放音乐</a><div id="console-music-bg"></div><meting-js id="8152976493" server="netease" type="playlist" mutex="true" preload="none" theme="var(--anzhiyu-main)" data-lrctype="0" order="random" volume="0.7"></meting-js></div><div id="rightMenu"><div class="rightMenu-group rightMenu-small"><div class="rightMenu-item" id="menu-backward"><i class="anzhiyufont anzhiyu-icon-arrow-left"></i></div><div class="rightMenu-item" id="menu-forward"><i class="anzhiyufont anzhiyu-icon-arrow-right"></i></div><div class="rightMenu-item" id="menu-refresh"><i class="anzhiyufont anzhiyu-icon-arrow-rotate-right" style="font-size: 1rem;"></i></div><div class="rightMenu-item" id="menu-top"><i class="anzhiyufont anzhiyu-icon-arrow-up"></i></div></div><div class="rightMenu-group rightMenu-line rightMenuPlugin"><div class="rightMenu-item" id="menu-copytext"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制选中文本</span></div><div class="rightMenu-item" id="menu-pastetext"><i class="anzhiyufont anzhiyu-icon-paste"></i><span>粘贴文本</span></div><a class="rightMenu-item" id="menu-commenttext"><i class="anzhiyufont anzhiyu-icon-comment-medical"></i><span>引用到评论</span></a><div class="rightMenu-item" id="menu-newwindow"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开</span></div><div class="rightMenu-item" id="menu-copylink"><i class="anzhiyufont anzhiyu-icon-link"></i><span>复制链接地址</span></div><div class="rightMenu-item" id="menu-copyimg"><i class="anzhiyufont anzhiyu-icon-images"></i><span>复制此图片</span></div><div class="rightMenu-item" id="menu-downloadimg"><i class="anzhiyufont anzhiyu-icon-download"></i><span>下载此图片</span></div><div class="rightMenu-item" id="menu-newwindowimg"><i class="anzhiyufont anzhiyu-icon-window-restore"></i><span>新窗口打开图片</span></div><div class="rightMenu-item" id="menu-search"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>站内搜索</span></div><div class="rightMenu-item" id="menu-searchBaidu"><i class="anzhiyufont anzhiyu-icon-magnifying-glass"></i><span>百度搜索</span></div><div class="rightMenu-item" id="menu-music-toggle"><i class="anzhiyufont anzhiyu-icon-play"></i><span>播放音乐</span></div><div class="rightMenu-item" id="menu-music-back"><i class="anzhiyufont anzhiyu-icon-backward"></i><span>切换到上一首</span></div><div class="rightMenu-item" id="menu-music-forward"><i class="anzhiyufont anzhiyu-icon-forward"></i><span>切换到下一首</span></div><div class="rightMenu-item" id="menu-music-playlist" onclick="window.open(&quot;https://y.qq.com/n/ryqq/playlist/8802438608&quot;, &quot;_blank&quot;);" style="display: none;"><i class="anzhiyufont anzhiyu-icon-radio"></i><span>查看所有歌曲</span></div><div class="rightMenu-item" id="menu-music-copyMusicName"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制歌名</span></div></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item menu-link" id="menu-randomPost"><i class="anzhiyufont anzhiyu-icon-shuffle"></i><span>随便逛逛</span></a><a class="rightMenu-item menu-link" href="/categories/"><i class="anzhiyufont anzhiyu-icon-cube"></i><span>博客分类</span></a><a class="rightMenu-item menu-link" href="/tags/"><i class="anzhiyufont anzhiyu-icon-tags"></i><span>文章标签</span></a></div><div class="rightMenu-group rightMenu-line rightMenuOther"><a class="rightMenu-item" id="menu-copy" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-copy"></i><span>复制地址</span></a><a class="rightMenu-item" id="menu-commentBarrage" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-message"></i><span class="menu-commentBarrage-text">关闭热评</span></a><a class="rightMenu-item" id="menu-darkmode" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-circle-half-stroke"></i><span class="menu-darkmode-text">深色模式</span></a><a class="rightMenu-item" id="menu-translate" href="javascript:void(0);"><i class="anzhiyufont anzhiyu-icon-language"></i><span>轉為繁體</span></a></div></div><div id="rightmenu-mask"></div><div><script src="/js/utils.js"></script><script src="/js/main.js"></script><script src="/js/tw_cn.js"></script><script src="https://cdn.cbd.int/@fancyapps/ui@5.0.28/dist/fancybox/fancybox.umd.js"></script><script src="https://cdn.cbd.int/instant.page@5.2.0/instantpage.js" type="module"></script><script src="https://cdn.cbd.int/vanilla-lazyload@17.8.5/dist/lazyload.iife.min.js"></script><script src="https://cdn.cbd.int/node-snackbar@0.1.16/dist/snackbar.min.js"></script><canvas id="universe"></canvas><script async src="https://npm.elemecdn.com/anzhiyu-theme-static@1.0.0/dark/dark.js"></script><script>// 消除控制台打印
var HoldLog = console.log;
console.log = function () {};
let now1 = new Date();
queueMicrotask(() => {
  const Log = function () {
    HoldLog.apply(console, arguments);
  }; //在恢复前输出日志
  const grt = new Date("04/01/2021 00:00:00"); //此处修改你的建站时间或者网站上线时间
  now1.setTime(now1.getTime() + 250);
  const days = (now1 - grt) / 1000 / 60 / 60 / 24;
  const dnum = Math.floor(days);
  const ascll = [
    `欢迎使用安知鱼!`,
    `生活明朗, 万物可爱`,
    `
        
       █████╗ ███╗   ██╗███████╗██╗  ██╗██╗██╗   ██╗██╗   ██╗
      ██╔══██╗████╗  ██║╚══███╔╝██║  ██║██║╚██╗ ██╔╝██║   ██║
      ███████║██╔██╗ ██║  ███╔╝ ███████║██║ ╚████╔╝ ██║   ██║
      ██╔══██║██║╚██╗██║ ███╔╝  ██╔══██║██║  ╚██╔╝  ██║   ██║
      ██║  ██║██║ ╚████║███████╗██║  ██║██║   ██║   ╚██████╔╝
      ╚═╝  ╚═╝╚═╝  ╚═══╝╚══════╝╚═╝  ╚═╝╚═╝   ╚═╝    ╚═════╝
        
        `,
    "已上线",
    dnum,
    "天",
    "©2020 By 安知鱼 V1.6.12",
  ];
  const ascll2 = [`NCC2-036`, `调用前置摄像头拍照成功，识别为【小笨蛋】.`, `Photo captured: `, `🤪`];

  setTimeout(
    Log.bind(
      console,
      `\n%c${ascll[0]} %c ${ascll[1]} %c ${ascll[2]} %c${ascll[3]}%c ${ascll[4]}%c ${ascll[5]}\n\n%c ${ascll[6]}\n`,
      "color:#425AEF",
      "",
      "color:#425AEF",
      "color:#425AEF",
      "",
      "color:#425AEF",
      ""
    )
  );
  setTimeout(
    Log.bind(
      console,
      `%c ${ascll2[0]} %c ${ascll2[1]} %c \n${ascll2[2]} %c\n${ascll2[3]}\n`,
      "color:white; background-color:#4fd953",
      "",
      "",
      'background:url("https://npm.elemecdn.com/anzhiyu-blog@1.1.6/img/post/common/tinggge.gif") no-repeat;font-size:450%'
    )
  );

  setTimeout(Log.bind(console, "%c WELCOME %c 你好，小笨蛋.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(
      console,
      "%c ⚡ Powered by 安知鱼 %c 你正在访问 FANSEA 的博客.",
      "color:white; background-color:#f0ad4e",
      ""
    )
  );

  setTimeout(Log.bind(console, "%c W23-12 %c 你已打开控制台.", "color:white; background-color:#4f90d9", ""));

  setTimeout(
    console.warn.bind(console, "%c S013-782 %c 你现在正处于监控中.", "color:white; background-color:#d9534f", "")
  );
});</script><script async src="/anzhiyu/random.js"></script><div class="js-pjax"><input type="hidden" name="page-type" id="page-type" value="post"></div><script>var visitorMail = "";
</script><script async data-pjax src="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/waterfall/waterfall.js"></script><script src="https://lf3-cdn-tos.bytecdntp.com/cdn/expire-1-M/qrcodejs/1.0.0/qrcode.min.js"></script><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.1.9/icon/ali_iconfont_css.css"><link rel="stylesheet" href="https://cdn.cbd.int/anzhiyu-theme-static@1.0.0/aplayer/APlayer.min.css" media="print" onload="this.media='all'"><script src="https://cdn.cbd.int/anzhiyu-blog-static@1.0.1/js/APlayer.min.js"></script><script src="https://cdn.cbd.int/hexo-anzhiyu-music@1.0.1/assets/js/Meting2.min.js"></script><script src="https://cdn.cbd.int/pjax@0.2.8/pjax.min.js"></script><script>let pjaxSelectors = ["head > title","#config-diff","#body-wrap","#rightside-config-hide","#rightside-config-show",".js-pjax"]
var pjax = new Pjax({
  elements: 'a:not([target="_blank"])',
  selectors: pjaxSelectors,
  cacheBust: false,
  analytics: false,
  scrollRestoration: false
})

document.addEventListener('pjax:send', function () {
  // removeEventListener scroll 
  anzhiyu.removeGlobalFnEvent('pjax')
  anzhiyu.removeGlobalFnEvent('themeChange')

  document.getElementById('rightside').classList.remove('rightside-show')
  
  if (window.aplayers) {
    for (let i = 0; i < window.aplayers.length; i++) {
      if (!window.aplayers[i].options.fixed) {
        window.aplayers[i].destroy()
      }
    }
  }

  typeof typed === 'object' && typed.destroy()

  //reset readmode
  const $bodyClassList = document.body.classList
  $bodyClassList.contains('read-mode') && $bodyClassList.remove('read-mode')
})

document.addEventListener('pjax:complete', function () {
  window.refreshFn()

  document.querySelectorAll('script[data-pjax]').forEach(item => {
    const newScript = document.createElement('script')
    const content = item.text || item.textContent || item.innerHTML || ""
    Array.from(item.attributes).forEach(attr => newScript.setAttribute(attr.name, attr.value))
    newScript.appendChild(document.createTextNode(content))
    item.parentNode.replaceChild(newScript, item)
  })

  GLOBAL_CONFIG.islazyload && window.lazyLoadInstance.update()

  typeof panguInit === 'function' && panguInit()

  // google analytics
  typeof gtag === 'function' && gtag('config', '', {'page_path': window.location.pathname});

  // baidu analytics
  typeof _hmt === 'object' && _hmt.push(['_trackPageview',window.location.pathname]);

  typeof loadMeting === 'function' && document.getElementsByClassName('aplayer').length && loadMeting()

  // prismjs
  typeof Prism === 'object' && Prism.highlightAll()
})

document.addEventListener('pjax:error', e => {
  if (e.request.status === 404) {
    pjax.loadUrl('/404.html')
  }
})</script><script charset="UTF-8" src="https://cdn.cbd.int/anzhiyu-theme-static@1.1.5/accesskey/accesskey.js"></script></div><div id="popup-window"><div class="popup-window-title">通知</div><div class="popup-window-divider"></div><div class="popup-window-content"><div class="popup-tip">你好呀</div><div class="popup-link"><i class="anzhiyufont anzhiyu-icon-arrow-circle-right"></i></div></div></div></body></html>